<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ç®€æRediså“¨å…µå®ç°åŸç†]]></title>
    <url>%2F2018%2F11%2F23%2Fredis-sentinel%2F</url>
    <content type="text"><![CDATA[Redis Sentinel æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶æ„(SentinelèŠ‚ç‚¹ã€Redisæ•°æ®èŠ‚ç‚¹ã€Rediså®¢æˆ·ç«¯åˆ†å¸ƒåœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Š)ï¼Œå…¶ä¸­åŒ…æ‹¬äº†è‹¥å¹²ä¸ªSentinelèŠ‚ç‚¹å’ŒRedisæ•°æ®èŠ‚ç‚¹ï¼Œæ¯ä¸ªSentinelèŠ‚ç‚¹å¯¹æ•°æ®èŠ‚ç‚¹å’Œå…¶ä»–SentinelèŠ‚ç‚¹è¿›è¡Œç›‘æ§ï¼Œå½“å®ƒå‘ç°èŠ‚ç‚¹ä¸å¯è¾¾æ—¶ï¼Œä¼šå¯¹èŠ‚ç‚¹åšä¸‹çº¿æ ‡è¯†ã€‚è‹¥è¯¥èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹ï¼Œå®ƒä¼šå’Œå…¶ä»–SentinelèŠ‚ç‚¹å…±åŒåå•†ï¼Œè‹¥å¤§éƒ¨åˆ†èŠ‚ç‚¹çš†è¡¨ç¤ºè¯¥ä¸»èŠ‚ç‚¹ä¸å¯è¾¾ï¼Œé‚£ä¹ˆå°±ä¼šä»Sentinelä¸­é€‰ä¸¾å‡ºä¸€ä¸ªSentinelèŠ‚ç‚¹æ¥å®Œæˆè‡ªåŠ¨æ•…éšœè½¬ç§»çš„å·¥ä½œï¼ŒåŒæ—¶å°†è¿™ä¸ªå˜åŒ–å®æ—¶é€šçŸ¥ç»™Redisåº”ç”¨æ–¹ã€‚ å®ç°åŸç†ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡Redisé€šè¿‡ä¸‰ä¸ªå®šæ—¶ç›‘æ§ä»»åŠ¡å®Œæˆå¯¹å„ä¸ªèŠ‚ç‚¹çš„å‘ç°å’Œç›‘æ§ã€‚_s_ è·å–æœ€æ–°æ‹“æ‰‘ç»“æ„æ¯éš”10sï¼Œæ¯ä¸ªSentinelèŠ‚ç‚¹ä¼šå‘ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹å‘é€infoå‘½ä»¤è·å–æœ€æ–°çš„æ‹“æ‰‘ç»“æ„ã€‚ ä½œç”¨ï¼š é€šè¿‡å‘ä¸»èŠ‚ç‚¹æ‰§è¡Œinfoå‘½ä»¤ï¼Œè·å–ä»èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ‰€ä»¥SentinelèŠ‚ç‚¹ä¸éœ€è¦æ˜¾å¼é…ç½®ç›‘æ§ä»èŠ‚ç‚¹ã€‚ å½“æœ‰æ–°çš„ä»èŠ‚ç‚¹åŠ å…¥æ—¶éƒ½å¯ä»¥ç«‹åˆ»æ„ŸçŸ¥å‡ºæ¥ã€‚ èŠ‚ç‚¹ä¸å¯è¾¾æˆ–è€…æ•…éšœè½¬ç§»åï¼Œå¯ä»¥é€šè¿‡infoå‘½ä»¤å®æ—¶æ›´æ–°èŠ‚ç‚¹æ‹“æ‰‘ä¿¡æ¯ã€‚ SentinelèŠ‚ç‚¹å‘å¸ƒå’Œè®¢é˜…sentinel:helloé¢‘é“æ¯éš”2sï¼Œæ¯ä¸ªSentinelèŠ‚ç‚¹ä¼šå‘Redisæ•°æ®èŠ‚ç‚¹çš„__sentinel__:helloé¢‘é“å‘é€è¯¥sentinelèŠ‚ç‚¹å¯¹äºä¸»èŠ‚ç‚¹çš„åˆ¤æ–­ä»¥åŠå½“å‰SentinelèŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒåŒæ—¶æ¯ä¸ªSentinelèŠ‚ç‚¹ä¹Ÿä¼šè®¢é˜…è¯¥é¢‘é“æ¥äº†è§£å…¶ä»–SentinelèŠ‚ç‚¹ä»¥åŠå®ƒä»¬å¯¹ä¸»èŠ‚ç‚¹çš„åˆ¤æ–­ã€‚ ä½œç”¨ï¼š å‘ç°æ–°çš„SentinelèŠ‚ç‚¹ã€‚ SentinelèŠ‚ç‚¹ä¹‹é—´äº¤æ¢ä¸»èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œä½œä¸ºåé¢å®¢è§‚ä¸‹çº¿ä»¥åŠé¢†å¯¼è€…é€‰ä¸¾çš„ä¾æ®ã€‚ å¿ƒè·³æ£€æµ‹æ¯éš”1sï¼Œæ¯éš”SentinelèŠ‚ç‚¹ä¼šå‘ä¸»èŠ‚ç‚¹ã€ä»èŠ‚ç‚¹ã€å…¶ä½™SentinelèŠ‚ç‚¹å‘é€ä¸€æ¡pingå‘½ä»¤åšä¸€æ¬¡å¿ƒè·³æ£€æµ‹ï¼Œæ¥ç¡®å®šè¿™äº›èŠ‚ç‚¹æ˜¯å¦å¯è¾¾ã€‚ ä½œç”¨ï¼š åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å¯è¾¾çš„é‡è¦ä¾æ®ã€‚ ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿ä¸»è§‚ä¸‹çº¿ä¸Šé¢æåˆ°å¿ƒè·³æ£€æµ‹ï¼Œå¦‚æœè¿™äº›èŠ‚ç‚¹è¶…è¿‡down-after-millionsectionsè¿˜æ²¡æœ‰è¿›è¡Œæœ‰æ•ˆå›å¤ï¼ŒSentinelèŠ‚ç‚¹å°±ä¼šå¯¹è¯¥èŠ‚ç‚¹åšå¤±è´¥åˆ¤æ–­ï¼Œè¿™ä¸ªè¡Œä¸ºå«åšä¸»è§‚ä¸‹çº¿ã€‚SentinelèŠ‚ç‚¹ã€ä»èŠ‚ç‚¹ï¼Œä¸»è§‚ä¸‹çº¿åæ²¡æœ‰åç»­çš„æ•…éšœè½¬ç§»æ“ä½œã€‚ å®¢è§‚ä¸‹çº¿å½“SentinelèŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿çš„èŠ‚ç‚¹æ˜¯ä¸»èŠ‚ç‚¹æ—¶ï¼Œè¯¥SentinelèŠ‚ç‚¹ä¼šé€šè¿‡sentinel is-master-down-by-addrå‘½ä»¤å‘å…¶ä»–SentinelèŠ‚ç‚¹è¯¢é—®å¯¹ä¸»èŠ‚ç‚¹çš„åˆ¤æ–­ï¼Œå½“è¶…è¿‡ä¸ªæ•°ï¼ŒSentinelè®¤ä¸ºä¸»èŠ‚ç‚¹çš„ç¡®å‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶è¯¥Sentinelå¯¹ä¸»èŠ‚ç‚¹åšå‡ºå®¢è§‚ä¸‹çº¿çš„å†³å®šã€‚ é¢†å¯¼è€…SentinelèŠ‚ç‚¹é€‰ä¸¾å½“SentinelèŠ‚ç‚¹å¯¹ä¸»èŠ‚ç‚¹å®Œæˆäº†å®¢è§‚ä¸‹çº¿åï¼ŒSentinelèŠ‚ç‚¹ä¹‹é—´è¿˜ä¼šé€‰ä¸¾å‡ºä¸€ä¸ªç»“ç‚¹ä½œä¸ºé¢†å¯¼è€…è¿›è¡Œæ•…éšœè½¬ç§»å·¥ä½œï¼›Redisä½¿ç”¨äº†Raftç®—æ³•å®ç°é¢†å¯¼è€…é€‰ä¸¾ã€‚ Raftç®—æ³•å¤§è‡´æ€è·¯ æ¯ä¸ªåœ¨çº¿çš„SentinelèŠ‚ç‚¹éƒ½æœ‰èµ„æ ¼æˆä¸ºé¢†å¯¼è€…ï¼Œå½“å®ƒç¡®è®¤ä¸»èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿åï¼Œä¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€sentinel is-master-down-by-addrå‘½ä»¤ï¼Œè¦æ±‚å°†è‡ªå·±è®¾ç½®ä¸ºé¢†å¯¼è€…ã€‚ æ”¶åˆ°å‘½ä»¤çš„SentinelèŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰åŒæ„è¿‡å…¶ä»–çš„SentinelèŠ‚ç‚¹çš„sentinel is-master-down-by-addrå‘½ä»¤ï¼Œå°†åŒæ„è¯¥è¯·æ±‚ï¼Œåä¹‹æ‹’ç»ã€‚ å¦‚æœè¯¥SentinelèŠ‚ç‚¹å‘ç°è‡ªå·±çš„ç¥¨æ•°å·²ç»å¤§äºæˆ–ç­‰äºmax(quorum, num(sentinels) / 2 + 1)ï¼Œé‚£ä¹ˆå®ƒå°±æˆä¸ºé¢†å¯¼è€…ã€‚ å¦‚æœæ­¤è¿‡ç¨‹æ²¡æœ‰é€‰ä¸¾å‡ºé¢†å¯¼è€…ï¼Œå°†è¿›å…¥ä¸‹ä¸€æ¬¡é€‰ä¸¾ã€‚ åŸºæœ¬ä¸Šè°å…ˆå®Œæˆå®¢è§‚ä¸‹çº¿ï¼Œè°å°±æ˜¯é¢†å¯¼è€…ã€‚ æ•…éšœè½¬ç§»é¢†å¯¼è€…é€‰ä¸¾å‡ºçš„Sentinelå°†è´Ÿè´£æ•…éšœè½¬ç§»ã€‚ è¿‡ç¨‹ ä»èŠ‚ç‚¹åˆ—è¡¨ä¸­é€‰ä¸¾å‡ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ã€‚ è¿‡æ»¤æ‰ä¸ä¸»è§‚ä¸‹çº¿ã€æ‰çº¿ã€5ç§’å†…æ²¡æœ‰å›å¤Sentinel pingå“åº”ç­‰ç­‰çš„èŠ‚ç‚¹â€¦ é€‰æ‹©ä»èŠ‚ç‚¹ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›ï¼Œä¸å­˜åœ¨åˆ™ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ é€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§çš„ä»èŠ‚ç‚¹ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›ï¼Œä¸å­˜åœ¨åˆ™ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ é€‰æ‹©runidæœ€å°çš„ä»èŠ‚ç‚¹ã€‚ å¯¹é€‰ä¸¾å‡ºçš„èŠ‚ç‚¹æ‰§è¡Œslave of no oneï¼Œå‡çº§ä¸ºä¸»èŠ‚ç‚¹ã€‚ Sentinelé¢†å¯¼è€…èŠ‚ç‚¹å‘å…¶ä»–èŠ‚ç‚¹å‘é€å‘½ä»¤ï¼Œè®©å®ƒä»¬æˆä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€‚ Sentinelé›†åˆèŠ‚ç‚¹å°†åŸä¸»èŠ‚ç‚¹æ›´æ–°ä¸ºä»èŠ‚ç‚¹ï¼Œå¹¶ä¿æŒå¯¹å…¶å…³æ³¨ï¼Œå½“å…¶æ¢å¤åå‘½ä»¤å®ƒå»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹ã€‚]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>å“¨å…µ</tag>
        <tag>é«˜å¯ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€æRediså¤åˆ¶åŸç†]]></title>
    <url>%2F2018%2F11%2F11%2FRedis-Replication%2F</url>
    <content type="text"><![CDATA[åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ºäº†è§£å†³å•ç‚¹é—®é¢˜ï¼Œé€šå¸¸ä¼šæŠŠæ•°æ®å¤åˆ¶æˆå¤šä¸ªå‰¯æœ¬éƒ¨ç½²åˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œä»¥æ»¡è¶³è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ç­‰éœ€æ±‚ï¼ŒRedisä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒRedisæ”¯æŒç®€å•ä¸”æ˜“ç”¨çš„ä¸»ä»å¤åˆ¶ï¼ˆmaster-slave replicationï¼‰åŠŸèƒ½ã€‚ å¤åˆ¶è¿‡ç¨‹ slaveæ‰§è¡Œslaveofå‘½ä»¤ï¼Œslaveåªä¿å­˜masterçš„åœ°å€ä¿¡æ¯åå°±è¿”å›ã€‚ slaveé€šè¿‡å†…éƒ¨æ¯ç§’è¿è¡Œçš„å®šæ—¶ä»»åŠ¡ç»´æŠ¤å¤åˆ¶ç›¸å…³çš„é€»è¾‘ï¼Œå½“å®šæ—¶ä»»åŠ¡å‘ç°æ–°çš„masterä¿¡æ¯æ—¶ï¼Œå¼€å§‹å°è¯•ä¸masterå»ºç«‹ç½‘ç»œè¿æ¥ã€‚å¦‚æœæ— æ³•å»ºç«‹è¿æ¥ï¼Œslaveä¼šä¸€ç›´æ— é™æ¬¡é‡è¿ç›´åˆ°è¿æ¥æˆåŠŸæˆ–è€…å–æ¶ˆå¤åˆ¶ã€‚ è¿æ¥å»ºç«‹æˆåŠŸåslaveä¼šå‘é€pingè¯·æ±‚è¿›è¡Œé¦–æ¬¡é€šä¿¡ï¼Œæ£€æµ‹ä¸»ä»ä¹‹é—´ç½‘ç»œå¥—æ¥å­—æ˜¯å¦å¯ç”¨ã€æ£€æµ‹msaterå½“å‰æ˜¯å¦å¯æ¥å—å¤„ç†å‘½ä»¤ã€‚ å¦‚æœmasterè®¾ç½®äº†requirepasså‚æ•°ï¼Œåˆ™éœ€è¦å¯†ç éªŒè¯ã€‚ é¦–æ¬¡å»ºç«‹å¤åˆ¶ï¼Œä¸»ä»èŠ‚ç‚¹ä¼šè¿›è¡Œä¸€æ¬¡å…¨é‡å¤åˆ¶ã€‚ åŒæ­¥æ•°æ®é›†æˆåŠŸåï¼ŒmasteræŒç»­æŠŠåç»­çš„å†™å‘½ä»¤å‘é€ç»™slaveï¼Œä¿è¯ä¸»ä»ä¸€è‡´æ€§ã€‚ æ•°æ®åŒæ­¥å¦‚ä½•è¿›è¡Œæ•°æ®åŒæ­¥ï¼Ÿå¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰å‚ä¸ä¸»ä»å¤åˆ¶çš„masterå’Œslaveä¼šä¿å­˜å„è‡ªçš„å¤åˆ¶åç§»é‡ï¼Œslaveçš„å¤åˆ¶åç§»é‡åˆå§‹å€¼ä¸º-1ã€‚masterå¤„ç†å†™å…¥å‘½ä»¤åï¼Œä¼šå¯¹è‡ªå·±çš„å¤åˆ¶åç§»é‡è¿›è¡Œç´¯åŠ ï¼›slaveæ”¶åˆ°masterå‘é€çš„å‘½ä»¤åï¼Œä¹Ÿä¼šå¯¹è‡ªå·±çš„å¤åˆ¶åç§»é‡è¿›è¡Œç´¯åŠ ï¼Œå¹¶ä¸”slaveæ¯ç§’ä¸ŠæŠ¥è‡ªèº«çš„å¤åˆ¶åç§»é‡ç»™masterï¼Œæ‰€ä»¥masterä¹Ÿä¿å­˜äº†slaveçš„å¤åˆ¶åç§»é‡ã€‚å€˜è‹¥ä¸»ä»å¤åˆ¶åç§»é‡å·®è·è¿‡å¤§ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯å› ä¸ºé˜»å¡æˆ–ç½‘ç»œå»¶è¿Ÿé«˜é€ æˆçš„ã€‚ å¤åˆ¶ç§¯å‹ç¼“å†²åŒºå¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ˜¯ä¿å­˜åœ¨masterä¸Šçš„ä¸€ä¸ªå›ºå®šé•¿åº¦çš„é˜Ÿåˆ—ã€‚å½“masterå¤„ç†å†™å…¥å‘½ä»¤åï¼Œä¸ä»…ä¼šæŠŠå‘½ä»¤å‘é€ç»™slaveï¼Œä¹Ÿä¼šæŠŠå‘½ä»¤å†™å…¥å¤åˆ¶ç§¯å‹ç¼“å†²åŒºã€‚å¤åˆ¶ç§¯å‹ç¼“å†²åŒºç”¨äºä¿å­˜æœ€è¿‘å·²å¤åˆ¶æ•°æ®ï¼Œå¯ç”¨äºéƒ¨åˆ†å¤åˆ¶æˆ–å¤åˆ¶å‘½ä»¤ä¸¢å¤±çš„æ•°æ®è¡¥æ•‘ã€‚ ä¸»èŠ‚ç‚¹è¿è¡ŒIDï¼ˆrunIdï¼‰æ¯ä¸ªRediså¯åŠ¨åä¼šåŠ¨æ€åˆ†é…ä¸€ä¸ª40ä½çš„åå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²ä½œä¸ºè¿è¡ŒIDï¼Œè¿è¡ŒIDçš„ä¸»è¦ä½œç”¨æ˜¯å”¯ä¸€è¯†åˆ«RedisèŠ‚ç‚¹ã€‚å¦‚æœmasterè¿è¡ŒIDå‘ç”Ÿå˜åŒ–åï¼Œä¸»ä»èŠ‚ç‚¹å°†è¿›è¡Œå…¨é‡å¤åˆ¶ã€‚ psyncå‘½ä»¤slaveä½¿ç”¨psyncå‘½ä»¤å®Œæˆéƒ¨åˆ†å¤åˆ¶å’Œå…¨é‡å¤åˆ¶åŠŸèƒ½ï¼Œå‘½ä»¤æ ¼å¼ï¼špsync {runId} {offset}ã€‚slaveå‘é€psyncå‘½ä»¤ç»™masterï¼Œmasteræ ¹æ®psyncçš„å‚æ•°å’Œè‡ªèº«æ•°æ®å†³å®šå“åº”ç»“æœï¼ˆå…¨é‡å¤åˆ¶ã€éƒ¨åˆ†å¤åˆ¶ã€é”™è¯¯ï¼‰ã€‚ å…¨é‡å¤åˆ¶å…¨é‡å¤åˆ¶æ˜¯redisæœ€æ—©æ”¯æŒçš„å¤åˆ¶æ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸»ä»ç¬¬ä¸€æ¬¡å»ºç«‹åå¿…é¡»ç»å†çš„é˜¶æ®µã€‚ è¿‡ç¨‹ å‘é€psyncå‘½ä»¤è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œç”±äºæ˜¯ç¬¬ä¸€æ¬¡è¿›è¡Œå¤åˆ¶ï¼Œä»èŠ‚ç‚¹æ²¡æœ‰å¤åˆ¶åç§»é‡å’Œä¸»èŠ‚ç‚¹è¿è¡ŒIDï¼Œæ‰€ä»¥å‘é€psync ? -1ã€‚ ä¸»èŠ‚ç‚¹æ ¹æ®psyncè§£æå½“å‰ä¸ºå…¨é‡å¤åˆ¶ï¼Œå›å¤+FULLRESYNCå“åº”ã€‚ slaveæ¥æ”¶åˆ°masterçš„å“åº”æ•°æ®ï¼Œä¿å­˜runIdå’Œoffsetã€‚ masterå¼€å§‹æ‰§è¡Œbgsaveï¼Œä¿å­˜RDBåˆ°æœ¬åœ°ã€‚ masterå‘é€RDBæ–‡ä»¶ç»™slaveï¼Œslaveæ¥å—åˆ°RDBæ–‡ä»¶åå­˜å‚¨ä¸ºè‡ªå·±çš„æ•°æ®æ–‡ä»¶ã€‚ï¼ˆå¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œå­˜åœ¨è¶…æ—¶å…¨é‡å¤åˆ¶å¤±è´¥çš„é£é™©ï¼‰ã€‚ ä»slaveå¼€å§‹æ¥å—RDBåˆ°æ¥å—å®ŒæˆæœŸé—´ï¼Œmasterä»åœ¨å¤„ç†è¯»å†™å‘½ä»¤ã€‚åœ¨è¿™æœŸé—´ï¼Œmasterå°†å†™å‘½ä»¤å†™å…¥å®¢æˆ·ç«¯ç¼“å†²åŒºï¼Œå½“slaveåŠ è½½å®ŒRDBåï¼Œå†æŠŠç¼“å†²åŒºå†…çš„æ•°æ®å‘é€ç»™slaveï¼Œä¿è¯ä¸»ä»ä¹‹é—´æ•°æ®ä¸€è‡´æ€§ã€‚ slaveæ¥å—å®Œmasterä¼ é€çš„æ•°æ®åä¼šæ¸…ç©ºè‡ªèº«æ—§æ•°æ®ã€‚ slaveæ¸…ç©ºæ•°æ®åå¼€å§‹ä»·å€¼RDBæ–‡ä»¶ï¼Œå¦‚æœRDBæ–‡ä»¶è¿‡å¤§ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸è€—æ—¶ã€‚å¦‚æœslaveæ­£å¤„äºå…¨é‡å¤åˆ¶é˜¶æ®µæˆ–è€…å¤åˆ¶ä¸­æ–­ï¼Œé‚£ä¹ˆslaveå“åº”è¯»å‘½ä»¤æ—¶å¯èƒ½æ‹¿åˆ°è¿‡æœŸæˆ–é”™è¯¯çš„æ•°æ®ï¼Œæ•°æ®å‡ºç°ä¸ä¸€è‡´ã€‚ï¼ˆå¯ä»¥é€šè¿‡è®¾ç½®slave-serve-stable-dataå‚æ•°æ¥å…³é—­å¯¹è¯»å‘½ä»¤çš„å“åº”ï¼‰ slaveåŠ è½½å®ŒRDBåï¼Œå¦‚æœslaveå¼€å¯äº†AOFæŒä¹…åŒ–ï¼Œå®ƒä¼šç«‹å³æ‰§è¡Œbgrewriteaofæ“ä½œï¼Œä¿è¯å…¨é‡å¤åˆ¶åAOFæŒä¹…åŒ–æ–‡ä»¶ç«‹åˆ»å¯ç”¨ã€‚ æ—¶é—´å¼€é”€ master bgsaveæ—¶é—´ RDBæ–‡ä»¶ç½‘ç»œä¼ è¾“æ—¶é—´ salveæ¸…ç©ºæ•°æ®æ—¶é—´ slaveåŠ è½½RDBæ—¶é—´ å¯èƒ½çš„AOFé‡å†™æ—¶é—´ ç”±æ­¤å¯è§ï¼Œå…¨é‡å¤åˆ¶çš„æ—¶é—´å¼€é”€å¤§ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå…¨é‡å¤åˆ¶è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ¶ˆè€—å¤§é‡çš„CPUã€å†…å­˜ã€ç½‘ç»œèµ„æºã€‚æ‰€ä»¥é™¤äº†ç¬¬ä¸€æ¬¡å¤åˆ¶é‡‡ç”¨å…¨é‡å¤åˆ¶ï¼Œå…¶ä½™åœºæ™¯åº”è¯¥è§„é¿å…¨é‡å¤åˆ¶çš„å‘ç”Ÿã€‚ éƒ¨åˆ†å¤åˆ¶éƒ¨åˆ†å¤åˆ¶ä¸»è¦æ˜¯Redisé’ˆå¯¹å…¨é‡å¤åˆ¶è¿‡é«˜å¼€é”€ä½œå‡ºçš„ä¸€ç§ä¼˜åŒ–æªæ–½ã€‚å½“slaveæ­£åœ¨å¤åˆ¶masteræ—¶ï¼Œå¦‚æœå‡ºç°ç½‘ç»œé—ªæ–­æˆ–è€…å‘½ä»¤ä¸¢å¤±ç­‰å¼‚å¸¸æƒ…å†µæ—¶ï¼Œslaveä¼šå‘masterè¦æ±‚è¡¥å‘ä¸¢å¤±çš„å‘½ä»¤æ•°æ®ï¼Œå¦‚æœmasterçš„å¤åˆ¶ç§¯å‹ç¼“å†²åŒºå†…å­˜åœ¨è¿™éƒ¨åˆ†æ•°æ®åˆ™ä¹‹é—´å‘ç»™slaveï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä¸»ä»èŠ‚ç‚¹å¤åˆ¶çš„ä¸€è‡´æ€§ã€‚è¡¥å‘çš„è¿™éƒ¨åˆ†æ•°æ®ä¸€èˆ¬è¿œè¿œå°äºå…¨é‡æ•°æ®ï¼Œæ‰€ä»¥å¼€é”€å¾ˆå°ã€‚ è¿‡ç¨‹ ä¸»ä»èŠ‚ç‚¹ä¹‹é—´ç½‘ç»œå‡ºç°ä¸­æ–­æ—¶ï¼Œå¦‚æœè¶…è¿‡repl-timeoutæ—¶é—´ï¼Œmasterä¼šè®¤ä¸ºslaveæ•…éšœå¹¶ä¸­æ–­å¤åˆ¶è¿æ¥ã€‚ ä¸»ä»è¿æ¥ä¸­æ–­æœŸé—´masterä¾ç„¶å“åº”å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œä½†å¤åˆ¶è¿æ¥ä¸­æ–­å‘½ä»¤æ— æ³•å‘é€ç»™slaveï¼Œä¸è¿‡masterå†…éƒ¨å­˜åœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œå¯ä»¥ä¿å­˜æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å‘½ä»¤æ•°æ®ï¼Œé»˜è®¤æœ€å¤§ç¼“å­˜1MBã€‚ ä¸»ä»èŠ‚ç‚¹ç½‘ç»œæ¢å¤åï¼Œslaveå†æ¬¡è¿ä¸Šmasterã€‚ ä¸»ä»è¿æ¥æ¢å¤åï¼Œç”±äºslaveä¿å­˜äº†è‡ªèº«å·²å¤åˆ¶çš„åç§»é‡å’Œä¸»èŠ‚ç‚¹çš„è¿è¡ŒIDï¼Œæ­¤æ—¶å°†ä»–ä»¬ä½œä¸ºå‚æ•°å‘é€ç»™masterï¼Œè¦æ±‚è¿›è¡Œéƒ¨åˆ†å¤åˆ¶ã€‚ masteræ¥åˆ°psyncå‘½ä»¤åè¿›è¡Œæ ¸å¯¹ï¼Œç„¶åæ ¹æ®offsetåœ¨è‡ªèº«å¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ’åº§ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äºç¼“å†²åŒºï¼Œåˆ™å¯¹slaveå‘é€+CONTINUEå“åº”ï¼Œè¡¨ç¤ºå¯ä»¥è¿›è¡Œéƒ¨åˆ†å¤åˆ¶ã€‚ masteræ ¹æ®offsetæŠŠå¤åˆ¶ç§¯å‹ç¼“å†²åŒºé‡Œçš„æ•°æ®å‘é€ç»™slaveï¼Œä¿è¯ä¸»ä»å¤åˆ¶è¿›å…¥æ­£å¸¸çŠ¶æ€ã€‚ å¼‚æ­¥å¤åˆ¶ï¼ˆå†™å‘½ä»¤åŒæ­¥ï¼‰masterä¸ä»…è´Ÿè´£æ•°æ®è¯»å†™ï¼Œè¿˜è´Ÿè´£æŠŠå†™å‘½ä»¤åŒæ­¥ç»™slaveã€‚å†™å‘½ä»¤çš„å‘é€æ˜¯å¼‚æ­¥å®Œæˆï¼Œmasterè‡ªèº«å¤„ç†å®Œå†™å‘½ä»¤åç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸ç­‰å¾…slaveå¤åˆ¶å®Œæˆã€‚ç”±äºä¸»ä»å¤åˆ¶è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œå°±ä¼šé€ æˆsalveæ•°æ®ç›¸å¯¹masterå­˜åœ¨å»¶è¿Ÿã€‚ å¿ƒè·³æœºåˆ¶ä¸»ä»èŠ‚ç‚¹å»ºç«‹å¤åˆ¶åï¼Œå®ƒä»¬ä¹‹é—´ç»´æŠ¤ç€é•¿è¿æ¥å¹¶å½¼æ­¤å‘é€å¿ƒè·³å‘½ä»¤ã€‚ ä¸»ä»å¿ƒè·³åˆ¤æ–­æœºåˆ¶ ä¸»ä»èŠ‚ç‚¹å„è‡ªéƒ½æœ‰å¿ƒè·³æ£€æµ‹æœºåˆ¶ï¼Œå„è‡ªæ¨¡æ‹Ÿæˆå¯¹æ–¹çš„å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚ masteré»˜è®¤æ¯éš”10så¯¹slaveå‘é€pingå‘½ä»¤ï¼Œåˆ¤æ–­slaveçš„å­˜æ´»æ€§å’Œè¿æ¥çŠ¶æ€ã€‚ slaveæ¯éš”1så¯¹masterå‘é€replconf ack {offset}å‘½ä»¤ï¼Œç»™masterä¸ŠæŠ¥è‡ªèº«å½“å‰çš„å¤åˆ¶åç§»é‡ã€‚replconfå‘½ä»¤å¸¸ç”¨äºæ£€æµ‹ä¸»ä»èŠ‚ç‚¹ç½‘ç»œçŠ¶æ€ã€ä¸ŠæŠ¥è‡ªèº«å¤åˆ¶åç§»é‡ï¼Œæ£€æµ‹å¤åˆ¶æ•°æ®æ˜¯å¦ä¸¢å¤±ï¼Œå¦‚æœslaveæ•°æ®ä¸¢å¤±ï¼Œå†ä»masterçš„å¤åˆ¶ç¼“å†²åŒºæ‹‰å–ä¸¢å¤±æ•°æ®ã€‚ã€å®ç°ä¿è¯slaveçš„æ•°é‡å’Œå»¶è¿Ÿæ€§åŠŸèƒ½ã€‚]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>ä¸»ä»å¤åˆ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€å•äº†è§£Redisä¸­çš„æŒä¹…åŒ–æœºåˆ¶]]></title>
    <url>%2F2018%2F11%2F09%2FRedis-Rersistence%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯æŒä¹…åŒ–ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼ŸæŒä¹…åŒ–å°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®æ¨¡å‹è½¬æ¢ä¸ºå­˜å‚¨æ¨¡å‹ï¼Œæ›´é€šä¿—çš„è¯´ï¼Œå°±æ˜¯å°†æ•°æ®ä¿å­˜åˆ°ç³»ç»Ÿç¡¬ç›˜ä¸­ã€‚ Redisæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸€æ—¦ç¨‹åºå´©æºƒæˆ–é‡å¯ï¼Œå†…å­˜ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒä¹…åŒ–ã€‚ RDBï¼ˆé»˜è®¤å¼€å¯ï¼‰ä»‹ç»RDBæŒä¹…åŒ–æ˜¯æŠŠå½“å‰è¿›ç¨‹æ•°æ®ç”Ÿæˆå¿«ç…§ä¿å­˜åˆ°ç¡¬ç›˜çš„è¿‡ç¨‹ï¼Œé€‚ç”¨äºå¤‡ä»½ã€å…¨é‡å¤åˆ¶ç­‰åœºæ™¯ã€‚ è¿‡ç¨‹ æ‰§è¡Œbgsaveå‘½ä»¤ï¼Œçˆ¶è¿›ç¨‹åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰æ­£åœ¨æ‰§è¡Œçš„å­è¿›ç¨‹å¦‚AOFå­è¿›ç¨‹ï¼Œè‹¥æœ‰ç›´æ¥è¿”å›ã€‚ çˆ¶è¿›ç¨‹æ‰§è¡Œforkæ“ä½œåˆ›å»ºå­è¿›ç¨‹ï¼Œforkæ“ä½œä¼šé˜»å¡çˆ¶è¿›ç¨‹ã€‚ forkå®Œæˆåï¼Œçˆ¶è¿›ç¨‹å¤„ç†å…¶ä»–å‘½ä»¤ã€‚ å­è¿›ç¨‹åˆ›å»ºRDBæ–‡ä»¶ï¼Œæ ¹æ®çˆ¶è¿›ç¨‹å†…å­˜ç”Ÿæˆä¸´æ—¶å¿«ç…§æ–‡ä»¶ï¼Œå®Œæˆåå¯¹æ—§æ–‡ä»¶è¿›è¡ŒåŸå­æ›¿æ¢ã€‚ å­è¿›ç¨‹å‘é€ä¿¡å·é€šçŸ¥çˆ¶è¿›ç¨‹è¡¨ç¤ºå®Œæˆï¼Œçˆ¶è¿›ç¨‹æ›´æ–°ç»Ÿè®¡æ¶ˆæ¯ã€‚ ä¼˜ç‚¹ RDBæ˜¯ä¸€ä¸ªéå¸¸ç´§å‡‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¿å­˜ç€Redisåœ¨æŸä¸ªæ—¶é—´èŠ‚ç‚¹ä¸Šçš„æ•°æ®é›†ï¼Œéå¸¸é€‚åˆå¤‡ä»½ã€å…¨é‡å¤åˆ¶ç­‰åœºæ™¯ã€‚ RDBéå¸¸é€‚ç”¨äºç¾éš¾æ¢å¤ï¼Œå› ä¸ºå®ƒåªæœ‰ä¸€ä¸ªæ–‡ä»¶å¹¶ä¸”éå¸¸ç´§å‡‘ï¼Œå¯ä»¥åŠ å¯†åä¼ é€åˆ°å…¶ä»–æ•°æ®ä¸­å¿ƒã€‚ çˆ¶è¿›ç¨‹ä¿å­˜RDBæ–‡ä»¶æ—¶ä»…ä»…éœ€è¦èŠ±è´¹forkä¸€ä¸ªå­è¿›ç¨‹çš„æ—¶é—´ï¼Œæ— éœ€æ‰§è¡Œä»»ä½•ç£ç›˜I/Oæ“ä½œã€‚ RedisåŠ è½½RDBæ¢å¤æ•°æ®è¿œè¿œå¿«äºAOFçš„æ–¹å¼ã€‚ ç¼ºç‚¹ å› ä¸ºRDBæ–‡ä»¶éœ€è¦ä¿å­˜æ•´ä¸ªæ•°æ®é›†çš„çŠ¶æ€ï¼ŒèŠ±è´¹æ•°åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥ä¸€æ—¦å‘ç”Ÿæ•…éšœåœæœºï¼Œå¯èƒ½ä¼šä¸¢å¤±æ•°åˆ†é’Ÿçš„æ•°æ®ã€‚ æ¯æ¬¡ä¿å­˜RDBæ—¶ï¼ŒRediséœ€è¦forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¹¶ç”±å­è¿›ç¨‹è¿›è¡Œæ•°æ®æŒä¹…åŒ–ï¼›å¦‚æœæ•°æ®é›†å¾ˆåºå¤§ï¼Œfork()å¯èƒ½ä¼šéå¸¸è€—æ—¶ï¼Œé€ æˆæœåŠ¡å™¨åœ¨çŸ­æ—¶é—´ï¼ˆæ¯«ç§’çº§ï¼‰å†…åœæ­¢å¤„ç†å®¢æˆ·ç«¯ï¼›å¦‚æœCPUæ¯”è¾ƒç´§å¼ ï¼Œforkè¿‡ç¨‹å¯èƒ½é•¿è¾¾æ•´æ•´ä¸€ç§’ã€‚ AOFä»‹ç»AOFæŒä¹…åŒ–æ˜¯ä»¥ç‹¬ç«‹çš„æ—¥å¿—è®°å½•æ¯æ¬¡å†™å‘½ä»¤ï¼ŒRedisé‡å¯çš„æ—¶å€™æ‰§è¡ŒAOFæ–‡ä»¶ä¸­çš„å‘½ä»¤æ¥æ¢å¤æ•°æ®ã€‚ è¿‡ç¨‹ æ‰€æœ‰å†™å‘½ä»¤éƒ½ä¼šè¿½åŠ åˆ°AOFç¼“å†²åŒºã€‚ AOFç¼“å†²åŒºæ ¹æ®å¯¹åº”çš„ç­–ç•¥å‘ç¡¬ç›˜åšåŒæ­¥æ“ä½œã€‚ éšç€AOFæ–‡ä»¶è¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦å®šæœŸå¯¹AOFæ–‡ä»¶è¿›è¡Œé‡å†™ä»¥è¾¾åˆ°å‹ç¼©çš„ç›®çš„ã€‚ AOFç¼“å†²åŒºåŒæ­¥æ–‡ä»¶ç­–ç•¥å¯ä»¥é…ç½®Rediså¤šä¹…å°†æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸€æ¬¡ã€‚ always: æ¯æ¬¡æœ‰å†™å‘½ä»¤è¿½åŠ åˆ°AOFç¼“å†²åŒºæ—¶å°±è°ƒç”¨ç³»ç»Ÿfsyncæ“ä½œåŒæ­¥åˆ°AOFæ–‡ä»¶ã€‚ everysecï¼šå‘½ä»¤å†™å…¥AOFç¼“å†²åŒºåè°ƒç”¨ç³»ç»Ÿwriteæ“ä½œï¼ŒfsyncåŒæ­¥æ–‡ä»¶æ“ä½œç”±ä¸“é—¨çº¿ç¨‹æ¯ç§’è°ƒç”¨ä¸€æ¬¡ã€‚ noï¼šå‘½ä»¤å†™å…¥AOFç¼“å†²åŒºåè°ƒç”¨ç³»ç»Ÿwriteæ“ä½œï¼Œä¸å¯¹AOFæ–‡ä»¶åšfsyncæ“ä½œï¼ŒåŒæ­¥ç¡¬ç›˜ç”±ç³»ç»Ÿè´Ÿè´£ï¼Œé€šå¸¸åŒæ­¥å‘¨æœŸä¸º30sã€‚ AOFé‡å†™æœºåˆ¶AOFæ–‡ä»¶é‡å†™æ˜¯æŠŠRedisè¿›ç¨‹å†…çš„æ•°æ®è½¬åŒ–ä¸ºå†™å‘½ä»¤åŒæ­¥åˆ°æ–°AOFæ–‡ä»¶çš„è¿‡ç¨‹ã€‚ï¼ˆå› ä¸ºé‡å†™AOFæ–‡ä»¶æ—¶ï¼ŒRedisä¼šåˆå¹¶å¤šæ¡å†™å‘½ä»¤ã€ä¸¢å¼ƒè¶…æ—¶çš„æ•°æ®ã€åˆ é™¤æ— æ•ˆå‘½ä»¤ï¼Œæ‰€ä»¥é‡å†™åçš„AOFæ–‡ä»¶è¦å°äºæ—§æ–‡ä»¶ï¼‰ ä¼˜ç‚¹ ä½¿ç”¨AOFæŒä¹…åŒ–ä½¿å¾—Redisæ›´åŠ è€ä¹…ï¼ŒAOFç¼“å†²åŒºåŒæ­¥æ–‡ä»¶ç­–ç•¥å¯ä»¥ä½¿å¾—Rediså°±ç®—å‘ç”Ÿæ•…éšœåœæœºï¼Œä¹Ÿæœ€å¤šä¸¢å¤±1sçš„æ•°æ®ï¼ˆå®é™…ä¸Šæœ€å¤šä¸º2sï¼‰ã€‚ AOFæ–‡ä»¶æœ‰åºåœ°ä¿å­˜äº†å¯¹æ•°æ®åº“æ‰§è¡Œçš„æ‰€æœ‰å†™å…¥æ“ä½œï¼Œè¿™äº›å†™å…¥æ“ä½œä»¥Redisåè®®çš„æ ¼å¼ä¿å­˜ï¼Œæ–‡ä»¶å†…å®¹æ˜“æ‡‚ä¸”å®¹æ˜“åˆ†æã€å¯¼å‡ºã€‚ ç¼ºç‚¹ AOFæ–‡ä»¶çš„ä½“ç§¯é€šå¸¸å¤§äºRDBæ–‡ä»¶çš„ä½“ç§¯ã€‚ AOFçš„é€Ÿåº¦å¯èƒ½æ…¢äºRDBã€‚]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>æŒä¹…åŒ– ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®—æ³•å…¥é—¨ä¹‹åˆçº§æ’åºï¼ˆé€‰æ‹©ã€æ’å…¥ã€å¸Œå°”ï¼‰]]></title>
    <url>%2F2018%2F10%2F03%2Fsort-1%2F</url>
    <content type="text"><![CDATA[ä¸‹é¢æ˜¯é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å¸Œå°”æ’åºç­‰åˆçº§æ’åºçš„ç®€å•ä»‹ç»åŠå®ç°ã€‚ é€‰æ‹©æ’åºæ­¥éª¤ é¦–å…ˆæ‰¾åˆ°æ•°ç»„ä¸­æœ€å°çš„å…ƒç´ ï¼Œå°†å…¶ä¸ç¬¬ä¸€ä¸ªå…ƒç´ ç½®æ¢ä½ç½®ã€‚ ä»å‰©ä½™çš„å…ƒç´ ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ ï¼Œå°†å…¶ä¸ç¬¬äºŒä¸ªå…ƒç´ ç½®æ¢ä½ç½®ã€‚ ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ•°ç»„å®Œå…¨æœ‰åºã€‚ é€‰æ‹©æ’åºæ‰€éœ€çš„æ—¶é—´å–å†³äºå…ƒç´ çš„æ•°é‡ å®ç°123456789101112131415161718public class Selection&#123; public static void sort(Comparable[] a) &#123; int N = a.length; int temp = 0; for (int i = 0; i &lt; N; i++) &#123; int min = i; for (int j = i + 1; j &lt; N; j++) &#123; if (a[min] &gt; a[j]) &#123; min = j; &#125; &#125; temp = a[min]; a[min] = a[i]; a[i] = temp; &#125; &#125;&#125; æ’å…¥æ’åºæ­¥éª¤ ç¬¬äºŒä¸ªå…ƒç´ ä¸å·¦ä¾§çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå°†å…¶æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ã€‚ ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸å·¦ä¾§çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå°†å…¶æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ã€‚ ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ•°ç»„å®Œå…¨æœ‰åºã€‚ å®ç°12345678910111213141516public class Insertion&#123; public static void sort(Comparable[] a) &#123; int N = a.length; int temp = 0; for (int i = 1; i &lt; N; i++) &#123; for (int j = i; j &gt; 0; j--) &#123; if (a[j] &lt; a[j-1]) &#123; temp = a[j]; a[j] = a[j-1]; a[j-1] = temp; &#125; &#125; &#125; &#125;&#125; æ’å…¥æ’åºæ‰€éœ€çš„æ—¶é—´å–å†³äºå…ƒç´ çš„åˆå§‹é¡ºåº å¸Œå°”æ’åºå¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„å¿«é€Ÿæ’åºï¼Œæ€æƒ³æ˜¯ä½¿æ•°ç»„ä¸­ä»»æ„é—´éš”ä¸ºhçš„å…ƒç´ æ˜¯æœ‰åºçš„ã€‚ æ­¥éª¤ï¼ˆåºåˆ—1/2(3^k - 1)ï¼‰ å¢å¹…hä¸ºæ•°ç»„é•¿åº¦çš„æŸä¸ªå€æ•°ï¼ˆæœ€å°å€¼ä¸º1ï¼‰ï¼Œç„¶åè®¡ç®—å‡ºå¢é•¿åºåˆ—(1, 4, 13, â€¦)ã€‚ h = h(max)ï¼Œç¡®ä¿é—´éš”ä¸ºhçš„å…ƒç´ æœ‰åºã€‚ h = h / 3ï¼Œç¡®ä¿é—´éš”ä¸ºhçš„å…ƒç´ æœ‰åºã€‚ é‡å¤ç¬¬3æ­¥ï¼Œç›´è‡³æ•°ç»„å®Œå…¨æœ‰åºã€‚ å®ç°1234567891011121314151617181920212223public class Shell&#123; public static void sort(Comparable[] a) &#123; int N = a.length; int h = 1; int temp = 0; System.out.print(h); while (h &lt; N / 3) h = h * 3 + 1; while (h &gt;= 1) &#123; for (int i = h; i &lt; N; i++) &#123; for (int j = i; j &gt;= h; j -= h) &#123; if (a[j - h] &gt; a[j]) &#123; temp = a[j - h]; a[j - h] = a[j]; a[j] = temp; &#125; &#125; &#125; h /= 3; &#125; &#125;&#125; åç§° ä½¿ç”¨åœºæ™¯ æ—¶é—´å¤æ‚åº¦ æ•ˆç‡å½±å“å› ç´  é€‰æ‹©æ’åº å°å‹æ•°ç»„ O(N^2) æ•°ç»„å¤§å° æ’å…¥æ’åº å°å‹æ•°ç»„ï¼Œæ•°ç»„éƒ¨åˆ†æœ‰åº O(N^2) å…ƒç´ åˆå§‹é¡ºåº å¸Œå°”æ’åº ä¸­å°å‹æ•°ç»„ï¼Œæ•°ç»„éƒ¨åˆ†æœ‰åº O(N^3/2), O(N^4/3), O(N^6/5)â€¦ å…ƒç´ åˆå§‹é¡ºåºï¼Œå¢é•¿åºåˆ—]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React Diff]]></title>
    <url>%2F2018%2F09%2F23%2Freact-diff%2F</url>
    <content type="text"><![CDATA[è®¡ç®—ä¸€æ£µæ ‘å½¢ç»“æ„è½¬æ¢æˆå¦ä¸€æ£µæ ‘å½¢ç»“æ„ï¼Œä¼ ç»Ÿçš„diffç®—æ³•ç®—æ³•å¤æ‚åº¦è¾¾åˆ°O(n^3)ã€‚Reacté€šè¿‡åˆ¶å®šç­–ç•¥ï¼Œå°†O(n^3)å¤æ‚åº¦çš„é—®é¢˜è½¬æ¢æˆO(n)å¤æ‚åº¦ã€‚ Diff ç­–ç•¥ Web UI ä¸­DOMèŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„ã€‚ å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡å”¯ä¸€idè¿›è¡ŒåŒºåˆ†ã€‚ Tree Diffå¯¹æ ‘è¿›è¡Œåˆ†å±‚æ¯”è¾ƒï¼Œä¸¤æ£µæ ‘åªä¼šå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚ å½“èŠ‚ç‚¹è·¨å±‚çº§ç§»åŠ¨æ—¶ï¼Œå¹¶ä¸ä¼šå‡ºç°æƒ³è±¡ä¸­çš„ç§»åŠ¨æ“ä½œï¼Œè€Œæ˜¯è¿›è¡Œcreate-deleteæ“ä½œï¼ˆå½±å“æ€§èƒ½ï¼‰ã€‚ Component Diff å¦‚æœæ˜¯åŒç±»å‹çš„ç»„ä»¶ï¼ŒæŒ‰åŸç­–ç•¥ç»§ç»­æ¯”è¾ƒVirtual DOM treeã€‚ å¦‚æœä¸æ˜¯åŒç±»å‹çš„ç»„ä»¶ï¼Œåˆ™å°†ç»„ä»¶åˆ¤æ–­ä¸ºdirty componentï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ å¦‚æœæ˜¯åŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œå¹¶ä¸”Virtual DOMæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°†ä¼šçœä¸‹å¤§é‡çš„diffè¿ç®—æ—¶é—´ï¼Œå› æ­¤Reactå…è®¸ç”¨æˆ·é€šè¿‡shouldComponentUpdate()æ¥åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦è¿›è¡Œdiffã€‚ Element Diffå½“èŠ‚ç‚¹å¤„äºåŒä¸€å±‚çº§æ—¶ï¼ŒReact Diffæä¾›äº†ä¸‰ç§èŠ‚ç‚¹æ“ä½œï¼Œåˆ†åˆ«ä¸ºï¼šINSERT_MARKUPã€MOVE_EXISTINGã€REMOVE_NODE INSERT_MARKUP: åŸé›†åˆä¸åŒ…å«æ–°çš„componentç±»å‹ï¼Œæ–°èŠ‚ç‚¹éœ€æ‰§è¡Œæ’å…¥æ“ä½œ MOVE_EXISTING: åŸé›†åˆåŒ…å«æ–°çš„componentç±»å‹ï¼Œä¸”elementæ—¶å¯æ›´æ–°çš„ç±»å‹ï¼ŒgenerateComponentChildrenå·²è°ƒç”¨receiveComponetï¼Œè¿™ç§æƒ…å†µä¸‹prevChild=nextChildï¼Œå°±éœ€è¦åšç§»åŠ¨æ“ä½œï¼Œå¯ä»¥å¤ç”¨ä»¥å‰çš„DOMèŠ‚ç‚¹ã€‚ REMOVE_NODE: è€componeç±»å‹ï¼Œåœ¨æ–°é›†åˆä¹Ÿæœ‰ï¼Œä½†å¯¹åº”çš„elementä¸åŒåˆ™ä¸èƒ½ç›´æ¥å¤ç”¨å’Œæ›´æ–°ï¼Œéœ€æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæˆ–è€…è€componentä¸åœ¨æ–°é›†åˆä¸­ï¼Œä¹Ÿéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œã€‚ å…è®¸å¼€å‘è€…å¯¹åŒä¸€å±‚çº§çš„åŒç»„å­èŠ‚ç‚¹æ·»åŠ å”¯ä¸€keyä½œä¸ºæ ‡è¯†ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£JavaScriptä¹‹Event Loop]]></title>
    <url>%2F2018%2F06%2F27%2Fevent-loop%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘é˜…è¯»ã€Šé«˜æ€§èƒ½JavaScriptã€‹æ—¶ï¼Œç¬¬å…­ç« è°ˆåˆ°â€œé€šè¿‡å®šæ—¶å™¨å°†JavaScriptæ‰§è¡Œä»£ç çš„æ§åˆ¶æƒå…ˆè®©ç»™æµè§ˆå™¨ç”¨äºæ›´æ–°UIçŠ¶æ€ï¼Œç„¶åå†å°†æ§åˆ¶æƒäº¤å›ç»™JavaScriptä»£ç ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿å¾—é¡µé¢æ›´ä¸ºæµç•…â€ï¼Œå°±è”æƒ³åˆ°äº†ä¹‹å‰ç†è§£çš„äº‹ä»¶å¾ªç¯ã€‚ è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆåšå¯ä»¥æå‡é¡µé¢çš„æµç•…åº¦ã€‚ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ å•çº¿ç¨‹çš„JavaScriptæ€»æ‰€å‘¨çŸ¥ï¼ŒJavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªæ—¶é—´æ®µé‡Œï¼ŒJavaScriptåªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼ˆæµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹ï¼‰ã€‚å¤šçº¿ç¨‹å¯ä»¥å®ç°åº”ç”¨çš„å¹¶è¡Œå¤„ç†ï¼Œä»è€Œä»¥æ›´é«˜çš„CPUåˆ©ç”¨ç‡æé«˜æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œååé‡ã€‚ ä½†æ˜¯JavaScriptå´ä»¥å•çº¿ç¨‹è¿›è¡Œï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ JavaScriptæ˜¯æµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œç”¨äºä¸ç”¨æˆ·äº¤äº’ä»¥åŠæ“ä½œDOMã€‚è€ƒè™‘å¦‚ä¸‹æƒ…å†µï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå¹¶å‘çš„æ“ä½œï¼Œå¯¹åŒä¸€ä¸ªDOMèŠ‚ç‚¹åˆ†åˆ«è¿›è¡Œåˆ é™¤å’Œä¿®æ”¹æ ·å¼ï¼Œæ­¤æ—¶æµè§ˆå™¨å°±æ— æ³•å†³å®šåˆ°åº•é‡‡ç”¨å“ªä¸ªçº¿ç¨‹çš„æ“ä½œã€‚ç±»ä¼¼æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨â€œé”â€æ¥å¤„ç†å¹¶å‘ï¼Œä½†æ˜¯è¿™ä¼šå¹³æ·»å¤æ‚åº¦ã€‚æ‰€ä»¥ï¼ŒJavaScriptè¯­è¨€æ²¡æœ‰æ”¯æŒå¤šçº¿ç¨‹æ“ä½œã€‚é‚£åˆè€ƒè™‘è¿™ç§æƒ…å†µï¼Œæ—¢ç„¶JavaScriptæ˜¯å•çº¿ç¨‹ï¼Œåœ¨æŸä¸€æ—¶åˆ»å†…åªèƒ½æ‰§è¡Œç‰¹å®šçš„ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”ä¼šé˜»å¡å…¶å®ƒä»»åŠ¡æ‰§è¡Œã€‚é‚£ä¹ˆå¦‚æœç”¨æˆ·è§¦å‘äº†ä¸€ä¸ªéå¸¸è€—æ—¶çš„I/Oæ“ä½œï¼Œé‚£ä¹ˆæŒ‰é“ç†åç»­çš„æ‰€æœ‰æ“ä½œéƒ½å¾—ç­‰åˆ°I/Oæ“ä½œå®Œæˆåæ–¹å¯è¿›è¡Œã€‚ä½†æ˜¯ï¼Œäº‹å®ä¸Šï¼Œåç»­çš„ä»»åŠ¡ä¸å¿…ç­‰å¾…è¿™ä¸ªè€—æ—¶çš„I/Oæ“ä½œå®Œæˆï¼ŒåŸå› å°±æ˜¯JavaScriptä¸ç”Ÿä¿±æ¥çš„å¼‚æ­¥å’Œå›è°ƒã€‚ è€Œè¿™èƒŒåæ°å¥½å°±æ˜¯æœ¬æ–‡çš„ä¸»é¢˜â€”â€”â€”â€”â€”â€”äº‹ä»¶å¾ªç¯ å®šä¹‰äº‹ä»¶å¾ªç¯åŒ…å«äº†è‡³å°‘ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ å®ä»»åŠ¡å®ä»»åŠ¡åŒ…å«åˆ›å»ºæ–‡æ¡£å¯¹è±¡ã€è§£æHTMLã€æ‰§è¡Œä¸»çº¿JavaScriptä»£ç ã€æ›´æ”¹å½“å‰URLä»¥åŠå„ç§äº‹ä»¶ï¼Œä¾‹å¦‚é¡µé¢åŠ è½½ã€è¾“å…¥ã€ç½‘ç»œäº‹ä»¶å’Œå®šæ—¶å™¨ç­‰ç­‰ã€‚å®ä»»åŠ¡è¿è¡Œå®Œæˆåï¼Œæµè§ˆå™¨ç»§ç»­å…¶ä»–çš„ä»»åŠ¡è°ƒåº¦ï¼Œå¦‚é‡æ–°æ¸²æŸ“é¡µé¢æˆ–è€…åƒåœ¾å›æ”¶ã€‚ å¾®ä»»åŠ¡å¾®ä»»åŠ¡åŒ…æ‹¬promiseã€å›è°ƒå‡½æ•°ã€DOMå‘ç”Ÿå˜åŒ–ç­‰ã€‚å¾®ä»»åŠ¡æ›´æ–°åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå¿…é¡»åœ¨æµè§ˆå™¨ä»»åŠ¡ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼ˆæ¸²æŸ“UIè§†å›¾æˆ–è€…è¿›è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼‰ä¹‹å‰æ‰§è¡Œã€‚ ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ ä¸€æ¬¡å¤„ç†ä¸€ä¸ªä»»åŠ¡ ä¸€ä¸ªä»»åŠ¡å¼€å§‹ç›´åˆ°è¿è¡Œå®Œæˆï¼Œä¸ä¼šè¢«å…¶ä»–ä»»åŠ¡ä¸­æ–­ æ— è®ºæ˜¯å®ä»»åŠ¡é˜Ÿåˆ—è¿˜æ˜¯å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒäºŒè€…åœ¨åŒä¸€æ—¶åˆ»éƒ½åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¿‡äºŒè€…ä¹Ÿæœ‰é‡è¦çš„åŒºåˆ«ï¼šåœ¨ä¸€æ¬¡å¾ªç¯ä¸­ï¼Œæœ€å¤šå¤„ç†ä¸€ä¸ªå®ä»»åŠ¡ï¼Œè€Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„å¾®ä»»åŠ¡éƒ½ä¼šè¢«å¤„ç†ã€‚ åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œäº‹ä»¶å¾ªç¯ä¼šæ£€æŸ¥å½“å‰æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“UIï¼Œå¦‚æœéœ€è¦åˆ™æ¸²æŸ“UIè§†å›¾ã€‚ è¡¥å…… ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—éƒ½æ˜¯ç‹¬ç«‹äºäº‹ä»¶å¾ªç¯çš„ï¼Œè¿™æ„å‘³ç€ä»»åŠ¡é˜Ÿåˆ—çš„æ·»åŠ å‘ç”Ÿåœ¨äº‹ä»¶å¾ªç¯å¤–ã€‚ æ‰€æœ‰å¾®ä»»åŠ¡éƒ½ä¼šåœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“å‰å®Œæˆï¼Œç›®çš„æ˜¯åœ¨æ¸²æŸ“å‰æ›´æ–°åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ æµè§ˆå™¨ä¼šå°è¯•ä»¥æ¯ç§’æ¸²æŸ“60æ¬¡é¡µé¢ï¼Œä»¥è¾¾åˆ°æ¯ç§’60å¸§çš„é€Ÿåº¦ã€‚æ‰€ä»¥ï¼Œä¸€æ¬¡å¾ªç¯æœ€ç†æƒ³çš„æ—¶é—´åº”è¯¥ä¸è¶…è¿‡16msã€‚ æµè§ˆå™¨å®Œæˆé¡µé¢æ¸²æŸ“åï¼Œè¿›å…¥ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯è¿­ä»£åï¼Œå¯èƒ½å‡ºç°3ç§æƒ…å†µ å¦‚æœäº‹ä»¶å¾ªç¯æ‰§è¡Œåˆ°â€œis rendering neededâ€ä¸”æµè§ˆå™¨å¤„äºå¦ä¸€ä¸ª16msç»“æŸä¹‹å‰ï¼ˆå³æµè§ˆå™¨å°šæœªè‡ªåŠ¨è§¦å‘é¡µé¢æ¸²æŸ“æ—¶ï¼‰ï¼Œæµè§ˆå™¨å¯èƒ½ä¸ä¼šé€‰æ‹©åœ¨å½“å‰çš„æ—¶é—´å¾ªç¯ä¸­æ‰§è¡Œæ›´æ–°UIæ“ä½œï¼Œå› ä¸ºæ›´æ–°UIæ˜¯ä¸€ä¸ªå¤æ‚ä¸”è€—æ€§èƒ½çš„æ“ä½œã€‚ å¦‚æœäº‹ä»¶å¾ªç¯æ‰§è¡Œåˆ°â€œis rendering neededâ€ä¸”æµè§ˆå™¨åˆšå¥½ç¦»ä¸Šä¸€æ¬¡æ¸²æŸ“16mså·¦å³æ—¶ï¼ˆå³æµè§ˆå™¨å³å°†è‡ªåŠ¨è§¦å‘é¡µé¢æ¸²æŸ“æ—¶ï¼‰ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šè¿›è¡ŒUIæ›´æ–°ã€‚ æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯è€—æ—¶è¶…è¿‡16msï¼Œæµè§ˆå™¨å°†æ— æ³•ä»¥ç›®æ ‡å¸§ç‡é‡æ–°æ¸²æŸ“é¡µé¢ï¼Œä¸”UIæ— æ³•è¢«æ›´æ–°ã€‚å¦‚æœå»¶è¿Ÿä¸å¤§æ˜¯å¾ˆéš¾å¯Ÿè§‰åˆ°ï¼Œä½†æ˜¯ï¼Œå¦‚æœæœ‰éå¸¸è€—æ—¶çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™ç”¨æˆ·ä¼šè§‰å¾—ç½‘é¡µååˆ†å¡é¡¿ï¼Œç”šè‡³æµè§ˆå™¨ä¼šæç¤ºâ€œæ— å“åº”è„šæœ¬â€ã€‚ å‰æƒ…å›é¡¾ç°åœ¨ï¼Œç”¨äº‹ä»¶å¾ªç¯å’Œç®€å•çš„ä¾‹å­æ¥åˆ†æã€Šé«˜æ€§èƒ½çš„JavaScriptã€‹ä¸­çš„é‚£å¥è¯ã€‚éœ€æ±‚ï¼šç»™åŒ…å«1000ä¸ªæ•°å­—çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å–ç»å¯¹å€¼ï¼ˆå‡è®¾å¯¹ä¸€ä¸ªæ•°å­—è¿›è¡Œéœ€æ±‚æ“ä½œè€—æ—¶1msï¼‰ã€‚ æƒ…å†µ1ï¼ˆä¸ä½¿ç”¨å®šæ—¶å™¨ï¼‰:ç”±äºJavaScriptä¸»çº¿ç¨‹ä»£ç å±äºå®ä»»åŠ¡çš„ä¸€ç§ï¼Œæ‰€ä»¥ä¸€æ¬¡äº‹ä»¶å¾ªç¯éœ€è¦å¤„ç†1000ä¸ªæ•°å­—ï¼Œæ‰€ä»¥1säº‹ä»¶å¾ªç¯æ‰è¿›è¡Œåˆ°UIæ›´æ–°é˜¶æ®µï¼Œä½†æ˜¯ç”±äºè€—æ—¶è¿‡é•¿ï¼ŒUIçŠ¶æ€ä¸ä¼šè¢«æ›´æ–°ï¼Œé¡µé¢å‡ºç°å¡é¡¿ç”šè‡³å µå¡ã€‚ æƒ…å†µ2ï¼ˆä½¿ç”¨å®šæ—¶å™¨ï¼‰ï¼šå°†ä¸€æ¬¡å¤„ç†1000ä¸ªæ•°å­—çš„ä»»åŠ¡åˆ†å‰²ä¸º20ä¸ªæ¯æ¬¡å¤„ç†50ä¸ªæ•°å­—çš„ä»»åŠ¡ã€‚ç”±äºå®šæ—¶å™¨æ˜¯å®ä»»åŠ¡çš„ä¸€ç§ï¼Œæ‰€ä»¥ä¸€æ¬¡äº‹ä»¶å¾ªç¯åªå¤„ç†50ä¸ªæ•°å­—ï¼Œç”±äºæ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œæ‰€ä»¥50msåäº‹ä»¶å¾ªç¯è¿›è¡Œåˆ°UIæ›´æ–°é˜¶æ®µï¼Œç„¶åæ ¹æ®æƒ…å†µè¿›è¡ŒUIæ¸²æŸ“ï¼Œé¡µé¢æœªå‡ºç°å¡é¡¿æˆ–è€…å µå¡ã€‚ å½“ç„¶ï¼Œå¦‚æœåªæ˜¯å•çº¯çš„å¤„ç†æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨Web Workersã€‚ æ€»ç»“ JavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒä¸€æ—¶åˆ»æ˜¯åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚ äº‹ä»¶å¾ªç¯åŒ…å«ä¸€ä¸ªå®ä»»åŠ¡é˜Ÿåˆ—å’Œè‡³å°‘ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚äº‹ä»¶å¾ªç¯ä¸€æ¬¡è¿­ä»£ï¼Œè‡³å¤šæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ä½†æ˜¯ä¼šæ‰§è¡Œå®Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ Webåº”ç”¨è¶Šå¤æ‚ï¼Œç§¯æä¸»åŠ¨ç®¡ç†UIçº¿ç¨‹å°±è¶Šé‡è¦ï¼Œå³ä½¿JavaScriptä»£ç å¾ˆé‡è¦ï¼Œä¹Ÿä¸èƒ½å½±å“ç”¨æˆ·ä½“éªŒã€‚ å‚è€ƒ ã€ŠHigh Performance JavaScriptã€‹ ã€ŠSecrets of the JavaScript Ninjaã€‹ ã€ŠHTML 5.2ã€‹]]></content>
      <categories>
        <category>JavaScriptæ ¸å¿ƒ</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¬¬ä¸€æ¬¡é¢è¯•ç»å†]]></title>
    <url>%2F2018%2F05%2F24%2Fmy-first-interview%2F</url>
    <content type="text"><![CDATA[ç¬¬ä¸€æ¬¡æŠ•ç®€å†é¢è¯•â€¦â€¦ è…¾è®¯MIGäº‹ä¸šç¾¤ äº‘å®‰å…¨éƒ¨ï¼ˆ5.21ï¼‰ç¬¬ä¸€æ¬¡æŠ€æœ¯é¢è¯•ï¼Œæ¯”è¾ƒç´§å¼ ï¼Œé¢è¯•è¿‡ç¨‹20å¤šåˆ†é’Ÿï¼Œæœ€åé—®äº†é¢è¯•å®˜é¹…å‚å‰ç«¯ç”Ÿæ€å’Œéƒ¨é—¨æŠ€æœ¯æ ˆï¼Œä¸‹é¢æ˜¯é¢è¯•å†…å®¹ï¼š ä»‹ç»ä¸€ä¸‹è‡ªå·±ï¼Œæœ€è¿‘åœ¨çœ‹ä»€ä¹ˆä¹¦ï¼Œå¦‚ä½•å­¦ä¹ å‰ç«¯çš„ã€‚ CSSå¦‚ä½•å®ç°å‚ç›´å±…ä¸­ã€æ°´å¹³å±…ä¸­ å¯¹CSS3äº†è§£ç¨‹åº¦ï¼Œç”¨è¿‡å“ªäº›ç‰¹æ€§ HTTPçŠ¶æ€ç ã€Webç¼“å­˜ è·¨åŸŸ ä»‹ç»ä¸€ä¸‹XSSå’ŒCSRFï¼Œå¦‚ä½•é¿å… JavaScriptä¸­çš„å¼‚æ­¥ç¼–ç¨‹ MVVMçš„åŸç† è¯´è¯´ä½ çš„é¡¹ç›®ï¼Œè®²è®²æ”¶è·å¤§çš„åœ°æ–¹ã€‚ 5.17å°±æ¥åˆ°äº†è…¾è®¯é¢è¯•å®˜çš„ç”µè¯ï¼Œé—®äº†æˆ‘ä¸€äº›åŸºæœ¬æƒ…å†µï¼Œçœ‹äº†æˆ‘çš„githubå’Œåšå®¢ï¼Œåé¢ä¹ŸåŠ äº†å¾®ä¿¡ï¼Œç»™äº†æˆ‘ä¸€äº›å¾ˆå¥½çš„å»ºè®®ï¼Œäººéå¸¸niceã€‚ï¼ˆä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡é¢è¯•ï¼‰ ç™¾åº¦å‰ç«¯æŠ€æœ¯éƒ¨ï¼ˆ5.23ï¼‰è¿™æ¬¡é¢è¯•ä¹Ÿæ˜¯ä¸€ä½å°å§å§å®˜ï¼Œä¸€å¼€å§‹æ¯”è¾ƒç´§å¼ ï¼Œåé¢å°±å¥½å¤šäº†ï¼Œé¢è¯•è¿‡ç¨‹50åˆ†é’Ÿã€‚åœ¨ç¬¬ä¸€ä¸ªé—®é¢˜ä¸­ï¼Œé¢è¯•å®˜è®¤ä¸ºæˆ‘çš„æ–¹æ³•ä¸å¯è¡Œï¼ˆfilter + indexOfï¼‰ï¼Œåæ¥è¢«è®¤å¯äº†ã€‚å› ä¸ºæ²¡é—®æˆ‘JavaScriptæˆ‘è§‰å¾—é‡è¦çš„æ¦‚å¿µï¼ˆåŸå‹ã€é—­åŒ…ã€äº‹ä»¶å¾ªç¯ç­‰ï¼‰æ¯”è¾ƒæƒŠè®¶ï¼Œç„¶åé¢è¯•å®˜è®©æˆ‘ä»‹ç»ï¼ˆè™½ç„¶ç­”ä¸Šäº†ï¼Œä½†æ˜¯ä¸‹æ¬¡å†ä¹Ÿä¸ä¸»åŠ¨ç»™è‡ªå·±åŠ é¢˜äº†ğŸ¤¦ï¸ï¼‰ï¼Œæœ€åæˆ‘é—®äº†é—®å¥¹ä»¬éƒ¨é—¨çš„ä¸šåŠ¡å’Œç”Ÿæ€ã€‚ä¸‹é¢æ˜¯é¢è¯•å†…å®¹ï¼š æ•°ç»„å»é‡ å¦‚ä½•å®ç°å›¾ç‰‡å……æ»¡ç›’å­ å¦‚ä½•å®ç°CSSå‚ç›´å±…ä¸­ CSS3çš„æ–°ç‰¹æ€§ Flexå¸ƒå±€ HTTPçŠ¶æ€ç  Webç¼“å­˜ æ€§èƒ½ä¼˜åŒ– äº‹ä»¶æµ ç”¨è¿‡çš„ES6ç‰¹æ€§ è°ˆè°ˆé¡¹ç›®ä¸­æ¯”è¾ƒéš¾çš„åœ°æ–¹ æ€»ç»“è…¾è®¯å’Œç™¾åº¦ä¸¤æ¬¡é¢è¯•éƒ½æ˜¯å¾ˆå¥½çš„ä½“éªŒï¼Œå› ä¸ºæ‰å¤§äºŒï¼Œæ‰€ä»¥æ²¡æœ‰åšé¢è¯•çš„å‡†å¤‡ï¼ŒæŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€æŠ•é€’äº†ç®€å†ï¼Œé¢è¯•è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°è‡ªå·±çš„ä¸€äº›ä¸è¶³ï¼Œå¤§ç¥ä»¬çš„å»ºè®®ä¼šä»”ç»†å¬å–çš„ã€‚æœ€åä¹Ÿæ‹¿åˆ°äº†å®ä¹ offerï¼ŒKeep hungry, keep foolish.]]></content>
      <categories>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…ç½®NginxäºŒçº§åŸŸåå¹¶éƒ¨ç½²hexoåšå®¢]]></title>
    <url>%2F2018%2F05%2F09%2Fhow-to-deploy-a-static-website%2F</url>
    <content type="text"><![CDATA[å› ä¸ºæœ‰ä¸åŒçš„é¡¹ç›®éœ€è¦éƒ¨ç½²ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—ä¸ºæ¯ä¸ªé¡¹ç›®åˆ†é…ä¸€ä¸ªäºŒçº§åŸŸåã€‚ä¸‹é¢æ˜¯æ•´ä¸ªæµç¨‹çš„å¤ç›˜: å®‰è£…nginxå’Œgityum -y install nginx git è·å–èµ„æºæ–‡ä»¶ æ–°å»º /var/www/blog ç›®å½•ï¼šmkidr /var/www/blog åˆ‡æ¢åˆ°blogç›®å½•ä¸‹å¹¶è·å–æ–‡ä»¶ï¼š cd /var/www/blog &amp;&amp; git clone git@github.com:GeniusFunny/GeniusFunny.github.io.git, æ­¤æ—¶blogç›®å½•ä¸‹æœ‰ä¸€ä¸ªGeniusFunny.github.ioæ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯æˆ‘çš„hexoèµ„æºæ–‡ä»¶å¤¹ï¼Œé…ç½®.confæ–‡ä»¶æ—¶ä¼šç”¨åˆ°ã€‚ DNSæ·»åŠ äºŒçº§åŸŸåå‰å¾€ä½ è´­ä¹°çš„æœåŠ¡å™¨å•†ï¼ˆæˆ‘è´­ä¹°çš„æ˜¯è…¾è®¯äº‘çš„æœåŠ¡ï¼‰ä¸ºåœ¨åŸŸåè§£æä¸­æ·»åŠ è§£æè®°å½•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šç‚¹å‡»æ·»åŠ è®°å½•ï¼Œåœ¨ä¸»æœºè®°å½•æ·»åŠ ä½ è¦çš„åŸŸåï¼ˆå¦‚blogï¼‰ï¼Œåœ¨è®°å½•å€¼å¤„å¡«å†™æœåŠ¡å™¨çš„ipåœ°å€ã€‚é‚£ä¹ˆå°±æœ‰ä¸€ä¸ªæ–°çš„åŸŸåï¼Œå¦‚:blog.geniusfunny.xyzã€‚æ·»åŠ å®Œæˆåï¼Œæˆ‘ä»¬å°±å¼€å§‹é…ç½®æˆ‘ä»¬çš„nginxã€‚ nginxé…ç½®äºŒçº§åŸŸåå¹¶éƒ¨ç½² è¿›å…¥nginxé»˜è®¤é…ç½®æ–‡ä»¶vim /etc/nginx/nginx.conf åœ¨httpæ¨¡å—ä¸­æ·»åŠ ä¸€è¡Œä»£ç ï¼ˆå¼•å…¥sites-enabledæ–‡ä»¶å¤¹ï¼‰ï¼šinclude /etc/nginx/sites-enabled/*; åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªsites-enabledæ–‡ä»¶å¤¹ï¼šmkdir sites-enabled è¿›å…¥sites-enabledæ–‡ä»¶å¤¹ï¼Œæ·»åŠ ä»¥äºŒçº§åŸŸåï¼ˆblog.geniusfunny.xyzï¼‰ä¸ºåç§°çš„é…ç½®æ–‡ä»¶: vim blog.geniusfunny.xyz é…ç½®äºŒçº§åŸŸåé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 123456server &#123; listen 80; server_name blog.geniusfunny.xyz; root /var/www/blog/GeniusFunny.github.io; //è¿™æ˜¯æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶ç›®å½• index index.html index.htm index.nginx-debian.html;&#125; é…ç½®å¿«æ·linuxå‘½ä»¤ è¿›å…¥.bashrcæ–‡ä»¶ï¼Œvim ~/.bashrc æ·»åŠ å¿«æ·linuxè‡ªå®šä¹‰å‘½ä»¤ï¼Œalias myBlog=&#39;cd /var/www/blog/GeniusFunny.github.io, ä¿å­˜ ä½¿.bashrcæ–‡ä»¶ç”Ÿæ•ˆï¼Œsource ~/.bashrc ä»¥åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹è¾“å…¥myBlogè¿›å…¥èµ„æºæ–‡ä»¶å¤¹ç›®å½•ï¼Œç„¶ågit pullï¼Œè·å–æœ€æ–°çš„èµ„æº å¸¸ç”¨çš„å…³äºnginxçš„å‘½ä»¤æ£€æŸ¥nginxé…ç½®ï¼šnginx -t nginx.confå¼€å¯nginxæœåŠ¡ï¼šnginxå…³é—­nginxæœåŠ¡ï¼šnginx -s stopå¼ºåˆ¶å…³é—­nginxæœåŠ¡ï¼špkill -9 nginxé‡å¯nginxæœåŠ¡ï¼šnginx -s reload]]></content>
      <categories>
        <category>å®è·µ</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»ä¸€è¡Œurlåˆ°ä¸€ä¸ªé¡µé¢æˆ‘ä»¬ç»å†äº†ä»€ä¹ˆï¼Ÿ(æ›´æ–°ä¸­)]]></title>
    <url>%2F2018%2F05%2F03%2Fweb-life-cycle%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸€è¡Œurlï¼Œæ•´ä¸ªé¡µé¢å‘ˆç°ï¼Œæ•´ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæˆ‘å¤§è‡´æŠŠæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå³ç½‘ç»œè¡Œä¸ºä¸é¡µé¢å‘¨æœŸã€‚æµè§ˆå™¨ç¼“å­˜ â€”&gt; DNS â€”&gt; TCPè¿æ¥ â€“&gt; HTTPè¯·æ±‚/å“åº” â€”&gt; æ„å»ºé¡µé¢ â€”&gt; äº‹ä»¶å¤„ç† ç½‘ç»œè¡Œä¸ºæµè§ˆå™¨ç¼“å­˜æœºåˆ¶æµè§ˆå™¨å’ŒæœåŠ¡å™¨æ˜¯åº”ç­”æ¨¡å¼ï¼Œå³ï¼šæµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚ â€”&gt; æœåŠ¡å™¨è¿”å›å“åº”ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®æ‹¿åˆ°çš„HTTPå“åº”å¤´çš„é…ç½®æ¥å†³å®šæ˜¯å¦ç¼“å­˜æ­¤æ¬¡çš„å“åº”ç»“æœã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š1. æµè§ˆå™¨æ¯æ¬¡å‘èµ·HTTPè¯·æ±‚æ—¶ï¼Œéƒ½ä¼šæ ¹æ®è¯·æ±‚å»æµè§ˆå™¨ç¼“å­˜ä¸­åŒ¹é…å¯¹åº”çš„è¯·æ±‚ç»“æœå’Œç¼“å­˜æ ‡è¯†ã€‚2. æµè§ˆå™¨æ¯æ¬¡æˆåŠŸè·å–åˆ°è¯·æ±‚ç»“æœï¼Œéƒ½ä¼šå°†è¯·æ±‚ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ã€‚æ ¹æ®æµè§ˆå™¨æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨é‡æ–°å‘èµ·HTTPè¯·æ±‚ï¼Œå°†ç¼“å­˜è¿‡ç¨‹åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ†ï¼šå¼ºåˆ¶ç¼“å­˜ä¸åå•†ç¼“å­˜ å¼ºåˆ¶ç¼“å­˜æ¦‚å¿µå¼ºåˆ¶ç¼“å­˜å°±æ˜¯å‘æµè§ˆå™¨ç¼“å­˜æŸ¥æ‰¾å¯¹åº”çš„è¯·æ±‚ç»“æœï¼Œå¹¶æ ¹æ®è¯¥ç»“æœçš„ç¼“å­˜è§„åˆ™æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¯¥ç¼“å­˜ç»“æœçš„è¿‡ç¨‹ã€‚ åœºæ™¯ä¸€ï¼šä¸å­˜åœ¨è¯¥è¯·æ±‚å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œç›´æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚å¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­ä¸å­˜åœ¨å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘èµ·HTTPè¯·æ±‚ã€‚ åœºæ™¯äºŒï¼š å­˜åœ¨è¯¥è¯·æ±‚å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ä½†å·²å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œé‡‡ç”¨åå•†ç¼“å­˜å¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­å­˜åœ¨å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä½†ç¼“å­˜å·²ç»å¤±æ•ˆï¼ˆè¿‡æœŸï¼‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šé‡‡ç”¨åå•†ç¼“å­˜ã€‚ åœºæ™¯ä¸‰ï¼š å­˜åœ¨è¯¥è¯·æ±‚å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ä¸”å°šæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›è¯¥ç»“æœå¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­å­˜åœ¨å¯¹åº”çš„ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ä¸”ç¼“å­˜å°šæœªå¤±æ•ˆï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¼“å­˜ç›´æ¥è¿”å›ç¼“å­˜ç»“æœã€‚ è§„åˆ™å¼ºåˆ¶ç¼“å­˜ä¸HTTPå“åº”å¤´ä¸­çš„å­—æ®µCache-Controlå’ŒExpiresæœ‰å…³ï¼ŒCache-Controlä¼˜å…ˆäºExpiresã€‚Cache-Control: HTTP/1.1ï¼Œä¸»è¦å–å€¼å¦‚ä¸‹ï¼š public: å“åº”å¯ä»¥è¢«ä»»ä½•ç¼“å­˜åŒºï¼ˆå®¢æˆ·ç«¯ã€ä»£ç†æœåŠ¡å™¨ï¼‰ç¼“å­˜ private: å“åº”åªå¯ä»¥è¢«å®¢æˆ·ç«¯ç¼“å­˜ï¼ˆCache-Controlé»˜è®¤å€¼ï¼‰ no-cache: å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œä½†éœ€è¦ä¸æœåŠ¡å™¨è¿›è¡ŒéªŒè¯åæ–¹å¯ä½¿ç”¨ no-store: ç¦æ­¢ç¼“å­˜å¯¹å“åº”è¿›è¡Œå¤åˆ¶ max-age=xxx: ç¼“å­˜å°†åœ¨xxxç§’åè¿‡æœŸExpires: HTTP/1.0, é™„åŠ ä¸€ä¸ªExpiresæ—¥æœŸé¦–éƒ¨åˆ°å“åº”ä¸­å»,è¿™ä¸ªæ—¥æœŸä¸ºç»å¯¹æ—¥æœŸï¼Œä¾‹å¦‚ï¼šExpires: Fri, 05 Jul 2002, 05:00:00 GMT åå•†ç¼“å­˜æ¦‚å¿µåå•†ç¼“å­˜å°±æ˜¯åœ¨å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ã€‚ åœºæ™¯ä¸€ï¼š åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304å¦‚æœæœåŠ¡å™¨æç¤ºèµ„æºå°šæœªå¤±æ•ˆï¼Œåˆ™è¿”å›304ï¼Œæµè§ˆå™¨å¯ç»§ç»­ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ä¸­è¯¥èµ„æºçš„ç¼“å­˜ç»“æœã€‚ åœºæ™¯äºŒï¼š åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å¦‚æœæœåŠ¡å™¨æç¤ºèµ„æºå°šå·²å¤±æ•ˆï¼Œåˆ™è¿”å›200ï¼ŒæœåŠ¡å™¨é‡æ–°è¿”å›æœ€æ–°çš„èµ„æºï¼Œæµè§ˆå™¨å°†ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ã€‚ è§„åˆ™HTTPå…è®¸ç¼“å­˜å‘åŸå§‹æœåŠ¡å™¨å‘é€ä¸€ä¸ªâ€œæ¡ä»¶GETâ€ï¼Œè¯·æ±‚æœåŠ¡å™¨åªæœ‰åœ¨æ–‡æ¡£ä¸ç¼“å­˜ä¸­ç°æœ‰çš„å‰¯æœ¬ä¸åŒæ—¶ï¼Œæ‰å›é€å¯¹è±¡çš„ä¸»ä½“ã€‚â€”- ã€ŠHTTPæƒå¨æŒ‡å—ã€‹åå•†ç¼“å­˜ä¸HTTPå¤´ä¸­çš„å­—æ®µLast-Modified / If-Modified-Sinceï¼ˆè¯·æ±‚å¤´ï¼‰å’ŒEtag / If-None-Match(è¯·æ±‚å¤´)æœ‰å…³ï¼ŒEtag / If-None-Matchä¼˜å…ˆçº§æ¯”Last-Modified / If-Modified-Sinceé«˜ã€‚Last-Modified / If-Modified-Since:If-Modified-Since:Dateå†éªŒè¯è¯·æ±‚é€šå¸¸è¢«ç§°ä¸ºIMSè¯·æ±‚ï¼Œåªæœ‰æŸä¸ªæ—¥æœŸä¹‹åèµ„æºå‘ç”Ÿäº†æ”¹å˜ï¼ŒIMSè¯·æ±‚æ‰ä¼šæŒ‡ç¤ºæœåŠ¡å™¨æ‰§è¡Œè¯·æ±‚ï¼š1.å¦‚æœè‡ªæŒ‡å®šæ—¥æœŸåï¼Œèµ„æºæ›´æ–°äº†ï¼ŒIf-Modified-Sinceæ¡ä»¶å°±ä¸ºçœŸï¼Œé€šå¸¸GETå°±ä¼šæ‰§è¡Œï¼Œæºå¸¦æ–°é¦–éƒ¨ï¼ˆé™¤äº†å…¶ä»–ä¿¡æ¯è¿˜æœ‰ä¸€ä¸ªæ–°çš„è¿‡æœŸæ—¥æœŸï¼‰çš„æ–°èµ„æºå°±ä¼šè¿”å›ç»™ç¼“å­˜ã€‚2.å¦‚æœè‡ªæŒ‡å®šæ—¥æœŸåï¼Œèµ„æºæœªæ›´æ–°ï¼ŒIf-Modified-Sinceæ¡ä»¶å°±ä¸ºå‡ï¼Œå°±ä¼šå‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå°çš„304 Not Modified å“åº”æŠ¥æ–‡ï¼Œä¸ºäº†æé«˜æœ‰æ•ˆæ€§ï¼ŒæŠ¥æ–‡ä¸­ä¸ä¼šåŒ…å«èµ„æºçš„ä¸»ä½“ã€‚ä¾‹ï¼šIf-Modified-Since: Sat, 29 Jun 2002, 14:30:00 GMTEtag / If-None-Match å®ä½“æ ‡ç­¾å†éªŒè¯:æœ‰äº›æƒ…å†µï¼ˆå‘¨æœŸæ€§åœ°é‡å†™ã€èµ„æºä¿®æ”¹æ— å½±å“çš„éƒ¨åˆ†ã€æœ‰äº›æœåŠ¡å™¨æ— æ³•å‡†ç¡®åˆ¤æ–­å…¶é¡µé¢çš„æœ€åä¿®æ”¹æ—¶é—´ç­‰ç­‰ï¼‰ä¸‹ä»…æ ¹æ®ä¿®æ”¹æ—¥æœŸè¿›è¡Œå†éªŒè¯æ˜¯ä¸å¤Ÿçš„ï¼ŒHTTPå…è®¸ç”¨æˆ·å¯¹è¢«ç§°ä¸ºå®ä½“æ ‡ç­¾ï¼ˆEtagï¼‰çš„â€œç‰ˆæœ¬æ ‡è¯†ç¬¦â€è¿›è¡Œæ¯”è¾ƒã€‚å½“å‘å¸ƒè€…å¯¹èµ„æºè¿›è¡Œä¿®æ”¹æ—¶ï¼Œå°±å¯ä»¥ä¿®æ”¹èµ„æºçš„å®ä½“æ ‡ç­¾æ¥è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚1.å¦‚æœå®ä½“æ ‡ç­¾ä»åŒ¹é…ï¼ŒIf-None-Matchå†éªŒè¯æˆåŠŸï¼Œè¿”å›304 Not Modifiedã€‚2.å¦‚æœæœåŠ¡å™¨ä¸Šçš„å®ä½“æ ‡ç­¾å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼ŒæœåŠ¡å™¨ä¼šåœ¨ä¸€ä¸ª200 OK å“åº”ä¸­è¿”å›æ–°çš„å†…å®¹åŠç›¸åº”çš„æ–°Etagã€‚ä¾‹ï¼šIf-None-Match: â€œv2.6â€If-None-Match: â€œv2.4â€, â€œv2.5â€ æµè§ˆå™¨çš„ç¼“å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿæµè§ˆå™¨çš„ç¼“å­˜é€šå¸¸å­˜æ”¾å…¥ç¡¬ç›˜ï¼ˆfrom disk cacheï¼‰æˆ–å†…å­˜ï¼ˆfrom memory cacheï¼‰ã€‚ from disk cacheç¡¬ç›˜ç¼“å­˜(from disk cache)åˆ™æ˜¯ç›´æ¥å°†ç¼“å­˜å†™å…¥ç¡¬ç›˜æ–‡ä»¶ä¸­ï¼Œè¯»å–ç¼“å­˜éœ€è¦å¯¹è¯¥ç¼“å­˜å­˜æ”¾çš„ç¡¬ç›˜æ–‡ä»¶è¿›è¡ŒI/Oæ“ä½œï¼Œç„¶åé‡æ–°è§£æè¯¥ç¼“å­˜å†…å®¹ï¼Œè¯»å–å¤æ‚ï¼Œé€Ÿåº¦æ¯”å†…å­˜ç¼“å­˜æ…¢ã€‚ from memory cacheå†…å­˜ç¼“å­˜(from memory cache)ï¼šå†…å­˜ç¼“å­˜å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œåˆ†åˆ«æ˜¯å¿«é€Ÿè¯»å–å’Œæ—¶æ•ˆæ€§ï¼šå¿«é€Ÿè¯»å–ï¼šå†…å­˜ç¼“å­˜ä¼šå°†ç¼–è¯‘è§£æåçš„æ–‡ä»¶ï¼Œç›´æ¥å­˜å…¥è¯¥è¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œå æ®è¯¥è¿›ç¨‹ä¸€å®šçš„å†…å­˜èµ„æºï¼Œä»¥æ–¹ä¾¿ä¸‹æ¬¡è¿è¡Œä½¿ç”¨æ—¶çš„å¿«é€Ÿè¯»å–ã€‚æ—¶æ•ˆæ€§ï¼šä¸€æ—¦è¯¥è¿›ç¨‹å…³é—­ï¼Œåˆ™è¯¥è¿›ç¨‹çš„å†…å­˜åˆ™ä¼šæ¸…ç©ºã€‚ è§„åˆ™åœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨ä¼šåœ¨jså’Œå›¾ç‰‡ç­‰æ–‡ä»¶è§£ææ‰§è¡Œåç›´æ¥å­˜å…¥å†…å­˜ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆå½“åˆ·æ–°é¡µé¢æ—¶åªéœ€ç›´æ¥ä»å†…å­˜ç¼“å­˜ä¸­è¯»å–(from memory cache)ï¼›è€Œcssæ–‡ä»¶åˆ™ä¼šå­˜å…¥ç¡¬ç›˜æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥æ¯æ¬¡æ¸²æŸ“é¡µé¢éƒ½éœ€è¦ä»ç¡¬ç›˜è¯»å–ç¼“å­˜(from disk cache)ã€‚ ç¼“å­˜æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ å‡å°‘äº†æ•°æ®çš„å†—ä½™ä¼ è¾“ ç¼“è§£äº†ç½‘ç»œçš„å¸¦å®½ç“¶é¢ˆé—®é¢˜ å‡è½»äº†æœåŠ¡å™¨çš„è´Ÿæ‹… å‡è½»äº†è·ç¦»æ—¶å»¶ ç¼“å­˜ä¸cookieç¼“å­˜é‚£äº›ä¸cookieäº‹åŠ¡æœ‰å…³çš„æ–‡æ¡£æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œcookieå’Œç¼“å­˜çš„è§„åˆ™æ²¡æœ‰å¾ˆå¥½åœ°å»ºç«‹èµ·æ¥ã€‚ä¸‹é¢æ˜¯å¤„ç†ç¼“å­˜æ—¶çš„ä¸€äº›æŒ‡å¯¼æ€§è§„åˆ™ï¼š å¦‚æœæ— æ³•ç¼“å­˜æ–‡æ¡£ï¼Œè¦å°†å…¶è¡¨ç¤ºå‡ºæ¥ã€‚å¦‚å¯¹ä¸å¯ç¼“å­˜çš„æ–‡æ¡£è®¾ç½®ï¼šCache-Control:no-cache=â€Set-Cookieâ€ï¼Œå¯¹å¯ç¼“å­˜çš„æ–‡æ¡£è®¾ç½®ï¼š Cache-Control:publicã€‚ ç¼“å­˜Set-Cookieé¦–éƒ¨è¦å°å¿ƒã€‚å¦‚æœå‘å¤šä¸ªç”¨æˆ·å‘é€äº†ç›¸åŒçš„Set-Cookieé¦–éƒ¨å¯èƒ½ä¼šç ´åç”¨æˆ·çš„å®šä½ï¼›æœ‰äº›ç¼“å­˜ä¼šåœ¨å°†å“åº”ç¼“å­˜èµ·æ¥ä¹‹å‰åˆ é™¤Set-Cookieé¦–éƒ¨ï¼Œé‚£ä¹ˆè¯·æ±‚ç¼“å­˜çš„æ—¶å€™å®¢æˆ·ç«¯å°±æ‹¿ä¸åˆ°cookieäº†ã€‚å¼ºåˆ¶ç¼“å­˜ä¸åŸå§‹æœåŠ¡å™¨é‡æ–°éªŒè¯æ¯æ¡è¯·æ±‚ï¼Œå¹¶å°†Set-Cookieé¦–éƒ¨åˆå¹¶åˆ°å®¢æˆ·ç«¯çš„å“åº”ä¸­å»ï¼Œå°±å¯ä»¥æ”¹å–„è¿™ç§æƒ…å†µï¼ŒåŸå§‹æœåŠ¡å™¨å¯å‘ç¼“å­˜å‰¯æœ¬æ·»åŠ è¿™ä¸ªé¦–éƒ¨æ¥è¿›è¡Œè¿™ç§éªŒè¯ï¼šCache-Control: must-revalidate, max-age=0 å°å¿ƒå¤„ç†å¸¦æœ‰cookieé¦–éƒ¨çš„è¯·æ±‚å¸¦æœ‰cookieçš„è¯·æ±‚ç»“æœåˆ°è¾¾æ—¶ï¼Œå°±æ˜¯æç¤ºæˆ‘ä»¬ï¼Œè¿™ä¸ªè¯·æ±‚ç»“æœå¯èƒ½æ˜¯ç§æœ‰å†…å®¹ï¼Œå¿…é¡»å°†ç§æœ‰å†…å®¹æ ‡è¯†ä¸ºä¸å¯ç¼“å­˜ã€‚ DNSæ¦‚è§ˆDNSï¼ˆDomain Name Systemï¼ŒåŸŸåè§£æç³»ç»Ÿï¼‰çš„ä½œç”¨æ˜¯å°†ä¸»æœºåï¼ˆhostnameï¼‰è§£æä¸ºå¯¹åº”çš„IPåœ°å€ã€‚DNSæ˜¯ä¸€ä¸ªç”±åˆ†å±‚çš„DNSæœåŠ¡å™¨å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä¸€ä¸ªä½¿å¾—ä¸»æœºèƒ½å¤ŸæŸ¥è¯¢åˆ†å¸ƒå¼æ•°æ®åº“çš„åº”ç”¨å±‚åè®®ã€‚DNSåè®®è¿è¡Œåœ¨UDPä¸Šï¼Œä½¿ç”¨53å·ç«¯å£ã€‚ å¸¸è§„æµç¨‹ æµè§ˆå™¨ä»URLä¸­æŠ½å‡ºä¸»æœºåï¼Œå°†å…¶å‘é€ç»™è¿è¡Œä¸­çš„DNSåº”ç”¨å®¢æˆ·ç«¯ã€‚ DNSå®¢æˆ·ç«¯å‘DNSæœåŠ¡å™¨å‘é€ä¸€ä¸ªå¸¦æœ‰ä¸»æœºåçš„è¯·æ±‚ã€‚ DNSå®¢æˆ·ç«¯ä¼šæ”¶åˆ°æ¥è‡ªDNSæœåŠ¡å™¨çš„å›ç­”æŠ¥æ–‡ï¼Œå…¶ä¸­åŒ…å«äº†ä¸ä¸»æœºåå¯¹åº”çš„IPåœ°å€ã€‚ æµè§ˆå™¨è·å–åˆ°IPåœ°å€ï¼Œå‘ä½äºè¯¥åœ°å€çš„æœåŠ¡å™¨è¿›ç¨‹çš„æŸä¸ªç«¯å£ï¼ˆHTTPä¸º80ç«¯å£ï¼ŒHTTPSä¸º443ç«¯å£ï¼‰å‘èµ·ä¸€ä¸ªTCPè¿æ¥ã€‚ åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“DNSæœåŠ¡å™¨å±‚æ¬¡ç»“æ„ä¸­çš„DNSæœåŠ¡å™¨å¤§è‡´æœ‰ä¸‰ç§ï¼Œæ ¹DNSæœåŠ¡å™¨ã€é¡¶çº§åŸŸDNSæœåŠ¡å™¨ã€æƒå¨DNSæœåŠ¡å™¨ã€‚æ ¹DNSæœåŠ¡å™¨â€”&gt;é¡¶çº§åŸŸDNSæœåŠ¡å™¨â€”&gt;æƒå¨DNSæœåŠ¡å™¨ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ã€‚å¦‚æœè¦æŸ¥è¯¢www.baidu.comå¯¹åº”çš„IPåœ°å€ï¼ŒæŸ¥è¯¢è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼ˆåˆ†çº§æŸ¥è¯¢ï¼‰ï¼š é¦–å…ˆè·Ÿæ ¹æœåŠ¡å™¨ä¹‹ä¸€è”ç³»ï¼Œè·å¾—é¡¶çº§åŸŸåcomçš„TLDæœåŠ¡å™¨çš„IPåœ°å€ã€‚ ç„¶åTLDæœåŠ¡å™¨ä¹‹ä¸€è”ç³»ï¼Œè·å¾—baidu.comæƒå¨æœåŠ¡å™¨çš„IPåœ°å€ã€‚ æœ€åä¸baidu.comæƒå¨æœåŠ¡å™¨ä¹‹ä¸€è”ç³»ï¼Œè·å¾—ä¸»æœºåwww.baidu.comå¯¹åº”çš„IPåœ°å€ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç±»DNSæœåŠ¡å™¨å¾ˆé‡è¦ï¼Œå³ï¼šæœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆå°½ç®¡å®ƒä¸åœ¨DNSæœåŠ¡å™¨å±‚æ¬¡ç»“æ„ä¸­ï¼‰ã€‚æ¯ä¸ªISPéƒ½æœ‰ä¸€ä¸ªæœ¬åœ°DNSæœåŠ¡å™¨ï¼Œå½“ä¸»æœºä¸è¯¥ISPè¿æ¥æ—¶ï¼ŒISPä¼šè¿”å›ä¸€ä¸ªIPåœ°å€ï¼Œè¯¥åœ°å€å…·æœ‰ä¸€å°æˆ–å¤šå°çš„æœ¬åœ°DNSæœåŠ¡å™¨çš„IPåœ°å€ã€‚å½“ä¸»æœºå‘èµ·DNSè¯·æ±‚æ—¶ï¼Œè¯·æ±‚è¢«å‘é€åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œå®ƒèµ·ç€ä»£ç†å’Œå°†è¯·æ±‚è½¬å‘åˆ°DNSæœåŠ¡å™¨å±‚æ¬¡ç»“æ„ä¸­ï¼ˆç±»ä¼¼HTTPçš„ä»£ç†æœåŠ¡å™¨ï¼‰ã€‚ä»è¯·æ±‚ä¸»æœºåˆ°æœ¬åœ°DNSæœåŠ¡å™¨çš„æŸ¥è¯¢æ˜¯é€’å½’æŸ¥è¯¢ï¼ˆå› ä¸ºæŸ¥è¯¢è¯·æ±‚æ˜¯ä»¥è‡ªå·±çš„åä¹‰ï¼ŒæŸ¥è¯¢ç»“æœç›´æ¥è¿”å›ç»™è¯·æ±‚ä¸»æœºï¼‰ï¼Œå…¶ä½™ä¸ºè¿­ä»£æŸ¥è¯¢ï¼ˆæŸ¥è¯¢è¯·æ±‚æ˜¯ä»¥æœ¬åœ°DNSæœåŠ¡å™¨ä¸ºåä¹‰ï¼Œè¿”å›çš„ç»“æœä¹Ÿæ˜¯ç»™æœ¬åœ°DNSæœåŠ¡å™¨ï¼‰ DNSç¼“å­˜ä¸ºäº†æ”¹å–„å®éªŒæ€§èƒ½å¹¶å‡å°‘åœ¨å› ç‰¹ç½‘ä¸Šåˆ°å¤„ä¼ æ’­çš„DNSæŠ¥æ–‡æ•°é‡ï¼ŒDNSå¹¿æ³›ä½¿ç”¨äº†ç¼“å­˜æŠ€æœ¯ã€‚åœ¨ä¸€ä¸ªè¯·æ±‚é“¾ä¸­ï¼Œå½“æŸä¸ªDNSæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªDNSå›ç­”æ—¶ï¼Œå®ƒèƒ½å°†è¯¥ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°å­˜å‚¨å™¨ä¸­ï¼ˆä¾‹å¦‚ï¼Œå…±ç”¨ä¸€ä¸ªISPçš„å°æ˜ã€å°çº¢ï¼Œå¦‚æœå°æ˜æŸ¥è¯¢äº†www.baidu.comçš„IPåœ°å€ï¼Œé‚£ä¹ˆè¿™ä¸ªIPåœ°å€å°±å­˜åœ¨äº†æœ¬åœ°DNSæœåŠ¡å™¨ä¸­ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆå‰ï¼Œå°çº¢å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°DNSæœåŠ¡å™¨ä¸­è·å–åˆ°www.baidu.comçš„IPåœ°å€ï¼‰ã€‚æœ¬åœ°æœåŠ¡å™¨èƒ½å¤Ÿç¼“å­˜é¡¶çº§åŸŸæœåŠ¡å™¨çš„IPåœ°å€ï¼Œå› è€Œå…è®¸æœ¬åœ°DNSç»•è¿‡æŸ¥è¯¢é“¾ä¸­çš„æ ¹DNSæœåŠ¡å™¨ã€‚ TCPè¿æ¥ä¸€ä¸ªTCPè¿æ¥æ˜¯ç”±ä¸€å¯¹ç«¯ç‚¹æˆ–å¥—æ¥å­—æ„æˆï¼Œå…¶ä¸­é€šä¿¡çš„æ¯ä¸€ç«¯éƒ½ç”±ä¸€å¯¹ï¼ˆIPåœ°å€ï¼Œç«¯å£å·ï¼‰æ‰€å”¯ä¸€æ ‡è¯†ã€‚ä¸€ä¸ªTCPè¿æ¥é€šå¸¸åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šå¯åŠ¨ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ã€æ•°æ®ä¼ è¾“ã€é€€å‡ºï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚ ä¸‰æ¬¡æ¡æ‰‹æ¦‚è§ˆå¦‚å›¾æ‰€ç¤ºï¼Œå®¢æˆ·ç«¯ä¸­çš„TCPä¼šç”¨ä¸€ä¸‹æ–¹å¼ä¸æœåŠ¡å™¨ä¸­TCPå»ºç«‹ä¸€æ¡TCPè¿æ¥ï¼š ç¬¬ä¸€æ­¥ï¼Œå®¢æˆ·ç«¯çš„TCPé¦–å…ˆå‘æœåŠ¡å™¨çš„TCPå‘é€ä¸€ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µï¼Œè¯¥æŠ¥æ–‡æ®µä¸åŒ…å«åº”ç”¨å±‚çš„æ•°æ®ï¼Œä½†æ˜¯åœ¨æŠ¥æ–‡æ®µçš„é¦–éƒ¨ä¸­çš„ä¸€ä¸ªæ ‡å¿—ä½ï¼ˆå³SYNæ¯”ç‰¹ï¼‰è¢«ç½®ä¸º1ï¼Œå› æ­¤è¿™ä¸ªç‰¹æ®ŠæŠ¥æ–‡æ®µè¢«ç§°ä¸ºSYNæŠ¥æ–‡æ®µã€‚å®¢æˆ·ç«¯ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹åºå·ï¼ˆJï¼‰å¹¶å°†æ­¤åºå·æ”¾ç½®äºè¯¥èµ·å§‹çš„TCP SYNæŠ¥æ–‡æ®µçš„åºå·å­—æ®µé‡Œï¼Œæ•´ä¸ªæŠ¥æ–‡å­—æ®µä¼šå°è£…åœ¨ä¸€ä¸ªIPæ•°æ®æŠ¥ä¸­å¹¶å‘ç»™æœåŠ¡å™¨ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥SYN-SENTçŠ¶æ€ã€‚ ç¬¬äºŒæ­¥ï¼Œä¸€æ—¦åŒ…å«TCP SYNæŠ¥æ–‡æ®µçš„IPæ•°æ®æŠ¥åˆ°è¾¾äº†æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±ä¼šä»æ•°æ®æŠ¥ä¸­æå–å‡ºTCP SYNæŠ¥æ–‡æ®µï¼Œä¸ºè¯¥TCPè¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘é€å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µï¼ˆACK(J + 1)ï¼‰ï¼Œè¯¥æŠ¥æ–‡æ®µä¹Ÿä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ã€‚ä¸æ­¤åŒæ—¶æœåŠ¡å™¨ä¹Ÿéšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹åºå·ï¼ˆKï¼‰å¹¶å°†æ­¤åºå·æ”¾ç½®äºTCPæŠ¥æ–‡æ®µé¦–éƒ¨çš„åºå·å­—æ®µä¸­ï¼Œå³ï¼ˆSYN(K)ï¼‰,éšç¡®è®¤å­—æ®µACKä¸€å¹¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚æ­¤æŠ¥æ–‡å­—æ®µé€šå¸¸è¢«ç§°ä¸ºSYNACKæŠ¥æ–‡æ®µï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN-RECEIVEDçŠ¶æ€ã€‚ ç¬¬ä¸‰æ­¥ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°SYNACKæŠ¥æ–‡æ®µï¼Œä¸ºè¯¥è¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€å¦å¤–ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µæ˜¯å¯¹æœåŠ¡å™¨çš„å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼ˆACK(K + 1)ï¼‰ï¼Œä¸å‰ä¸¤æ¬¡ä¸åŒï¼Œè¿™æ¬¡æŠ¥æ–‡æ®µä¸­å¯æºå¸¦åº”ç”¨å±‚æ•°æ®ï¼Œç”±äºè¿æ¥å·²ç»å»ºç«‹ï¼ŒSYNæ¯”ç‰¹è¢«ç½®ä¸º0ã€‚æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡æ®µåï¼Œä¹Ÿè¿›å…¥ESTABISHEDçŠ¶æ€ã€‚å®Œæˆè¿™ä¸‰ä¸ªæ­¥éª¤åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ¯ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­éƒ½å¯ä»¥æºå¸¦åº”ç”¨å±‚çš„æ•°æ®ï¼Œä¸”SYNæ¯”ç‰¹éƒ½å°†è¢«ç½®ä¸º0ã€‚å»ºç«‹TCPè¿æ¥çš„ä¸‰ä¸ªæ­¥éª¤ä¹Ÿè¢«ç§°ä¸ºTCPä¸‰æ¬¡æ¡æ‰‹ã€‚ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„ä¸ä»…åœ¨äºè®©é€šä¿¡åŒæ–¹äº†è§£ä¸€ä¸ªè¿æ¥æ­£åœ¨å»ºç«‹ï¼Œ è¿˜åœ¨äºåˆ©ç”¨æ•°æ®åŒ…çš„é€‰é¡¹æ¥æ‰¿è½½ç‰¹æ®Šçš„ä¿¡æ¯ï¼Œäº¤æ¢åˆå§‹åºåˆ—å·ã€‚â€”â€”-ã€ŠTCP/IP è¯¦è§£ å·ä¸€ï¼šåè®®ã€‹ ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Ÿä¸‰æ¬¡æ¡æ‰‹ï¼šAâ€”-&gt;B: [A: Iâ€™m A.]Bâ€”-&gt;A: [B: Hello A, Iâ€™m B.]Aâ€”-&gt;B: [A: Hello B, nice to meet you.]ç„¶åæ„‰å¿«çš„py äºŒæ¬¡æ¡æ‰‹ï¼šAâ€”-&gt;B: [Iâ€™m A.]Bâ€”-&gt;A: [Hello A, Iâ€™m B.]å¦‚æœAæ”¶åˆ°äº†â€œHello A,Iâ€™m Bâ€ï¼Œæ„‰å¿«çš„pyå¦‚æœAæ²¡æœ‰æ”¶åˆ°â€œHello A,Iâ€™m Bâ€ï¼Œé‚£ä¹ˆwhile(true){ Aâ€”-&gt;B: [Iâ€™m A.] }, ç–¯ç‹‚æ¡æ‰‹ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯ç¡®è®¤Aâ€”&gt;B, Bâ€”&gt;Aè¿™ä¸¤ä¸ªä¿¡é“éƒ½æ˜¯å¯é çš„ï¼›å¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹å°±æ— æ³•ç¡®è®¤Bâ€”&gt;Açš„ä¿¡é“æ˜¯å¦å¯é ã€‚å¦‚æœåªéœ€è¦Aâ€”&gt;Bä¿¡é“å¯é ï¼Œé‚£å°±ç±»ä¼¼äºUDPçš„éœ€æ±‚äº†ã€‚ å››æ¬¡æŒ¥æ‰‹æ¦‚è§ˆè¿æ¥çš„ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘èµ·å…³é—­è¿æ¥ï¼Œåœ¨ä¼ ç»Ÿæƒ…å†µä¸‹å¾€å¾€ç”±å®¢æˆ·ç«¯æ¥å‘èµ·å…³é—­è¿æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·ç«¯å‘é€FINåŒ…ï¼ˆåŒ…å«äº†å®¢æˆ·ç«¯çš„åºåˆ—å·M)ï¼Œæ­¤å¤–FINåŒ…è¿˜åŒ…å«äº†ä¸€ä¸ªACKæ®µç”¨äºç¡®è®¤å¯¹æ–¹æœ€åä¸€æ¬¡å‘é€çš„æ•°æ®ã€‚ ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„FINåŒ…åï¼Œå°†Må€¼+1ä½œä¸ºå“åº”çš„ACKå€¼ï¼Œè¡¨æ˜å®ƒå·²ç»æˆåŠŸæ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯å‘é€çš„FINã€‚æ­¤æ—¶ï¼Œå¤„äºä¸Šå±‚çš„åº”ç”¨ç¨‹åºä¼šè¢«å‘ŠçŸ¥è¿æ¥çš„å¦ä¸€æ–¹å‘èµ·äº†å…³é—­è¿æ¥çš„è¯·æ±‚ï¼Œè¿™å°†å¯¼è‡´åº”ç”¨ç¨‹åºå‘åŠ¨è‡ªå·±çš„å…³é—­æ“ä½œã€‚æœåŠ¡å™¨ä»è¢«åŠ¨å…³é—­è€…å˜ä¸ºä¸»åŠ¨å…³é—­è€…ï¼Œå‘å®¢æˆ·ç«¯å‘é€FIN(åŒ…å«äº†æœåŠ¡å™¨çš„åºåˆ—å·N)ã€‚ ç¬¬ä¸‰æ­¥ï¼šä¸ºäº†å®Œæˆè¿æ¥çš„å…³é—­ï¼Œå®¢æˆ·ç«¯å‘å¾€æœåŠ¡å™¨æœ€åçš„æŠ¥æ–‡æ®µä¸­åŒ…å«äº†ä¸€ä¸ªç¡®è®¤æœåŠ¡å™¨å‘é€çš„FINçš„ACKå­—æ®µã€‚ ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿå››æ¬¡æŒ¥æ‰‹ï¼šA â€”&gt; B, [A: â€˜æˆ‘æƒ³å…³é—­è¿æ¥â€™]B â€”&gt; A, [B: â€˜å¥½çš„ï¼Œæˆ‘çŸ¥é“äº†ï¼Œæˆ‘ä¸è¦æ”¶åˆ°ä½ çš„ä¸œè¥¿äº†â€™]B â€”&gt; A, [B: â€˜æˆ‘æƒ³å…³é—­è¿æ¥â€™]A â€”&gt; B, [A: â€˜å¥½çš„ï¼Œæˆ‘çŸ¥é“äº†ï¼Œæˆ‘ä¹Ÿä¸è¦æ”¶åˆ°ä½ çš„ä¸œè¥¿äº†â€™]ä¸»åŠ¨æ–¹å‘é€å…³é—­è¯·æ±‚ï¼Œè¢«åŠ¨æ–¹æ¥å—å¹¶ç¡®è®¤è¯·æ±‚åï¼Œè¢«åŠ¨æ–¹å°±æ— æ³•æ”¶åˆ°ä¸»åŠ¨æ–¹å‘é€çš„æ•°æ®äº†ã€‚åœ¨å‰ä¸¤æ¬¡æŒ¥æ‰‹åï¼ŒæœåŠ¡å™¨å°±æ— æ³•æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®äº†ï¼ˆæœåŠ¡å™¨é‡Šæ”¾äº†å…³äºå®¢æˆ·ç«¯çš„èµ„æºï¼‰ï¼Œä½†æ˜¯æœåŠ¡å™¨å¯ä»¥ç»™å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œæ‰€ä»¥æœ‰äº†ç¬¬ä¸‰æ¬¡ã€ç¬¬å››æ¬¡æŒ¥æ‰‹ã€‚ é¡µé¢å‘¨æœŸæ¦‚è§ˆé¡µé¢æ„å»ºDOM TreeStyle RulesRendering Treeäº‹ä»¶å¤„ç†å‚è€ƒæ–‡çŒ®ï¼š å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ å›¾è§£TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹ ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ ã€ŠJavaScriptå¿è€…ç§˜ç±ã€‹ ã€Šè®¡ç®—æœºç½‘ç»œï¼ˆè‡ªé¡¶å‘ä¸‹æ–¹æ³•ï¼‰ã€‹]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Webç¼“å­˜</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>æµè§ˆå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœæ­¢ä¹¦å†™å›è°ƒå‡½æ•°å¹¶çˆ±ä¸ŠES8]]></title>
    <url>%2F2018%2F04%2F14%2Fasync-await%2F</url>
    <content type="text"><![CDATA[åœæ­¢ä¹¦å†™å›è°ƒå‡½æ•°å¹¶çˆ±ä¸ŠES8ä»¥å‰ï¼ŒJavaScripté¡¹ç›®ä¼šé€æ¸â€˜å¤±å»æ§åˆ¶â€™ï¼Œå…¶ä¸­ä¸»è¦ä¸€ä¸ªåŸå› å°±æ˜¯é‡‡ç”¨ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œä¸€æ—¦ä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å°±éš¾å…ä¹¦å†™ä¸€äº›å†—é•¿ã€å¤æ‚ã€åµŒå¥—çš„ä»£ç å—ï¼ˆå›è°ƒåœ°ç‹±ï¼‰ï¼Œè¿™ä¼šä¸¥é‡é™ä½ä»£ç çš„å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚ç°åœ¨ï¼ŒJavaScriptæä¾›äº†ä¸€ç§æ–°çš„è¯­æ³•ç³–æ¥å–ä»£å›è°ƒå‡½æ•°ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿç¼–å†™ç®€æ˜ã€å¯è¯»æ€§é«˜çš„å¼‚æ­¥ä»£ç ã€‚ èƒŒæ™¯AJAXå…ˆæ¥å›é¡¾ä¸€ä¸‹å†å²ã€‚åœ¨20ä¸–çºª90å¹´ä»£åæœŸï¼ŒAjaxæ˜¯å¼‚æ­¥JavaScriptçš„ç¬¬ä¸€ä¸ªé‡å¤§çªç ´ã€‚è¿™ä¸€æŠ€æœ¯å…è®¸ç½‘ç«™åœ¨åŠ è½½HTMLåè·å–å¹¶æ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„æƒ³æ³•ã€‚åœ¨è¿™ä¹‹å‰ï¼Œå¤§å¤šæ•°ç½‘ç«™ä¼šå†æ¬¡ä¸‹è½½æ•´ä¸ªé¡µé¢æ¥æ˜¾ç¤ºæ›´æ–°çš„å†…å®¹ã€‚è¿™ä¸€æŠ€æœ¯(åœ¨jQueryä¸­ä»¥ajaxçš„åç§°æµè¡Œ)ä¸»å¯¼äº†2000-2010çš„webå¼€å‘å¹¶ä¸”Ajaxæ˜¯ç›®å‰ç½‘ç«™ç”¨æ¥è·å–æ•°æ®çš„ä¸»è¦æŠ€æœ¯ï¼Œä½†æ˜¯XMLåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–ä»£äº†JSONã€‚ NodeJSå½“NodeJSåœ¨2009å¹´é¦–æ¬¡å‘å¸ƒæ—¶ï¼ŒæœåŠ¡å™¨ç«¯ç¯å¢ƒçš„ä¸»è¦ç„¦ç‚¹æ˜¯å…è®¸ç¨‹åºä¼˜é›…åœ°å¤„ç†å¹¶å‘æ€§ã€‚å¤§å¤šæ•°æœåŠ¡å™¨ç«¯è¯­è¨€é€šè¿‡é˜»å¡ä»£ç æ¥å¤„ç†I/Oæ“ä½œï¼Œç›´åˆ°æ“ä½œå®Œæˆä¸ºæ­¢ã€‚ç›¸åï¼ŒNodeJSä½¿ç”¨çš„æ˜¯äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œè¿™æ ·å¼€å‘äººå‘˜å¯ä»¥åœ¨éé˜»å¡å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œè°ƒç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†é€»è¾‘ï¼ˆç±»ä¼¼äºAjaxçš„å·¥ä½œæ–¹å¼ï¼‰ã€‚ Promiseså‡ å¹´åï¼ŒNodeJSå’Œæµè§ˆå™¨ç¯å¢ƒä¸­å‡ºç°äº†ä¸€ç§æ–°çš„æ ‡å‡†ï¼Œç§°ä¸ºâ€Promiseâ€ï¼ŒPromiseæä¾›äº†ä¸€ç§å¼ºå¤§çš„ã€æ ‡å‡†åŒ–çš„æ–¹å¼æ¥ç»„æˆå¼‚æ­¥æ“ä½œã€‚Promiseä»ç„¶ä½¿ç”¨åŸºäºå›è°ƒçš„æ ¼å¼ï¼Œä½†ä¸ºé“¾å¼å’Œç»„åˆå¼‚æ­¥æ“ä½œæä¾›äº†ä¸€è‡´çš„è¯­æ³•ã€‚åœ¨2015å¹´ï¼Œç”±æµè¡Œçš„å¼€æºåº“æ‰€å€¡å¯¼çš„Promiseæœ€ç»ˆè¢«æ·»åŠ ä¸ºJavaScriptçš„åŸç”Ÿç‰¹æ€§ã€‚Promiseæ˜¯ä¸€ä¸ªä¸é”™çš„æ”¹è¿›ï¼Œä½†å®ƒä»¬ä»ç„¶å¸¸å¸¸æ˜¯ä¸€äº›å†—é•¿è€Œéš¾ä»¥é˜…è¯»çš„ä»£ç å—çš„åŸå› ã€‚è€Œç°åœ¨æœ‰äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚Async/Awaitæ˜¯ä¸€ç§æ–°çš„è¯­æ³•(ä».netå’ŒC#ä¸­å€Ÿç”¨)ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™Promiseï¼Œä½†å®ƒä»¬çœ‹èµ·æ¥åƒæ˜¯åŒæ­¥ä»£ç ï¼Œæ²¡æœ‰å›è°ƒï¼Œå¯ä»¥ç”¨æ¥ç®€åŒ–å‡ ä¹ä»»ä½•ç°æœ‰çš„JSåº”ç”¨ç¨‹åºã€‚Async/Awaitæ˜¯JavaScriptè¯­è¨€çš„æ–°å¢çš„ç‰¹æ€§ï¼Œåœ¨ES7ä¸­è¢«æ­£å¼æ·»åŠ ä¸ºJavaScriptçš„åŸç”Ÿç‰¹æ€§ã€‚ ç¤ºä¾‹æˆ‘ä»¬å°†é€šè¿‡ä¸€äº›ä»£ç ç¤ºä¾‹æ¥å±•ç¤ºAsync/Awaitçš„é­…åŠ› *æ³¨ï¼šè¿è¡Œä¸‹é¢çš„ç¤ºä¾‹ä¸éœ€è¦ä»»ä½•åº“ã€‚Async/Awaitå·²ç»è¢«æœ€æ–°ç‰ˆæœ¬çš„Chromeã€FireFoxã€Safariã€Edgeå®Œå…¨æ”¯æŒï¼Œä½ å¯ä»¥åœ¨ä½ çš„æµè§ˆå™¨æ§åˆ¶å°é‡Œè¿è¡Œä¾‹å­ã€‚Async/Awaitéœ€è¦è¿è¡Œåœ¨NodeJS 7.6ç‰ˆæœ¬åŠä»¥ä¸Šï¼ŒåŒæ—¶ä¹Ÿè¢«Babelã€TypeScriptè½¬è¯‘å™¨æ”¯æŒã€‚æ‰€ä»¥Async/Awaitå¯ä»¥è¢«ç”¨äºå®é™…å¼€å‘ä¹‹ä¸­ã€‚* å‡†å¤‡æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿçš„APIç±»ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ç”µè„‘ä¸Šè¿è¡Œã€‚è¿™ä¸ªç±»é€šè¿‡è¿”å›promiseæ¥æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œpromiseè¢«è°ƒç”¨åï¼Œ200msåä¼šå¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚12345678910111213141516171819202122232425262728293031class Api &#123; constructor () &#123; this.user = &#123; id: 1, name: 'test' &#125; this.friends = [ this.user, this.user, this.user ] this.photo = 'not a real photo' &#125; getUser () &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; resolve(this.user), 200) &#125;) &#125; getFriends (userId) &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; resolve(this.friends.slice()), 200) &#125;) &#125; getPhoto (userId) &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; resolve(this.photo), 200) &#125;) &#125; throwError () &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; reject(new Error('Intentional Error')), 200) &#125;) &#125;&#125; æ¯ä¸ªç¤ºä¾‹ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹ä¸‰ä¸ªæ“ä½œï¼š è·å–ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼Œè·å–è¯¥ç”¨æˆ·çš„æœ‹å‹ï¼Œ è·å–è¯¥ç”¨æˆ·çš„ç…§ç‰‡ã€‚åœ¨æœ€åï¼Œæˆ‘ä»¬ä¼šåœ¨æ§åˆ¶å°ä¸­æ‰“å°è¿™äº›ç»“æœã€‚ æ–¹æ³•ä¸€ â€” Nested Promise Callback Functionsä½¿ç”¨åµŒå¥—çš„promiseå›è°ƒå‡½æ•°12345678910111213function callbackHell () &#123; const api = new Api() let user, friends api.getUser().then(function (returnedUser) &#123; user = returnedUser api.getFriends(user.id).then(function (returnedFriends) &#123; friends = returnedFriends api.getPhoto(user.id).then(function (photo) &#123; console.log('callbackHell', &#123; user, friends, photo &#125;) &#125;) &#125;) &#125;)&#125; å¯¹äºä»»ä½•ä¸€ä¸ªä»äº‹è¿‡JavaScripté¡¹ç›®å¼€å‘çš„äººæ¥è¯´ï¼Œè¿™ä¸ªä»£ç å—éå¸¸ç†Ÿæ‚‰ã€‚éå¸¸ç®€å•çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½†æ˜¯ä»£ç å´æ˜¯å†—é•¿ã€æ·±åµŒå¥—ï¼Œå¹¶ä¸”ä»¥è¿™ä¸ªç»“å°¾â€¦..1234 &#125;) &#125;) &#125;)&#125; åœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¯ä¸ªå›è°ƒå‡½æ•°å¯èƒ½æ›´å¤æ‚ï¼Œä»£ç å—ä¼šä»¥ä¸€å †å……æ»¡å±‚æ¬¡æ„Ÿçš„})ä¸ºç»“å°¾ã€‚â€œå›è°ƒå‡½æ•°é‡Œé¢åµŒå¥—ç€å›è°ƒå‡½æ•°åµŒå¥—ç€å›è°ƒå‡½æ•°â€ï¼Œè¿™å°±æ˜¯è¢«ä¼ è¯´ä¸­çš„â€œå›è°ƒåœ°ç‹±â€ï¼ˆâ€œå›è°ƒåœ°ç‹±â€çš„è¯ç”Ÿä¸åªæ˜¯å› ä¸ºä»£ç å—çš„æ··ä¹±ï¼Œä¹Ÿæºäºä¿¡ä»»é—®é¢˜ã€‚ï¼‰ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸ºäº†ç®€åŒ–ï¼Œè¿˜æ²¡æœ‰åšé”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¦‚æœåŠ ä¸Šäº†rejectâ€¦â€¦ç»†æ€ææ æ–¹æ³•äºŒ â€” Promise Chainè®©æˆ‘ä»¬ä¼˜é›…èµ·æ¥12345678910111213141516function promiseChain () &#123; const api = new Api() let user, friends api.getUser() .then((returnedUser) =&gt; &#123; user = returnedUser return api.getFriends(user.id) &#125;) .then((returnedFriends) =&gt; &#123; friends = returnedFriends return api.getPhoto(user.id) &#125;) .then((photo) =&gt; &#123; console.log('promiseChain', &#123; user, friends, photo &#125;) &#125;)&#125; Promiseæœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç‰¹æ€§ï¼šPromise.prototype.then()å’ŒPromise.prototype.catch()è¿”å›Promiseå¯¹è±¡ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬å¯ä»¥å°†è¿™äº›promiseè¿æ¥æˆä¸€ä¸ªpromiseé“¾ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å›è°ƒå‡½æ•°æ”¾åœ¨ä¸€ä¸ªç¼©è¿›å±‚æ¬¡é‡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ç®€åŒ–äº†å›è°ƒå‡½æ•°å£°æ˜ã€‚å¯¹æ¯”ä¹‹å‰çš„å›è°ƒåœ°ç‹±ï¼Œä½¿ç”¨promiseé“¾ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å¤§å¤§æé«˜å¹¶ä¸”æ‹¥æœ‰ç€æ›´å¥½çš„åºåˆ—æ„Ÿï¼Œä½†æ˜¯çœ‹èµ·æ¥è¿˜æ˜¯éå¸¸å†—é•¿å¹¶ä¸”æœ‰ä¸€ç‚¹å¤æ‚ã€‚ æ–¹æ³•ä¸‰ â€” Async/Awaitæˆ‘ä»¬å¯ä¸å¯ä»¥ä¸å†™å›è°ƒå‡½æ•°ï¼Ÿå°±å†™7è¡Œä»£ç èƒ½è§£å†³å—ï¼Ÿ1234567async function asyncAwaitIsYourNewBestFriend () &#123; const api = new Api() const user = await api.getUser() const friends = await api.getFriends(user.id) const photo = await api.getPhoto(user.id) console.log('asyncAwaitIsYourNewBestFriend', &#123; user, friends, photo &#125;)&#125; ä¼˜é›…å¤šäº†ï¼Œè°ƒç”¨awaitä¹‹å‰æˆ‘ä»¬ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°promiseè¢«å†³è®®å¹¶å°†å€¼èµ‹å€¼ç»™å·¦è¾¹çš„å˜é‡ã€‚é€šè¿‡async/awaitï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¼‚æ­¥æ“ä½œæµç¨‹è¿›è¡Œæ§åˆ¶ï¼Œå°±å¥½åƒå®ƒæ˜¯åŒæ­¥ä»£ç ã€‚ æ³¨ï¼šawaitå¿…é¡»æ­é…asyncä¸€èµ·ä½¿ç”¨ï¼Œæ³¨æ„ä¸Šé¢çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°†å…³é”®å­—asyncæ”¾åœ¨äº†å‡½æ•°çš„å£°æ˜å‰ï¼Œè¿™æ˜¯å¿…éœ€çš„ã€‚ç¨åï¼Œæˆ‘ä»¬ä¼šæ·±å…¥è®¨è®ºè¿™ä¸ªé—®é¢˜ å¾ªç¯Async/Awaitå¯ä»¥è®©ä»¥å‰å¾ˆå¤šå¤æ‚çš„ä»£ç å˜å¾—ç®€æ˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦æŒ‰åºæ£€ç´¢æ¯ä¸ªç”¨æˆ·çš„æœ‹å‹çš„æœ‹å‹åˆ—è¡¨ã€‚ æ–¹æ³•ä¸€ â€” Recursive Promise Loopä¸‹é¢æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„promiseæ¥æŒ‰åºè·å–æ¯ä¸ªæœ‹å‹çš„æœ‹å‹åˆ—è¡¨1234567891011121314151617181920function promiseLoops () &#123; const api = new Api() api.getUser() .then((user) =&gt; &#123; return api.getFriends(user.id) &#125;) .then((returnedFriends) =&gt; &#123; const getFriendsOfFriends = (friends) =&gt; &#123; if (friends.length &gt; 0) &#123; let friend = friends.pop() return api.getFriends(friend.id) .then((moreFriends) =&gt; &#123; console.log('promiseLoops', moreFriends) return getFriendsOfFriends(friends) &#125;) &#125; &#125; return getFriendsOfFriends(returnedFriends) &#125;)&#125; æˆ‘ä»¬åˆ›å»ºåœ¨promiseLoopsä¸­åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ç”¨äºé€’å½’åœ°å»è·å–æœ‹å‹çš„æœ‹å‹åˆ—è¡¨ã€‚è¿™ä¸ªå‡½æ•°ä½“ç°äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ªç®€å•çš„ä»»åŠ¡è€Œè¨€ï¼Œè¿™ä¾æ—§æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„è§£å†³æ–¹æ¡ˆã€‚ æ–¹æ³•äºŒ â€” Async/Await For-Loopè®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹Async/Await12345678910async function asyncAwaitLoops () &#123; const api = new Api() const user = await api.getUser() const friends = await api.getFriends(user.id) for (let friend of friends) &#123; let moreFriends = await api.getFriends(friend.id) console.log('asyncAwaitLoops', moreFriends) &#125;&#125; ä¸éœ€è¦å†™é€’å½’promiseé—­åŒ…ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€ä¸ªforå¾ªç¯å°±èƒ½è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚ å¹¶è¡Œä¸€ä¸ªä¸€ä¸ªåœ°å»è·å–æœ‹å‹çš„æœ‹å‹çš„åˆ—è¡¨çœ‹èµ·æ¥æœ‰ç‚¹æ…¢ï¼Œä¸ºä»€ä¹ˆä¸å¹¶è¡Œå¤„ç†è¯·æ±‚å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨async/awaitæ¥å¤„ç†å¹¶è¡Œä»»åŠ¡å—ï¼Ÿå½“ç„¶12345678async function asyncAwaitLoopsParallel () &#123; const api = new Api() const user = await api.getUser() const friends = await api.getFriends(user.id) const friendPromises = friends.map(friend =&gt; api.getFriends(friend.id)) const moreFriends = await Promise.all(friendPromises) console.log('asyncAwaitLoopsParallel', moreFriends)&#125; ä¸ºäº†å¹¶è¡Œè¯·æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªpromiseæ•°ç»„å¹¶å°†å®ƒä¼ é€’ç»™æ–¹æ³•Promise.all()ï¼ŒPromise.all()ä¼šè¿”å›ä¸€ä¸ªpromiseï¼Œä¸€æ—¦æ‰€æœ‰çš„è¯·æ±‚å®Œæˆå°±ä¼šå†³è®®ã€‚ é”™è¯¯å¤„ç†ç„¶è€Œï¼Œåœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­æœ‰ä¸€ä¸ªä¸»è¦çš„é—®é¢˜è¿˜æ²¡è§£å†³ï¼šé”™è¯¯å¤„ç†ã€‚åœ¨å¼‚æ­¥æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸ªæ“ä½œç¼–å†™å•ç‹¬çš„é”™è¯¯å¤„ç†å›è°ƒï¼Œåœ¨è°ƒç”¨æ ˆçš„é¡¶éƒ¨å»æ‰¾å‡ºæ­£ç¡®çš„æŠ¥é”™ä½ç½®å¯èƒ½å¾ˆå¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åœ¨æ¯ä¸ªå›è°ƒå¼€å§‹æ—¶å°±å»æ£€æŸ¥æ˜¯å¦æŠ›å‡ºäº†é”™è¯¯ã€‚æ‰€ä»¥ï¼Œå¼•å…¥é”™è¯¯å¤„ç†åçš„å›è°ƒå‡½æ•°ä¼šæ¯”ä¹‹å‰å¤æ‚åº¦æˆå€å¢åŠ ï¼Œå¦‚æœæ²¡æœ‰ä¸»åŠ¨å®šä½åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œè¿™äº›é”™è¯¯ç”šè‡³ä¼šè¢«â€œåæ‰â€ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ç»™ä¹‹å‰çš„ä¾‹å­æ·»ä¸Šé”™è¯¯å¤„ç†æœºåˆ¶ã€‚ä¸ºäº†æµ‹è¯•é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæˆ‘ä»¬å°†åœ¨çœŸæ­£è·å–åˆ°ç”¨æˆ·å›¾ç‰‡ä¹‹å‰ä½¿ç”¨æŠ½è±¡ç±»é‡Œçš„api.throwError()æ–¹æ³•ã€‚ æ–¹æ³•ä¸€ â€” Promise Error Callbacksè®©æˆ‘ä»¬çœ‹çœ‹æœ€åçš„æƒ…å†µ123456789101112131415161718192021222324function callbackErrorHell () &#123; const api = new Api() let user, friends api.getUser().then(function (returnedUser) &#123; user = returnedUser api.getFriends(user.id).then(function (returnedFriends) &#123; friends = returnedFriends api.throwError().then(function () &#123; console.log('Error was not thrown') api.getPhoto(user.id).then(function (photo) &#123; console.log('callbackErrorHell', &#123; user, friends, photo &#125;) &#125;, function (err) &#123; console.error(err) &#125;) &#125;, function (err) &#123; console.error(err) &#125;) &#125;, function (err) &#123; console.error(err) &#125;) &#125;, function (err) &#123; console.error(err) &#125;)&#125; ä»£ç é™¤äº†åˆé•¿åˆä¸‘é™‹ä»¥å¤–ï¼Œä»£ç æ“ä½œæµä¹Ÿä¸ç›´è§‚ï¼Œä¸åƒåŒæ­¥ã€å¯è¯»æ€§é«˜çš„ä»£ç é‚£æ ·ä»ä¸Šå¾€ä¸‹ã€‚ æ–¹æ³•äºŒ â€” Promise Chain â€œCatchâ€ Methodæˆ‘ä»¬å¯ä»¥ç»™promiseé“¾æ·»åŠ catchæ–¹æ³•æ¥æ”¹å–„ä¸€äº›1234567891011121314151617181920212223function callbackErrorPromiseChain () &#123; const api = new Api() let user, friends api.getUser() .then((returnedUser) =&gt; &#123; user = returnedUser return api.getFriends(user.id) &#125;) .then((returnedFriends) =&gt; &#123; friends = returnedFriends return api.throwError() &#125;) .then(() =&gt; &#123; console.log('Error was not thrown') return api.getPhoto(user.id) &#125;) .then((photo) =&gt; &#123; console.log('callbackErrorPromiseChain', &#123; user, friends, photo &#125;) &#125;) .catch((err) =&gt; &#123; console.error(err) &#125;)&#125; çœ‹èµ·æ¥å¥½å¤šäº†ï¼Œæˆ‘ä»¬é€šè¿‡ç»™promiseæ·»åŠ ä¸€ä¸ªé”™è¯¯å¤„ç†å–ä»£äº†ä¹‹å‰ç»™æ¯ä¸ªå›è°ƒå‡½æ•°æ·»åŠ é”™è¯¯å¤„ç†ã€‚ä½†æ˜¯ï¼Œè¿™è¿˜æ˜¯æœ‰ä¸€ç‚¹å¤æ‚å¹¶ä¸”æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å›è°ƒæ¥å¤„ç†å¼‚æ­¥é”™è¯¯è€Œä¸æ˜¯åƒå¯¹å¾…æ­£å¸¸çš„JavaScripté”™è¯¯é‚£æ ·å¤„ç†å®ƒä»¬ã€‚ æ–¹æ³•ä¸‰ â€” Normal Try/Catch Blockæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½123456789101112131415async function aysncAwaitTryCatch () &#123; try &#123; const api = new Api() const user = await api.getUser() const friends = await api.getFriends(user.id) await api.throwError() console.log('Error was not thrown') const photo = await api.getPhoto(user.id) console.log('async/await', &#123; user, friends, photo &#125;) &#125; catch (err) &#123; console.error(err) &#125;&#125; æˆ‘ä»¬å°†å¼‚æ­¥æ“ä½œæ”¾è¿›äº†å¤„ç†åŒæ­¥ä»£ç çš„try/catchä»£ç å—ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åƒå¯¹å¾…åŒæ­¥ä»£ç çš„ä¸€æ ·å¤„ç†å¼‚æ­¥ä»£ç çš„é”™è¯¯ã€‚ä»£ç çœ‹èµ·æ¥éå¸¸ç®€æ˜ ç»„åˆæˆ‘åœ¨å‰é¢æåŠäº†ä»»ä½•ä»¥asyncçš„å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªpromiseã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥çœŸæ­£è½»æ¾åœ°ç»„åˆå¼‚æ­¥æ§åˆ¶æµä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°æ•´ç†å‰é¢çš„ä¾‹å­ï¼Œå°†è·å–æ•°æ®å’Œå¤„ç†æ•°æ®åˆ†å¼€ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒç”¨asyncå‡½æ•°è·å–æ•°æ®ã€‚12345678910111213async function getUserInfo () &#123; const api = new Api() const user = await api.getUser() const friends = await api.getFriends(user.id) const photo = await api.getPhoto(user.id) return &#123; user, friends, photo &#125;&#125;function promiseUserInfo () &#123; getUserInfo().then((&#123; user, friends, photo &#125;) =&gt; &#123; console.log('promiseUserInfo', &#123; user, friends, photo &#125;) &#125;)&#125; æ›´æ£’çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®æ¥å—å‡½æ•°é‡Œä½¿ç”¨async/awaitï¼Œè¿™å°†ä½¿å¾—æ•´ä¸ªå¼‚æ­¥æ¨¡å—æ›´åŠ æ˜æ˜¾ã€‚å¦‚æœæˆ‘ä»¬è¦è·å–å‰é¢10ä¸ªç”¨æˆ·çš„æ•°æ®å‘¢ï¼Ÿ1234567async function getLotsOfUserData () &#123; const users = [] while (users.length &lt; 10) &#123; users.push(await getUserInfo()) &#125; console.log('getLotsOfUserData', users)&#125; å¹¶å‘å‘¢ï¼Ÿå¹¶ä¸”åŠ ä¸Šé”™è¯¯å¤„ç†å‘¢ï¼Ÿ123456789async function getLotsOfUserDataFaster () &#123; try &#123; const userPromises = Array(10).fill(getUserInfo()) const users = await Promise.all(userPromises) console.log('getLotsOfUserDataFaster', users) &#125; catch (err) &#123; console.error(err) &#125;&#125; ç»“è®ºéšç€SPAçš„å…´èµ·å’ŒNodeJSçš„å¹¿æ³›åº”ç”¨ï¼Œå¯¹äºJavaScriptå¼€å‘äººå‘˜æ¥è¯´ï¼Œä¼˜é›…åœ°å¤„ç†å¹¶å‘æ€§æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½è¦é‡è¦ã€‚Async/Awaitç¼“è§£äº†è®¸å¤šå› ä¸ºbugå¼•èµ·ä¸”å·²ç»å½±å“JavaScriptå¾ˆå¤šå¹´çš„æ§åˆ¶æµé—®é¢˜ï¼Œå¹¶ä¸”ä½¿å¾—ä»£ç æ›´åŠ ä¼˜é›…ã€‚å¦‚ä»Šï¼Œä¸»æµçš„æµè§ˆå™¨å’ŒNodeJSéƒ½å·²ç»æ”¯æŒäº†è¿™äº›è¯­æ³•ç³–ï¼Œæ‰€ä»¥ç°åœ¨æ˜¯ä½¿ç”¨Async/Awaitçš„æœ€å¥½æ—¶æœºã€‚ åŸæ–‡é“¾æ¥ï¼šhttps://blog.patricktriest.com/what-is-async-await-why-should-you-care/æ˜é‡‘åœ°å€ï¼šhttps://juejin.im/post/5ad1cab8f265da238a30e137]]></content>
      <categories>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>æ˜é‡‘ç¿»è¯‘è®¡åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡Nginxåå‘ä»£ç†è·¨åŸŸ]]></title>
    <url>%2F2018%2F04%2F08%2FCross-Origin-using-Nginx%2F</url>
    <content type="text"><![CDATA[ç”±äºé¡¹ç›®å‰åç«¯åˆ†ç¦»ä¸”åç«¯çœŸå®æ¥å£å·²å‡ºï¼Œæ‰€ä»¥æˆ‘å¼€å‘æ—¶é¦–å…ˆè€ƒè™‘é€šè¿‡è·¨åŸŸè·å–çœŸå®æ¥å£æ•°æ®é…åˆå‰ç«¯å¼€å‘ã€‚ï¼ˆèµ¶å·¥æœŸå•Šï¼šï¼‰æ ¹æ®create-react-appå®˜æ–¹æç¤ºï¼Œåœ¨package.jsonä¸­æ·»åŠ å­—æ®µ&quot;proxy&quot;: &quot;http://admin.xiaoyaoeden.top&quot;emmmğŸ¤­æ— æ•ˆ ğŸ˜‚æ‰€ä»¥æ”¹ä¸ºä½¿ç”¨Nginxåå‘ä»£ç†è·¨åŸŸğŸ˜Šcurrent originï¼šhttp://localhost:3000target originï¼šhttp://admin.xiaoyaoeden.top å®‰è£…brew install nginx ä¿®æ”¹é…ç½®é¦–å…ˆè¿›å…¥nginxçš„é…ç½®æ–‡ä»¶ vim /usr/local/etc/nginx/nginx.conf å¢åŠ å¦‚ä¸‹ä¸€ä¸ªserver 12345678910111213server &#123; listen 3001; server_name localhost; location / &#123; proxy_pass http://localhost:3000; &#125; location /api/ &#123; add_header Access-Control-Allow-Origin *; proxy_pass http://admin.xiaoyaoeden.top; &#125; &#125; é‡å¯NginxæœåŠ¡1nginx -s reload æµ‹è¯•æ‰“å¼€localhost:3001ï¼Œè·¨åŸŸé—®é¢˜è§£å†³äº†ï¼Œç°åœ¨å¯ä»¥å¼€å¼€å¿ƒå¿ƒçš„æµ‹è¯•æ¥å£å•¦]]></content>
      <categories>
        <category>å®è·µ</category>
      </categories>
      <tags>
        <tag>è·¨åŸŸ</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¸­çš„ç±»å‹ï¼ˆäºŒï¼‰â€”â€”â€”â€” å¼ºåˆ¶ç±»å‹è½¬æ¢]]></title>
    <url>%2F2018%2F02%2F15%2Ftype-juggling%2F</url>
    <content type="text"><![CDATA[å¼•å…¥JavaScriptä¸­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ç»å¸¸è®©äººè¯Ÿç—…ï¼Œä½†æ˜¯ä¹Ÿå¹¶éä¸€æ— æ˜¯å¤„ã€‚å°†å€¼ä»ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ç§°ä¸ºç±»å‹è½¬æ¢ï¼Œéšå¼è½¬æ¢ç§°ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼›ä¸æ­¤åŒæ—¶ä¹Ÿæœ‰å¦å¤–ä¸€ç§åŒºåˆ†æ–¹å¼ï¼Œç±»å‹è½¬æ¢å‘ç”Ÿåœ¨é™æ€è¯­è¨€ç¼–è¯‘é˜¶æ®µè€Œå¼ºåˆ¶ç±»å‹å‘ç”Ÿåœ¨åŠ¨æ€è¯­è¨€çš„è¿è¡Œæ—¶ã€‚åœ¨JavaScriptä¸­ï¼Œç»Ÿç§°ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ˜¾éšä¹‹åˆ†å¤šå–å†³äºç¼–ç è€…æ˜¯å¦çŸ¥é“è½¬æ¢çš„æ•ˆæœå’Œå‰¯ä½œç”¨ã€‚]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[â€œå·¥ä½œå®¤æ‹›æ–°é¡µé¢é¡¹ç›®â€å®è·µä¸­é‡åˆ°çš„é—®é¢˜ï¼ˆä¸€ï¼‰â€”â€”â€”â€” Reactç»„ä»¶é€šä¿¡]]></title>
    <url>%2F2018%2F02%2F13%2FReact-Problem-1%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å­¦äº†ReactåŸºç¡€çŸ¥è¯†ï¼Œæ‰€ä»¥æœ‰æ‰“ç®—åšä¸€ä¸ªé¡¹ç›®æ¥è¸©å‘ï¼Œæ°å¥½é€‚é€¢å¤§äºŒå¯’å‡å¹¶ä¸”å·¥ä½œå®¤æ°å¥½éœ€è¦åœ¨å¼€å­¦åæ‹›æ–°ï¼Œæ‰€ä»¥å¤©æ—¶åœ°åˆ©äººå’Œï¼Œæˆ‘å°±ç”¨Reactä½œä¸ºè¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ˆã€‚äºæ˜¯é¡¹ç›®å¼€å‘ä¸­çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±è¯ç”Ÿäº†â€”â€”â€”â€”Reactç»„ä»¶é€šä¿¡ é—®é¢˜æ¥æºmaterial-uiä¸­çš„ç»„ä»¶AppBarå’ŒDrawerä¹‹é—´çš„é€šä¿¡ï¼ŒäºŒè€…ä¸ºå…„å¼Ÿç»„ä»¶ã€‚ AppBarç»„ä»¶ Drawerç»„ä»¶ åŠŸèƒ½éœ€æ±‚ï¼š æˆ‘éœ€è¦ç‚¹å‡»AppBarçš„å·¦ä¾§çš„iconè°ƒå‡ºDrawerã€‚ ç‚¹å‡»Drawerä¸­çš„MenuItemè·³è½¬åˆ°å…¶ä»–é¡µé¢ è°ƒå‡ºDraweråç‚¹å‡»éDrawerç»„ä»¶åæ”¶èµ·Drawerã€‚ è§£å†³æ–¹æ¡ˆé€šè®¯æ˜¯å•å‘çš„ï¼Œæ•°æ®å¿…é¡»æ˜¯ç”±ä¸€æ–¹ä¼ åˆ°å¦ä¸€æ–¹ã€‚ çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶çš„é€šä¿¡åœ¨ React ä¸­ï¼Œçˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶é€šè¿‡ä¼  props çš„æ–¹å¼ï¼Œå‘å­ç»„ä»¶è¿›è¡Œé€šè®¯ã€‚1234567891011121314151617181920212223242526class Parent extends Component &#123; constructor() &#123; this.state = &#123; msg: 'ä»Šå¤©æ˜¯æƒ…äººèŠ‚è€¶' &#125;; &#125; render() &#123; return ( &lt;div&gt; &lt;Child msg=&#123;this.state.msg&#125; /&gt; &lt;/div&gt; ); &#125;&#125;class Child extends Component &#123; constructor(props) &#123; super(props); &#125; render() &#123; return ( &lt;p&gt;this.props.msg&lt;/p&gt; ) &#125;&#125; å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶çš„é€šä¿¡å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼ŒåŒæ ·éœ€è¦çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’propsï¼Œä¸è¿‡è¿™æ¬¡æ˜¯ä¼ é€’çš„æ˜¯ä»¥çˆ¶ç»„ä»¶è‡ªèº«ä¸ºä½œç”¨åŸŸçš„å‡½æ•°ï¼Œå­ç»„ä»¶è´Ÿè´£è°ƒç”¨ï¼Œå°†è¦ä¼ é€’çš„ä¿¡æ¯ä¼ å…¥å‡½æ•°ä¸­ï¼Œä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸä¸­ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445class Parent extends Component &#123; constructor() &#123; this.state = &#123; msg: 'ä»Šå¤©æ˜¯æƒ…äººèŠ‚è€¶' &#125;; this.transferMsg = this.transferMsg.bind(this); &#125; componentDidMount() &#123; console.log(this.state.msg); &#125; componentDidUpdate() &#123; console.log(this.state.msg); &#125; transferMsg(msg) &#123; this.setState(&#123; msg: msg &#125;); &#125; render() &#123; return ( &lt;div&gt; &lt;Child transferMsg=&#123;this.transferMsg&#125; /&gt; &lt;/div&gt; ); &#125;&#125;class Child extends Component &#123; constructor(props) &#123; super(props); this.msg = 'æˆ‘ä¹Ÿå–œæ¬¢ä½ '; &#125; componentDidMount() &#123; this.props.transferMsg(this.msg); &#125; render() &#123; return ( &lt;p&gt;æƒ…äººèŠ‚å•Š&lt;/p&gt; ) &#125;&#125; å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡å› ä¸ºAppBarå’ŒDrawerä¸ºå…„å¼Ÿç»„ä»¶ï¼Œå®ƒä»¬çš„å…±åŒç‚¹æ˜¯æ‹¥æœ‰ä¸€ä¸ªç›¸åŒçš„çˆ¶ç»„ä»¶ã€‚å…ˆçœ‹çœ‹ç»„ä»¶ç»“æ„ï¼š1234&lt;Nav&gt; &lt;AppBar /&gt; &lt;Drawer /&gt;&lt;/Nav&gt; æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†çˆ¶ç»„ä»¶Navä½œä¸ºä¸­è½¬ç«™ï¼ŒAppBarä¼ é€’ä¿¡æ¯ç»™Navï¼ŒNavå†å°†ä¿¡æ¯ä¼ é€’ç»™Drawer;Draweä¼ é€’ä¿¡æ¯ç»™AppBarä¸æ­¤ç±»ä¼¼ã€‚è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼Œæˆ‘ä»¬å°†Drawerçš„å¼€å…³çŠ¶æ€æ”¾åœ¨äº†Navçš„stateä¸­ï¼Œå£°æ˜äº†æ›´æ”¹openå€¼çš„transferMsgå‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªå‡½æ•°åˆ†åˆ«ä¼ é€’ä¸ªNavBarå’ŒDrawerï¼Œè¿™æ ·ä»¥æ¥çœŸæ­£æ§åˆ¶opençš„å€¼å°±æ˜¯NavBarå’ŒDrawerç»„ä»¶ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576class Nav extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; open: false &#125; this.transferMsg = this.transferMsg.bind(this); &#125; transferMsg() &#123; this.setState(&#123; open: !this.state.open &#125;); &#125; render() &#123; return ( &lt;nav&gt; &lt;NavBar transferMsg=&#123;this.transferMsg&#125;/&gt; &lt;NavDrawer msg=&#123;this.state.open&#125; transferMsg=&#123;this.transferMsg&#125; /&gt; &lt;/nav&gt; ); &#125;&#125;class NavBar extends Component &#123; constructor(props) &#123; super(props); this.handleMenuClick = this.handleMenuClick.bind(this); &#125; handleMenuClick(event) &#123; this.props.transferMsg(); &#125; render() &#123; return ( &lt;AppBar title="CTG Club" iconClassNameRight="mudiocs-icon-navigation-expand-more" onLeftIconButtonClick=&#123;this.handleMenuClick&#125; /&gt; ); &#125;&#125;class NavDrawer extends Component &#123; constructor(props) &#123; super(props); this.handleToggle= this.handleToggle.bind(this); this.handleClose = this.handleClose.bind(this); &#125; handleToggle() &#123; this.props.transferMsg(); &#125; handleClose() &#123; this.props.transferMsg(); &#125; render() &#123; return ( &lt;Drawer docked=&#123;false&#125; width=&#123;200&#125; open=&#123;this.props.msg&#125; onRequestChange=&#123;this.handleToggle&#125; &gt; &lt;/Drawer&gt; ) &#125;&#125; è¿™ä¸ªé¡¹ç›®ä¸­çš„é—®é¢˜è¿åˆƒè€Œè§£ã€‚è¿™ä»£ç ç»“æ„ï¼Œä»¿ä½›è¿˜æœ‰ä¸€ç‚¹ä¸œè¥¿ã€‚ å‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼å®šä¹‰å‘å¸ƒâ€”è®¢é˜…æ¨¡å¼åˆå«è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ƒå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚åœ¨ JavaScriptå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨äº‹ä»¶æ¨¡å‹æ¥æ›¿ä»£ä¼ ç»Ÿçš„å‘å¸ƒâ€”è®¢é˜…æ¨¡å¼ã€‚ ####è¿ç”¨1.å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼å¯ä»¥å¹¿æ³›åº”ç”¨äºå¼‚æ­¥ç¼–ç¨‹ï¼Œåªæ˜¯ä¸€ç§æ›¿ä»£å›è°ƒå‡½æ•°çš„æ–¹æ¡ˆã€‚2ã€‚å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼å¯ä»¥å–ä»£å¯¹è±¡ä¹‹é—´ç¡¬ç¼–ç çš„é€šçŸ¥æœºåˆ¶ï¼Œä¸€ä¸ªå¯¹è±¡ä¸å†æ˜¾å¼è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªæ¥å£ï¼Œè®©ä¸¤ä¸ªå¯¹è±¡æ¾è€¦åˆåœ°è”ç³»åœ¨ä¸€èµ·ã€‚ï¼ˆè¿™ä¸€ç‚¹å°±å¯ä»¥ä¸Šè¿°çš„è§£å†³æ–¹æ¡ˆçš„ä¸è¶³çš„åœ°æ–¹ï¼‰ å®ä¾‹æœ€è¿‘ä¸€å¹´é‡åº†æˆ¿ä»·è¹­è¹­å¾€ä¸Šæ¶¨ï¼Œå°æ˜è¿«äºå®¶é‡Œçš„å‹åŠ›ï¼Œæ‰“ç®—åœ¨è§£æ”¾ç¢‘ä¹°ç½®ä¸€å¥—æ€»ä»·200ä¸‡çš„ä¸‰å±…å®¤ã€‚å°æ˜åˆ°äº†å”®æ¥¼å¤„æ‰å‘ç°å¿ƒä»ªçš„æˆ¿å­å·²ç»è¢«åˆ«äººä¹°äº†ï¼Œä¸è¿‡åç»­è¿˜æœ‰ä¸€äº›å°¾æˆ¿æ¨å‡ºï¼Œä½†æ˜¯å¼€å‘å•†ä¹Ÿä¸æ¸…æ¥šä»€ä¹ˆæ—¶å€™æ¨å‡ºè¿™äº›å°¾æˆ¿ã€‚äºæ˜¯å”®æ¥¼MMè®°ä¸‹äº†å°æ˜çš„ç”µè¯ï¼Œç­”åº”ä»–å°¾æˆ¿ä¸€æ—¦æ¨å‡ºå°±æ‰“ç”µè¯ç»™ä»–ã€‚åç»­å°ç ä¹Ÿç•™äº†å·ç ï¼Œæ¯å¤©ç­‰ç€å”®æ¥¼MMçš„ç”µè¯ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼çš„ä¾‹å­ï¼Œé€»è¾‘ä»£ç å®ç°å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859//æŠŠå‘å¸ƒâ€”è®¢é˜…çš„åŠŸèƒ½æå–å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡å†…:const event = &#123; clientList: [], listen(key, fn) &#123; if (!this.clientList[key]) &#123; //å¦‚æœè¿˜æ²¡æœ‰è®¢é˜…è¿‡æ­¤ç±»æ¶ˆæ¯ï¼Œç»™è¯¥ç±»æ¶ˆæ¯åˆ›å»ºä¸€ä¸ªç¼“å­˜åˆ—è¡¨ this.clientList[key] = []; &#125; this.clientList[key].push(fn); // è®¢é˜…çš„æ¶ˆæ¯æ·»åŠ è¿›æ¶ˆæ¯ç¼“å­˜åˆ—è¡¨ &#125;, trigger(...message) &#123; let key = Array.prototype.shift.call(message), //å–å‡ºæ¶ˆæ¯ç±»å‹ fns = this.clientList[key]; //å–å‡ºè¯¥æ¶ˆæ¯å¯¹åº”çš„å›è°ƒå‡½æ•°é›†åˆ if (!fns || fns.length === 0) &#123; //å¦‚æœæ²¡æœ‰è®¢é˜…è¯¥æ¶ˆæ¯ï¼Œåˆ™è¿”å› return false; &#125; for (let i = 0, fn = fns[i++]; ) &#123; fn.apply(this, message); //messageæ˜¯å‘å¸ƒæ¶ˆæ¯æ—¶é™„é€çš„å‚æ•° &#125; &#125;, remove(key, fn) &#123; let fns = this.clientList[key]; if (!fns) &#123; // å¦‚æœ key å¯¹åº”çš„æ¶ˆæ¯æ²¡æœ‰è¢«äººè®¢é˜…ï¼Œåˆ™ç›´æ¥è¿”å› return false; &#125; if (!fn) &#123; //// å¦‚æœæ²¡æœ‰ä¼ å…¥å…·ä½“çš„å›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºéœ€è¦å–æ¶ˆ key å¯¹åº”æ¶ˆæ¯çš„æ‰€æœ‰è®¢é˜… fns &amp;&amp; (fns.length = 0); &#125; else &#123; for (let i = fns.length - 1; i &gt;= 0; i--) &#123; // åå‘éå†è®¢é˜…çš„å›è°ƒå‡½æ•°åˆ—è¡¨ let _fn = fns[i]; if (_fn === fn) &#123; fns.splice(i, 1); // åˆ é™¤è®¢é˜…è€…çš„å›è°ƒå‡½æ•° &#125; &#125; &#125;; &#125;&#125;;//å†å®šä¹‰ä¸€ä¸ª installEvent å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ç»™æ‰€æœ‰çš„å¯¹è±¡éƒ½åŠ¨æ€å®‰è£…å‘å¸ƒâ€”è®¢é˜…åŠŸèƒ½:const installEvent = function (obj) &#123; for (let i in event) &#123; obj[i] = event[i]; &#125;&#125;;const salesOffices = &#123;&#125;;installEvent(salesOffices);salesOffices.listen('squareMeter88', fn1 = function (price) &#123; console.log('ä»·æ ¼= ' + price);&#125;);salesOffices.listen('squareMeter88', fn2 = function (price) &#123; console.log('ä»·æ ¼= ' + price);&#125;);salesOffices.remove('squareMeter88', fn1); // åˆ é™¤å°æ˜çš„è®¢é˜…// å°æ˜è®¢é˜…æ¶ˆæ¯// å°çº¢è®¢é˜…æ¶ˆæ¯salesOffices.trigger('squareMeter88', 2000000); // è¾“å‡º:2000000 å¯¹äºæ­¤é¡¹ç›®ä¸­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185/*onã€oneï¼šon ä¸ one å‡½æ•°ç”¨äºè®¢é˜…è€…ç›‘å¬ç›¸åº”çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶å“åº”æ—¶çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œon ä¸ one çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯ï¼Œä½¿ç”¨ one è¿›è¡Œè®¢é˜…çš„å‡½æ•°ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè€Œ ä½¿ç”¨ on è¿›è¡Œè®¢é˜…çš„å‡½æ•°ï¼Œæ¯æ¬¡äº‹ä»¶å‘ç”Ÿç›¸åº”æ—¶éƒ½ä¼šè¢«è§¦å‘ã€‚triggerï¼štrigger ç”¨äºå‘å¸ƒè€…å‘å¸ƒäº‹ä»¶ï¼Œå°†é™¤ç¬¬ä¸€å‚æ•°ï¼ˆäº‹ä»¶åï¼‰çš„å…¶ä»–å‚æ•°ï¼Œä½œä¸ºæ–°çš„å‚æ•°ï¼Œè§¦å‘ä½¿ç”¨ one ä¸ on è¿›è¡Œè®¢é˜…çš„å‡½æ•°ã€‚offï¼šç”¨äºè§£é™¤æ‰€æœ‰è®¢é˜…äº†æŸä¸ªäº‹ä»¶çš„æ‰€æœ‰å‡½æ•°ã€‚*/const eventProxy = &#123; onObj: &#123;&#125;, oneObj: &#123;&#125;, on: function(key, fn) &#123; if (this.onObj[key] === undefined) &#123; this.onObj[key] = []; &#125; this.onObj[key].push(fn); &#125;, one: function(key, fn) &#123; if (this.oneObj[key] === undefined) &#123; this.oneObj[key] = []; &#125; this.oneObj[key].push(fn); &#125;, off: function(key) &#123; this.onObj[key] = []; this.oneObj[key] = []; &#125;, trigger: function(...args) &#123; let key; if (args.length === 0) &#123; return false; &#125; key = args[0]; args = [].concat(Array.prototype.slice.call(args, 1)); if (this.onObj[key] !== undefined &amp;&amp; this.onObj[key].length &gt; 0) &#123; for (let i in this.onObj[key]) &#123; this.onObj[key][i].apply(null, args); &#125; &#125; if (this.oneObj[key] !== undefined &amp;&amp; this.oneObj[key].length &gt; 0) &#123; for (let i in this.oneObj[key]) &#123; this.oneObj[key][i].apply(null, args); this.oneObj[key][i] = undefined; &#125; this.oneObj[key] = []; &#125; &#125;&#125;;const BranchItemDatas = [ &#123; name: 'Webç ”å‘éƒ¨', imgUrl: null, imgTitle: null, intro: null, key:1 &#125;, &#123; name: 'ç§»åŠ¨å¼€å‘éƒ¨', imgUrl: null, imgTitle: null, intro: null, key: 2 &#125;, &#123; name: 'è§†è§‰è®¾è®¡éƒ¨', imgUrl: null, imgTitle: null, intro: null, key: 3 &#125;, &#123; name: 'äº§å“è¿è¥éƒ¨', imgUrl: null, imgTitle: null, intro: null, key: 4 &#125;, &#123; name: 'è¿ç»´å®‰å…¨éƒ¨', imgUrl: null, imgTitle: null, intro: null, key: 5 &#125;];class Nav extends Component &#123; render() &#123; return ( &lt;nav&gt; &lt;NavBar /&gt; &lt;NavDrawer /&gt; &lt;/nav&gt; ); &#125;&#125;class NavBar extends Component &#123; constructor(props) &#123; super(props); this.handleMenuClick = this.handleMenuClick.bind(this); &#125; handleMenuClick() &#123; eventProxy.trigger('open', true); &#125; render() &#123; return ( &lt;AppBar title="CTG Club" onLeftIconButtonClick=&#123;this.handleMenuClick&#125; /&gt; ); &#125;&#125;class NavDrawer extends Component &#123; constructor(props) &#123; super(props); this.handleToggle = this.handleToggle.bind(this); this.handleClose = this.handleClose.bind(this); this.state = &#123; open: false &#125; &#125; handleToggle() &#123; this.setState(&#123; open: !this.state.open &#125;) &#125; handleClose() &#123; this.setState(&#123; open: false &#125;) &#125; componentDidMount() &#123; eventProxy.on('open', () =&gt; &#123; this.setState(&#123; open: true &#125;); &#125;); eventProxy.on('close', () =&gt; &#123; this.setState(&#123; open: false &#125;); &#125;); &#125; render() &#123; return ( &lt;Drawer docked=&#123;false&#125; width=&#123;200&#125; open=&#123;this.state.open&#125; onRequestChange=&#123;this.handleToggle&#125; &gt; &lt;MenuItems /&gt; &lt;/Drawer&gt; ) &#125;&#125;class MenuItems extends Component &#123; handleMenuItemClick() &#123; eventProxy.trigger('close', false); &#125; render() &#123; return ( &lt;ul className='normal-list'&gt; &lt;MenuItem onClick=&#123;this.handleMenuItemClick&#125; key=&#123;0&#125;&gt;é¦–é¡µ&lt;/MenuItem&gt; &#123;BranchItemDatas.map((item) =&gt; &#123; return ( &lt;MenuItem onClick=&#123;this.handleMenuItemClick&#125; key=&#123;item.key&#125;&gt;&#123;item.name&#125;&lt;/MenuItem&gt; ); &#125;)&#125; &lt;MenuItem onClick=&#123;this.handleMenuItemClick&#125; key=&#123;6&#125;&gt;å…³äºCTG&lt;/MenuItem&gt; &lt;MenuItem onClick=&#123;this.handleMenuItemClick&#125; key=&#123;7&#125;&gt;è”ç³»æˆ‘ä»¬&lt;/MenuItem&gt; &lt;/ul&gt; ) &#125;&#125; å…³äºå‚è€ƒä¹¦ç±æˆ–åšæ–‡ï¼šã€ŠJavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹â€œReact ç»„ä»¶é—´é€šè®¯â€â€”â€”â€”â€”æ·˜å®å‰ç«¯å›¢é˜Ÿ æƒ…äººèŠ‚å¿«ä¹å•Šæƒ…äººèŠ‚å¿«ä¹å•Šæƒ…äººèŠ‚å¿«ä¹å•Šæƒ…äººèŠ‚å¿«ä¹å•Š]]></content>
      <categories>
        <category>å®è·µ</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Learning PostCSS(ä¸€)]]></title>
    <url>%2F2018%2F02%2F07%2FpostCSS-1%2F</url>
    <content type="text"><![CDATA[å¼•å…¥PostCSSæ˜¯ç›®å‰CSSå¤„ç†å™¨ä¸­æœ€æµè¡Œçš„ä¸€ä¸ªå¤„ç†å™¨ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚å®ƒä¸ç­‰åŒäºSassã€Lessç­‰é¢„å¤„ç†å™¨ï¼Œä¹Ÿä¸ç­‰åŒäºCompassï¼ˆCompasså·²ç»æ­»äº†ï¼‰è¿™æ ·çš„åå¤„ç†å™¨ï¼Œå°½ç®¡å®ƒå¸¦æœ‰Postè¿™ä¸ªè‹±æ–‡å•è¯ã€‚PostCSSçš„åŠŸèƒ½ä¸»è¦æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼ŒæŠŠCSSè§£ææˆJavaScriptå¯ä»¥æ“ä½œçš„AST(Abstact Syntax tree,æŠ½è±¡è¯­æ³•æ ‘);ç¬¬äºŒï¼Œè°ƒç”¨æ’ä»¶æ¥å¤„ç†ASTå¹¶å¾—åˆ°ç»“æœã€‚PostCSSçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶ä¸æ–­å‘å±•çš„æ’ä»¶ç”Ÿæ€ã€‚ åˆ›å»ºå˜é‡å’Œæ··åˆå®]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>PostCSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¸­çš„ç±»å‹ï¼ˆä¸€ï¼‰â€”â€”â€”â€” ç±»å‹]]></title>
    <url>%2F2018%2F02%2F06%2Ftype-js%2F</url>
    <content type="text"><![CDATA[å¼•å…¥ç±»å‹ï¼šå¯¹è¯­è¨€å¼•æ“å’Œå¼€å‘äººå‘˜æ¥è¯´ï¼Œç±»å‹æ˜¯å€¼çš„å†…éƒ¨ç‰¹å¾ï¼Œå®ƒå®šä¹‰äº†å€¼çš„è¡Œä¸ºï¼Œä»¥ä½¿å…¶åŒºåˆ«äºå…¶ä»–å€¼ã€‚JavaScriptæ˜¯ä¸€é—¨å¼±ç±»å‹ï¼ˆåå‘å®¹å¿éšå¼ç±»å‹è½¬æ¢ï¼‰è¯­è¨€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€é—¨åŠ¨æ€ç±»å‹ï¼ˆç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“æ¯ä¸ªå˜é‡çš„ç±»å‹ï¼‰è¯­è¨€ã€‚æ²¡æœ‰ä¸¥æ ¼çš„ç±»å‹çš„é™åˆ¶ï¼Œä½¿å¾—JavaScriptæˆä¸ºäº†ä¸€é—¨ç‰¹åˆ«çµæ´»çš„è¯­è¨€ï¼Œä½†æ˜¯ä¹Ÿå¸¦äº†ä¸€äº›éº»çƒ¦ï¼Œä¾‹å¦‚å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ å†…ç½®ç±»å‹JavaScriptä¸­æš‚æ—¶æœ‰7ç§å†…ç½®ç±»å‹ï¼š ç©ºå€¼ï¼ˆnullï¼‰ æœªå®šä¹‰ï¼ˆundefinedï¼‰ å¸ƒå°”å€¼ï¼ˆbooleanï¼‰ æ•°å­—ï¼ˆnumberï¼‰ å­—ç¬¦ä¸²ï¼ˆstringï¼‰ å¯¹è±¡ï¼ˆobjectï¼‰ ç¬¦å·ï¼ˆsymbolï¼‰é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡typeofæ“ä½œç¬¦æ¥æŸ¥çœ‹å€¼çš„ç±»å‹ï¼Œå®ƒä¼šè¿”å›ç±»å‹çš„å­—ç¬¦ä¸²å€¼ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯è¿™ä¸ƒç§ç±»å‹å’Œå®ƒä»¬çš„å­—ç¬¦ä¸²å€¼å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”ã€‚123456789101112131415//ä¸‹é¢å…­ç§ç±»å‹å‡æœ‰åŒåçš„å­—ç¬¦ä¸²å€¼ä¸ä¹‹å¯¹åº”,'==='ä¼šè¿”å›trueã€‚typeof undefined === 'undefined'typeof false === 'boolsean'typeof 3 === 'number'typeof '3' === 'string'typeof &#123;number: 3&#125; === 'object'typeof Symbol() === 'symbol'//å¯¹äºnullç±»å‹ï¼Œå­˜åœ¨ä¸€ä¸ªbugï¼ˆä»JavaScriptè¯ç”Ÿå°±ä¸€ç›´å­˜åœ¨ï¼Œä»¥åä¼°è®¡ä¹Ÿä¼šå­˜åœ¨ï¼‰ï¼Œå¯¹nullè¿›è¡Œtypeofæ“ä½œï¼Œè¿”å›çš„å€¼å±…ç„¶æ˜¯'object'ï¼›typeof null === 'object' //truetypeof null === 'null' //false//æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤åˆæ¡ä»¶æ¥æ£€æµ‹nullå€¼çš„ç±»å‹ï¼šconst a = null;//å¯¹äº&amp;&amp;æ“ä½œï¼Œå¦‚æœè¿ç®—ç¬¦å·¦è¾¹çš„å€¼ä¸ºçœŸï¼Œåˆ™è¯¥è¡¨è¾¾å¼ç›´æ¥è¿”å›å³è¾¹çš„å€¼ï¼Œä¾‹å¦‚ 'true &amp;&amp; 3'è¡¨è¾¾å¼çš„ç»“æœä¸º3ã€‚(!a &amp;&amp; typeof a === "object"); //true å‡½æ•°å‡½æ•°æ˜¯â€™objectâ€™çš„ä¸€ä¸ªå­ç±»å‹ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªâ€œå¯è°ƒç”¨å¯¹è±¡â€ï¼Œå®ƒæœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§[[Call]]ï¼Œè¯¥å±æ€§ä½¿å…¶å¯ä»¥è¢«è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œå¯¹å‡½æ•°è¿›è¡Œtypeofæ“ä½œæ—¶ï¼Œè¿”å›çš„å€¼å¯ä¸æ˜¯â€™objectâ€™ã€‚12typeof function()&#123;&#125; === 'object' //falsetypeof function()&#123;&#125; === 'function' //true æ²¡é”™ï¼Œå°±æ˜¯â€™functionâ€™ã€‚çœ‹èµ·æ¥functionå°±æ˜¯å¦å¤–ä¸€ç§å†…ç½®ç±»å‹ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ã€‚ï¼šï¼‰ å€¼å’Œç±»å‹å˜é‡æ²¡æœ‰ç±»å‹ï¼Œå€¼æ‰æœ‰ç±»å‹JavaScriptä¸­çš„å˜é‡æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œåªæœ‰å€¼æ‰å…·æœ‰ç±»å‹ï¼Œå˜é‡å¯ä»¥éšæ—¶æŒæœ‰ä»»ä½•ç±»å‹çš„å€¼ã€‚å‰é¢æåˆ°è¿‡ï¼ŒJavaScriptæ˜¯ä¸€é—¨åŠ¨æ€å¼±ç±»å‹çš„è¯­è¨€ã€‚ä¾‹å¦‚ï¼šå˜é‡aæŒæœ‰çš„å€¼ä¸º42ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼çš„ç±»å‹ä¸ºnumberï¼Œå¹¶ä¸”æ— æ³•ç›´æ¥æ›´æ”¹42çš„ç±»å‹ï¼ˆnumberï¼‰ï¼Œä½†å¯ä»¥é€šè¿‡å¼ºåˆ¶è½¬æ¢å°†è¿™42è½¬æ¢ä¸ºâ€™42â€™ï¼Œæ­¤æ—¶å€¼æ‹¥æœ‰çš„ç±»å‹å°±ä¸ºå­—ç¬¦ä¸²ï¼ˆstring)ã€‚ undefined and undeclaredå˜é‡æœªæŒæœ‰å€¼æ—¶ä¸ºundefinedï¼Œæ­¤æ—¶typeofè¿”å›â€™undefinedâ€™ã€‚å·²åœ¨ä½œç”¨åŸŸä¸­å£°æ˜ä½†æœªèµ‹å€¼çš„æ¯”å˜é‡æ˜¯undefinedçš„ï¼Œæœªåœ¨ä½œç”¨åŸŸå£°æ˜è¿‡çš„å˜é‡æ˜¯undeclaredçš„ã€‚123let a;a; //undefinedb; //ReferenceError:b is not definedï¼ŒæŠ¥é”™ æ¯æ¬¡çœ‹åˆ°â€œnot definedâ€,æ€»ä»¥ä¸ºç­‰ä»·äºâ€undefinedâ€ï¼ŒçœŸè®©äººç³Ÿå¿ƒï¼Œè¿˜æœ‰æ›´ç³Ÿå¿ƒçš„ï¼šï¼‰123let a;typeof a; //undefinedtypeof b; //undefined ä¸€å‘è¢«è®¤ä¸ºæ¯”è¾ƒå®‰å…¨çš„æ“ä½œç¬¦typeofä¹Ÿä¼šè¿™æ ·é—¹ç€ç©ï¼šï¼‰æ³¨ï¼šæ¨èä¸€æœ¬å¿…çœ‹çš„ä¹¦ã€ŠJavaScriptè¯­è¨€ç²¾ç²¹ã€‹ï¼Œä½œè€…æ˜¯Douglas Crockfordï¼ˆå¤§ç¥ï¼‰ã€‚ å®‰å…¨é˜²èŒƒæœºåˆ¶å¹¶ä¸æ˜¯æ²¡æœ‰åŠæ³•è®©å¼€å‘äººå‘˜è§£å†³â€™undeclaredâ€™é—®é¢˜ï¼Œæœ‰æ—¶å€™é€šè¿‡typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶ï¼ˆé˜»æ­¢æŠ¥é”™ï¼‰æ¥æ£€æŸ¥undeclaredå˜é‡ä¸å¤±ä¸ºä¸€ä¸ªæ–¹æ³•ã€‚å½“ä¸€ä¸ªçª—å£åŠ è½½å¤šä¸ª.jsæ–‡ä»¶æ—¶ï¼Œè¿™äº›.jsæ–‡ä»¶ä¸­çš„ä»£ç ä¼šå…±äº«ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æœæœ‰é‡åçš„å˜é‡åï¼Œé‚£ä¹ˆå°±å¤ªå¯æ€•äº†â€¦â€¦å‡å°‘å…¨å±€å˜é‡æ˜¯ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç çš„åŸºç¡€ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½åº”è¯¥è¢«å°è£…åˆ°æ¨¡å—æˆ–è€…ç§æœ‰/ç‹¬ç«‹çš„å‘½åç©ºé—´é‡Œã€‚ä¾‹å¦‚ï¼šè°ƒè¯•æ¨¡å¼ä¸‹ï¼Œåœ¨debug.jså£°æ˜äº†ä¸€ä¸ªDEBUGçš„å…¨å±€å˜é‡ï¼ŒæŠŠå®ƒä½œä¸ºè°ƒè¯•æ¨¡å¼çš„å¼€å…³ï¼Œåœ¨è¾“å‡ºè°ƒè¯•ä¿¡æ¯æ—¶æˆ‘ä»¬ä¼šå…ˆåˆ¤æ–­DEBUGæ˜¯å¦å·²ç»è¢«å£°æ˜ã€‚å¯æ˜¯å¦‚ä½•åœ¨ç¨‹åºä¸­æ£€æŸ¥å…¨å±€å˜é‡DEBUGä¸”ä¸ä¼šå‡ºç°ReferenceErroré”™è¯¯å‘¢ï¼Ÿtypeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶å°±æˆäº†æˆ‘ä»¬çš„å¸®æ‰‹12345678//è¿™æ ·åšæ˜¯è¦æŒ¨Errorçš„if (DEBUG) &#123; console.log("è°ƒè¯•å¼€å§‹å•°");&#125;//è¿™æ ·å°±æ¯”è¾ƒå®‰å…¨äº†if (typeof DEBUG !== "undefined") &#123; console.log("è°ƒè¯•å¼€å§‹å•°")&#125; ä¸ä»…å¯¹äºè‡ªå®šä¹‰çš„å˜é‡æœ‰ç”¨ï¼Œå¯¹äºå†…å»ºçš„APIä¹Ÿæœ‰å¸®åŠ©ã€‚ç”šè‡³ä¸ä¸€å®šè¦æ±‚ä½œç”¨åŸŸä¸ºå…¨å±€ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ£€æŸ¥æˆ‘ä»¬çš„å˜é‡æ˜¯å¦åœ¨å®¿ä¸»ä½œç”¨åŸŸå£°æ˜è¿‡ã€‚ è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯æ£€æŸ¥æ‰€æœ‰å…¨å±€å˜é‡æ˜¯å¦æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œæµè§ˆå™¨çš„å…¨å±€å¯¹è±¡æ˜¯windowï¼ŒæœåŠ¡å™¨ç«¯çš„å…¨å±€å¯¹è±¡ä¸ºglobalã€‚ä¸Šè¿°çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š123if (window.DEBUG) &#123; //...&#125; è®¿é—®ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§ä¸undeclaredå˜é‡ä¸åŒï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚ å…³äºå‚è€ƒæ–‡çŒ®ï¼šã€Šä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸­å·ï¼‰ã€‹ã€ŠJavaScriptè¯­è¨€ç²¾ç²¹ã€‹]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¸­çš„ç»§æ‰¿æ–¹å¼]]></title>
    <url>%2F2018%2F02%2F03%2Finherit-in-js%2F</url>
    <content type="text"><![CDATA[å¼•å…¥ç»§æ‰¿æ˜¯OOPçš„æ ¸å¿ƒå†…å®¹ä¹‹ä¸€ã€‚JavaScriptä¸­å¸¸è§ç»§æ‰¿æ–¹å¼ä¸ºï¼šç±»å¼ç»§æ‰¿ã€æ„é€ å‡½æ•°å¼ç»§æ‰¿ã€ç»„åˆå¼ç»§æ‰¿ã€åŸå‹å¼ç»§æ‰¿ã€å¯„ç”Ÿå¼ç»§æ‰¿ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ã€‚ ç±»å¼ç»§æ‰¿ç±»å¼ç»§æ‰¿ï¼Œé€šè¿‡å­ç±»çš„åŸå‹prototypeå¯¹çˆ¶ç±»çš„å®ä¾‹åŒ–å®ç°ã€‚ç”±äºå­ç±»é€šè¿‡å…¶åŸå‹prototypeå¯¹çˆ¶ç±»å®ä¾‹åŒ–ç»§æ‰¿äº†çˆ¶ç±»ï¼Œæ‰€ä»¥çˆ¶ç±»ä¸­çš„å…±æœ‰å±æ€§è¦æ˜¯å¼•ç”¨ç±»å‹å°±ä¼šåœ¨å­ç±»ä¸­è¢«æ‰€æœ‰å®ä¾‹å…±ç”¨ã€‚ç”±äºå­ç±»å®ç°çš„ç»§æ‰¿æ˜¯é å…¶åŸå‹prototypeå¯¹çˆ¶ç±»çš„å®ä¾‹åŒ–å®ç°çš„ï¼Œå› æ­¤åœ¨åˆ›å»ºçˆ¶ç±»æ—¶æ˜¯æ— æ³•å‘çˆ¶ç±»ä¼ é€’å‚æ•°çš„ï¼Œå› è€Œåœ¨å®ä¾‹åŒ–çˆ¶ç±»æ—¶æ— æ³•å¯¹çˆ¶ç±»æ„é€ å‡½æ•°å†…çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚123456789101112131415161718//å£°æ˜çˆ¶ç±»function SuperClass() &#123; this.superValue = true;&#125;//ä¸ºçˆ¶ç±»æ·»åŠ å…±æœ‰æ–¹æ³•SuperClass.prototype.getsuperValue = function() &#123; return this.superValue;&#125;//å£°æ˜å­ç±»function SubClass() &#123; this.subValue = false;&#125;//ç»§æ‰¿çˆ¶ç±»ï¼ˆSubClass.prototype = new SuperClass();//ä¸ºå­ç±»æ·»åŠ å…±æœ‰æ–¹æ³•SubClass.prototype.getsubValue = function () &#123; return this.subValue;&#125; æ„é€ å‡½æ•°å¼ç»§æ‰¿æ„é€ å‡½æ•°ç»§æ‰¿ï¼Œé€šè¿‡åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä½œç”¨ç¯å¢ƒä¸­æ‰§è¡Œä¸€æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å®ç°ï¼›ç”±äºæ²¡ç”¨æ¶‰åŠprototypeï¼Œæ‰€ä»¥çˆ¶ç±»çš„åŸå‹æ–¹æ³•ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ã€‚è¦æƒ³è¢«å­ç±»ç»§æ‰¿ï¼Œå°±å¾—æŠŠå±æ€§å’Œå‡½æ•°æ”¾åˆ°çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¹¶ä¸”åˆ›å»ºå‡ºæ¥çš„ï¼ˆå­ç±»çš„ï¼‰å®ä¾‹éƒ½ä¼šå•ç‹¬æ‹¥æœ‰ä¸€ä»½ï¼Œè¿èƒŒäº† â€œä»£ç å¤ç”¨â€ã€‚12345678910111213141516//å£°æ˜çˆ¶ç±»function SuperClass(id) &#123; //å¼•ç”¨ç±»å‹å…±æœ‰å±æ€§ this.books = ['JavaScript', 'html', 'css']; //å€¼ç±»å‹å…±æœ‰å±æ€§ this.id = id;&#125;//çˆ¶ç±»å£°æ˜åŸå‹æ–¹æ³•SuperClass.prototype.showBooks = function() &#123; console.log(this.books);&#125;//å£°æ˜å­ç±»function SubClass(id) &#123; //ç»§æ‰¿çˆ¶ç±» SuperClass.call(this, id); //å°†å­ç±»çš„å˜é‡åœ¨çˆ¶ç±»ä¸­éƒ½æ‰§è¡Œä¸€éï¼Œçˆ¶ç±»ä¸­æ˜¯ç»™thisç»‘å®šå±æ€§çš„ï¼Œæ‰€ä»¥é€šè¿‡callå°±ä½¿å¾—å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„å…±æœ‰å±æ€§ã€‚&#125; ç»„åˆç»§æ‰¿ç»„åˆç»§æ‰¿ï¼Œå°†ç±»å¼ç»§æ‰¿å’Œæ„é€ å‡½æ•°å¼ç»§æ‰¿ç»¼åˆï¼Œæ„é€ å‡½æ•°ç»§æ‰¿æ—¶æ‰§è¡Œäº†ä¸€éçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨å®ç°å­ç±»åŸå‹çš„ç±»å¼ç»§æ‰¿åˆè°ƒç”¨ä¸€éçˆ¶ç±»æ„é€ å‡½æ•°ã€‚12345678910111213141516171819function SuperClass(name) &#123; this.name = name; this.books = ["javascript", "html", "css"];&#125;SuperClass.prototype.getName = function () &#123; return this.name;&#125;function SubClass(name, time) &#123; //æ„é€ å‡½æ•°å¼åŸºç¡€çˆ¶ç±»nameå±æ€§ SuperClass.call(this, name); //å­ç±»æ–°å¢å…±æœ‰å±æ€§ this.time = time;&#125;//ç±»å¼ç»§æ‰¿ å­ç±»åŸå‹ç»§æ‰¿çˆ¶ç±»SubClass.prototype = new SuperClass();//å­ç±»åŸå‹æ–¹æ³•SubClass.prototype.getTime = function () &#123; return this.time;&#125; åŸå‹å¼ç»§æ‰¿åŸå‹å¼ç»§æ‰¿ï¼Œå€ŸåŠ©åŸå‹prototypeå¯ä»¥æ ¹æ®å·²æœ‰çš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸å¿…åˆ›å»ºæ–°çš„è‡ªå®šä¹‰å¯¹è±¡ç±»å‹ã€‚123456789//å¯¹ç±»å¼ç»§æ‰¿çš„å°è£…function inheritObejct(o) &#123; //å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å‡½æ•°å¯¹è±¡ function F() &#123;&#125; //è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ F.prototype = o; //è¿”å›è¿‡æ¸¡å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œ è¯¥å¯¹è±¡çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡ return new F();&#125; åŸºäºè¿™ç§åœ¨å¯¹è±¡ä¹‹é—´ç›´æ¥æ„å»ºç»§æ‰¿å…³ç³»çš„ç†å¿µï¼ŒDCå¤§ç¥ç»™å‡ºäº†ä¸Šè¿°çš„å‡½æ•°ï¼Œè¿™ä¸ªinheritObjectå‡½æ•°åæ¥è¢«ES5é‡‡çº³ï¼Œæ›´åä¸ºObject.create()ã€‚ å¯„ç”Ÿå¼ç»§æ‰¿å¯„ç”Ÿå¼ç»§æ‰¿,å¯¹åŸå‹ç»§æ‰¿çš„ç¬¬äºŒæ¬¡å°è£…ï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­å¯¹ç»§æ‰¿çš„å¯¹è±¡è¿›è¡Œäº†æ‹“å±•ã€‚123456789101112131415//å£°æ˜åŸºå¯¹è±¡let book = &#123; name: 'js book', alikeBook: ["css book", "html book","html book"]&#125;;function createBook(obj) &#123; //é€šè¿‡åŸå‹ç»§æ‰¿æ–¹å¼åˆ›å»ºæ–°å¯¹è±¡ let o = new inheritObejct(obj); //æ‹“å±•æ–°å¯¹è±¡ o.getName = function() &#123; return name; &#125; //è¿”å›æ‹“å±•åçš„æ–°å¯¹è±¡ return o;&#125; å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿è¿™é‡Œçš„å¯„ç”Ÿç»§æ‰¿å¤„ç†çš„æ˜¯ç±»çš„åŸå‹12345678910111213141516171819202122232425262728293031function inhreitPrototype(SubClass, SuperClass) &#123; //å¤åˆ¶ä¸€ä»½çˆ¶ç±»çš„åŸå‹å‰¯æœ¬ä¿å­˜åœ¨å˜é‡ä¸­ let p = inheritObejct(SuperClass.prototype); //ä¿®æ­£å› ä¸ºé‡å†™å­ç±»åŸå‹å¯¼è‡´å­ç±»çš„constructorå±æ€§è¢«ä¿®æ”¹ p.constructor = SubClass; //è®¾ç½®å­ç±»çš„åŸå‹ SubClass.prototype = p;&#125;//å®ä¾‹//å®šä¹‰çˆ¶ç±»function SuperClass(name) &#123; this.name = name; this.colors = ["red", "blue", "green"];&#125;//å®šä¹‰çˆ¶ç±»çš„åŸå‹æ–¹æ³•SuperClass.prototype.getName = function() &#123; return this.name;&#125;//å®šä¹‰å­ç±»function SubClass(name, time) &#123; //æ„é€ å‡½æ•°å¼ç»§æ‰¿ SuperClass.call(this,name); //å­ç±»æ–°å¢å±æ€§ this.time = time;&#125;/*å¯„ç”Ÿå¼ç»§æ‰¿çˆ¶ç±»åŸå‹*/inhreitPrototype(SubClass, SuperClass);/*å­ç±»æ–°å¢åŸå‹æ–¹æ³•*/SubClass.prototype.getTime = function () &#123; return this.time;&#125; extendä¸deepCopyåœ¨JavaScriptä¸­ç»§æ‰¿æ˜¯ä¾èµ–äºåŸå‹prototypeé“¾å®ç°çš„ï¼Œåªæœ‰ä¸€æ¡åŸå‹é“¾ï¼Œç†è®ºä¸Šä¸èƒ½ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚ä½†æ˜¯ç”±äºJavaScriptæ˜¯ä¸€é—¨å¾ˆçµæ´»çš„è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯æ˜¯è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªç»§æ‰¿å¤šå¯¹è±¡å±æ€§çš„å‡½æ•°ã€‚ åŸå‹é“¾å®šä¹‰JavaScriptä¸­æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘æŸä¸€å¯¹è±¡çš„prototypeå±æ€§ï¼Œè¯¥å‡½æ•°è¢«newæ“ä½œç¬¦è°ƒç”¨æ—¶ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›çš„å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªæŒ‡å‘å…¶åŸå‹å¯¹è±¡çš„protoå±æ€§ï¼Œå¼•æ“åœ¨èƒŒåé€šè¿‡è¿ç”¨protoå¯ä»¥ä½¿å¾—æ–°å»ºçš„å¯¹è±¡å¯ä»¥è°ƒç”¨ç›¸å…³åŸå‹çš„å¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚åŸå‹å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æœ¬èº«ä¹ŸåŒ…å«äº†æŒ‡å‘å…¶åŸå‹çš„proto,ç”±æ­¤å°±å½¢æˆäº†ä¸€æ¡é“¾ï¼Œç§°ä¹‹ä¸ºåŸå‹é“¾ã€‚ ä½œç”¨å¦‚å›¾ï¼Œæœ‰äº†åŸå‹é“¾ï¼Œå¦‚æœæŸä¸ªå±æ€§åœ¨å¯¹è±¡Bä¸­è€Œä¸åœ¨å¯¹è±¡Aä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æŠŠè¿™ä¸ªå±æ€§å½“ä½œAçš„å±æ€§æ¥è®¿é—®ã€‚è¿™å°±æ˜¯ç»§æ‰¿çš„ä½œç”¨ï¼Œå®ƒå¯ä»¥ä½¿å¾—æ¯ä¸ªå¯¹è±¡éƒ½èƒ½è®¿é—®å…¶ç»§æ‰¿é“¾ä¸Šçš„ä»»ä½•å±æ€§ã€‚ ç»§æ‰¿å•å¯¹è±¡å±æ€§çš„extendæ–¹æ³•ï¼ˆé’ˆå¯¹å€¼ç±»å‹çš„å±æ€§ï¼‰123456function extend(child, parent) &#123; for (let prop in parent) &#123; child[prop] = parent[prop]; &#125; return child;&#125; ç»§æ‰¿å¤šå¯¹è±¡çš„å±æ€§12345678910111213function mix() &#123; let i = 1, len = arguments.length, child = arguments[0], arg; for(; i &lt; len; i++) &#123; arg = arguments[i]; for( let prop in arg) &#123; child[prop] = arg[prop]; &#125; &#125; return child;&#125; æ·±æ‹·è´åœ¨JavaScriptä¸­å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡çš„å±æ€§ä¸ºå€¼ç±»å‹åˆ™åªéœ€è¦ç®€å•çš„èµ‹å€¼è¯­å¥å³å¯ï¼Œå¦‚æœå±æ€§ä¸ºå¼•ç”¨ç±»å‹ï¼Œåˆ™éœ€è¦ä¾æ¬¡å¤åˆ¶è¯¥å±æ€§çš„å±æ€§ï¼Œè¿™é‡Œé‡‡ç”¨é€’å½’çš„æ€æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ï¼ˆå¦‚æœä¸ä½¿ç”¨é€’å½’ï¼Œåˆ™é€šè¿‡JSONè§£æè§£å†³ï¼‰ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°±è¢«å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æŸä¸ªç‰©ç†ä½ç½®ï¼Œç›¸å…³çš„å˜é‡å’Œå±æ€§å°±ä¼šæŒ‡å‘è¿™äº›ä½ç½®ã€‚ åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶è®©å˜é‡AæŒ‡å‘è¯¥å¯¹è±¡ã€‚ åˆ›å»ºä¸€ä¸ªæ–°å˜é‡Bï¼Œå¹¶è®¾ç½®å…¶ä¸Aç›¸ç­‰ï¼Œæ­¤æ—¶Bå’ŒAæŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªåœ°å€ã€‚ ä¿®æ”¹å˜é‡Bæ‰€æŒ‡çš„å¯¹è±¡çš„colorå±æ€§ï¼Œå°†å®ƒè®¾ç½®ä¸ºâ€whiteâ€,æ­¤æ—¶A.color çš„å€¼ä¹Ÿä¸ºâ€whiteâ€ã€‚ å†åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè®©å˜é‡BæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼ŒAå’ŒBæ­¤æ—¶æŒ‡å‘äº†å†…å­˜ä¸­ä¸åŒçš„ä½ç½®ï¼ŒAã€Bä»æ­¤å†æ— å…³è”ã€‚å…·ä½“å®ç°1234567891011121314function deepCopy(parent, child) &#123; child = child || &#123;&#125;; for (let prop in parent) &#123; if (parent.hasOwnProperty(prop)) &#123; if (typeof parent[prop] === 'object') &#123; child[i] = Array.isArray(parent[prop])? [] : &#123;&#125;; deepCopy( parent[prop], child); &#125; else &#123; child[prop] = parent[prop]; &#125; &#125; &#125; return child;&#125; æ€»ç»“ å…³äºå‚è€ƒæ–‡çŒ®ï¼šã€ŠJavaScripté¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡å—ã€‹ã€ŠJavaScriptè®¾è®¡æ¨¡å¼ã€‹ã€Šä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šå·ï¼‰ã€‹]]></content>
      <categories>
        <category>JavaScriptè®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F02%2F03%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
  <entry>
    <title><![CDATA[about]]></title>
    <url>%2Fabout%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[åˆ†ç±»]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[tags]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
