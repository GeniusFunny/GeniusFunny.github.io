<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            从0到1了解浏览器原理 | 
        
        GeniusFunny的个人博客
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
        <link rel="dns-prefetch" href="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js">
    
    
    
        <link rel="dns-prefetch" href="https://hm.baidu.com">
    
    
    
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="GeniusFunny">
    <meta name="description" itemprop="description" content="这是一篇讲解浏览器原理的文章，参考后续补上；内容都是自己的笔记">
    <meta name="keywords" content="JavaScript,渲染原理,浏览器内核">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="https://s1.ax1x.com/2020/03/24/8OkaTA.png">
    <link rel="icon" sizes="192x192" href="https://s1.ax1x.com/2020/03/24/8OkaTA.png">
    <link rel="apple-touch-icon" href="https://s1.ax1x.com/2020/03/24/8OkaTA.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="GeniusFunny的个人博客">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="geniusfunny.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="从0到1了解浏览器原理 | GeniusFunny的个人博客">
    <meta property="og:image" content="https://s1.ax1x.com/2020/03/24/8OkaTA.png">
    <meta property="og:description" content="这是一篇讲解浏览器原理的文章，参考后续补上；内容都是自己的笔记">
    <meta property="og:article:tag" content="渲染原理"> <meta property="og:article:tag" content="浏览器内核"> 

    
        <meta property="article:published_time" content="1月 16, 2020">
        <meta property="article:modified_time" content="3月 24, 2020">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="从0到1了解浏览器原理 | GeniusFunny的个人博客">
    <meta name="twitter:description" content="这是一篇讲解浏览器原理的文章，参考后续补上；内容都是自己的笔记">
    <meta name="twitter:image" content="https://s1.ax1x.com/2020/03/24/8OkaTA.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="geniusfunny.github.io">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="geniusfunny.github.io/2020/01/16/explore-browser/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "GeniusFunny的个人博客",
        "logo": "https://s1.ax1x.com/2020/03/24/8OkaTA.png"
    },
    "author": {
        "@type": "Person",
        "name": "GeniusFunny",
        "image": {
            "@type": "ImageObject",
            "url": "https://s1.ax1x.com/2020/03/24/8OkaTA.png"
        },
        "description": "Stay Hungry, Stay Foolish."
    },
    "headline": "从0到1了解浏览器原理",
    "url": "geniusfunny.github.io/2020/01/16/explore-browser/index.html",
    "datePublished": "1月 16, 2020",
    "dateModified": "3月 24, 2020",
    "description": "这是一篇讲解浏览器原理的文章，参考后续补上；内容都是自己的笔记",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "geniusfunny.github.io"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    .footer-sns-twitter {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHptNTMyLjggMjA1YzEwIDQgMjMgMTAuOCAyOC44IDE1LjIgMTIuNiA5LjIgMTYuNiAxMC42IDI5LjQgOS40IDYuNi0uNiAxMy0zLjIgMjAuNC04LjIgMTEuMi03LjYgMTkuNC05LjIgMjMuNi01IDMuNiAzLjYgMi44IDktMi44IDE4LjYtNy4yIDEyLjQtNiAxOC44IDQuMiAyNC4yIDQuNCAyLjIgOC4yIDUuNiA4LjYgNy40IDEgNC44LTEyLjYgMjQuMi0yMiAzMS44LTExLjggOS4yLTE3LjIgMjIuNi0xOS42IDQ3LjgtNC44IDUwLjQtNy44IDY2LjYtMTYuNCA4NS40LTMgNy03IDE3LjgtOC44IDI0LTEuOCA2LjQtNSAxNC42LTcuNCAxOC40LTIuMiAzLjgtNy40IDEzLTExLjQgMjAuNC0xNy4yIDMwLjgtNDMuNCA2MS40LTcxLjQgODMuOC0yNS42IDIwLjQtNDYgMzMuMi02NC4yIDQwLjItOC40IDMuMi0xOCA3LjYtMjEuNCA5LjYtNy40IDQuNi0yMi40IDguNi01Ny4yIDE1LTYyLjIgMTEuNi03OS4yIDExLjQtMTM1LjYtMS0zMi40LTctMzguNi05LTUyLTE2LjgtMjEuNC0xMi42LTI0LjItMTQuOC0yNC4yLTE5LjQgMC02LjIgMTAuMi05LjIgMzUtMTAuNCAyMi40LTEgMjguNi0yLjYgNTctMTQuMiAyMy44LTkuOCAyOS40LTEyLjggMzAuNC0xNi44IDIuMi04LjItMy0xMy4yLTI2LjgtMjUuNC0yNS44LTEzLjItMzIuMi0xOC40LTQzLjgtMzUuOC05LTEzLjYtMTAtMjEuMi0zLjYtMzMuNiA1LjQtMTAuOCAzLjYtMTUtMTEuOC0yNS40LTktNi0xNC0xMS42LTIwLjgtMjIuNi0yMy40LTM3LjgtMjUtNTAuOC03LjItNTkuOCA0LjgtMi40IDkuNC01LjQgMTAuMi02LjYgMi44LTQuMi0uNC0xNS42LTguNC0yOS0xMS42LTE5LjYtMTMuMi0yNS44LTEzLjItNTUuMiAwLTI4LjggMi42LTM3LjggMTItNDAuMiA5LTIuMiAxNC44IDEgMzUuNiAyMC4yIDI0LjggMjIuOCA0My42IDM2LjYgNjIuOCA0NS44IDggMy44IDE3LjggOS4yIDIyIDEyIDQuMiAyLjggMTQuOCA3IDIzLjQgOS4yIDguNiAyLjIgMjQuMiA2LjggMzQuOCAxMC4yIDEzLjQgNC40IDIzLjYgNi40IDMzIDYuNiAxMi44LjIgMTQuMi0uMiAxOC42LTUuNCA0LTQuOCA0LjgtNy44IDQuOC0xOS4yIDAtMTQuNCA1LjYtMzkuNiAxMS4yLTUwLjYgNC4yLTguNCAyOS4yLTM0LjIgMzkuOC00MS40IDcuOC01LjQgMzUuNi0xNiA1Mi0yMCAxNC4yLTMuNiAzMi42LTEuMiA1Mi40IDYuOHoiLz48L3N2Zz4=);
    }
    
    
    
    
    
    
    .footer-sns-github {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNCA3OGMtNi40IDEuNC0yNi40IDE0LjItMzYgMjIuOC04IDcuMi0yMiAyOS44LTI0LjQgMzkuMi0xLjYgNi40LTIgMTEzLjItMS42IDM2OCAuNiAyOTkuNCAxIDM1OS44IDMuNCAzNjQgMTEgMjAuMiAyMS42IDMyLjQgMzcuMiA0MyAxNS42IDEwLjYgMTcuMiAxMS4yIDM0LjIgMTMuMiAxMC42IDEuMiA2My40IDEuNiAxMjcuNiAxLjRsMTA5LjYtLjYgNi02LjggNi4yLTYuOC0xLjItMjUuMmMtLjgtMTUuOC0uMi0zMy40IDEuNC00Ny4yIDMtMjUuNCAxLjQtMzYuMi02LTQzLjItNS00LjYtNi4yLTQuOC0zMC42LTQuMi0yNy42LjgtMjQgMS42LTY4LjgtMTYtOC42LTMuNC0yMi42LTE4LTI4LjQtMjkuOC0xMS40LTIyLjgtMjctNDUtMzkuMi01NS42LTE0LTEyLjItMTkuOC0yMC44LTE5LjgtMjguNiAwLTExLjYgMTMuNi0xMi42IDMzLjItMi40IDE2LjYgOC44IDIwLjggMTIuNCA0MC44IDM2LjIgMjQuMiAyOC42IDMxIDMzLjYgNTQgMzkuNiAxNS4yIDQgNDIuMiAzIDUxLjQtMS44IDktNC42IDE4LTE1LjIgMjQuNC0yOS4yIDExLjQtMjQuMiA3LjQtMzEuMi0yMC42LTM2LjgtOS44LTItMjkuMi04LTQzLjQtMTMuNC00MC40LTE1LjgtNjQuNi0zNy40LTg1LjQtNzYuMi0xMS42LTIxLjgtMTUuNC0zMy0xOC4yLTUzLjYtNC4yLTMyLjItNC44LTYwLjItMS40LTg0IDMuNC0yMy44IDYuOC0zMi44IDIwLjItNTQgNC02IDguOC0xNS42IDExLTIxLjQgMy44LTEwIDMuOC0xMS42IDEtMzAtNS4yLTM0LjItMy4yLTUyLjQgNy42LTcwLjIgNy4yLTEyLjIgMTUtMTcuMiAyNC4yLTE1LjggMTIuOCAyLjIgNTIgMTcuNCA2Ni44IDI2LjIgMjYgMTUgMjkgMTUuNCA4Mi40IDcuMiAyNC42LTMuOCAzMy44LTQuMiA2MC0zLjIgMTcgLjYgNDEuNCAzIDU0IDUuMiAzOC40IDYuNiA0OS42IDUuMiA3My0xMCA2LjYtNC4yIDE3LjQtOS40IDI0LTExLjYgNi42LTIuMiAxNi01LjggMjEtOC4yIDEzLTYgMjgtNS42IDM1LjYuOCAxMi40IDEwLjQgMTguNiA0MS40IDE0LjQgNzEuNi00LjQgMzAuNi0zIDM5LjQgOC40IDUzLjggMy40IDQuNCAxMS4yIDE5LjIgMTcuNCAzMy4yTDc3NSA0NDN2NzhsLTEwIDI4Yy0xNS4yIDQzLjItMzYuOCA3My4yLTY2LjIgOTIuOC0xMy40IDguOC01NyAyNS40LTc2LjggMjktMjguMiA1LjItMzMuMiAxMi42LTIyIDMyLjIgMTEuMiAxOS40IDEyLjQgMzIuOCAxMS42IDEyOS42bC0uNiA4NS44IDUuNCA0LjZjMy42IDMgOS4yIDUuMiAxNiA2IDUuOC44IDYwLjIgMSAxMjAuNi42IDEwOC40LS42IDExMC4yLS42IDExOS01IDI0LTExLjYgNDAtMjcuNCA1MS42LTUwLjZsNS40LTExIC42LTM0N2MuNC0yMjMtLjItMzUzLjQtMS40LTM2NS0yLTE3LTIuNi0xOC42LTEzLTM0LTEwLjYtMTUuNC0yMi44LTI2LjItNDMuMi0zNy4yLTQuMi0yLjQtNjQuNi0yLjgtMzY2LTMuMi0xOTguNiAwLTM2NCAuNC0zNjcuNiAxLjR6Ii8+PC9zdmc+);
    }
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(https://s1.ax1x.com/2020/03/24/8OF5se.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器的多进程架构"><span class="post-toc-number">1.</span> <span class="post-toc-text">浏览器的多进程架构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#chrome"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">chrome</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Site-Isolation"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">Site Isolation</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#多进程优缺点"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">多进程优缺点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#浏览器导航流程"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">浏览器导航流程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#从浏览器主页前往某一网站"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">从浏览器主页前往某一网站</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#从某页面跳转到另一页面"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">从某页面跳转到另一页面</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Service-Worker"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">Service Worker</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#参考资源"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">参考资源</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器内核的多线程架构"><span class="post-toc-number">2.</span> <span class="post-toc-text">浏览器内核的多线程架构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GUI渲染线程"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">GUI渲染线程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#JavaScript引擎线程"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">JavaScript引擎线程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#为什么JavaScript是单线程的？"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">为什么JavaScript是单线程的？</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#GUI-渲染线程-与-JavaScript引擎线程互斥？"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">GUI 渲染线程 与 JavaScript引擎线程互斥？</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#JS阻塞页面加载？"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">JS阻塞页面加载？</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#定时器触发线程"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">定时器触发线程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事件触发线程"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">事件触发线程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#异步HTTP请求线程"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">异步HTTP请求线程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#深入了解JS-Core"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">深入了解JS Core</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#参考资源-1"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">参考资源</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器渲染页面流程"><span class="post-toc-number">3.</span> <span class="post-toc-text">浏览器渲染页面流程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Parse"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Parse</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Layout"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Layout</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Paint"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Paint</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Webkit矩形缓存"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">Webkit矩形缓存</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Composite"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">Composite</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#流程"><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">流程</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#优点"><span class="post-toc-number">3.4.2.</span> <span class="post-toc-text">优点</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#响应输入"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">响应输入</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#合成器相关"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">合成器相关</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#合并优化连续的事件"><span class="post-toc-number">3.6.1.</span> <span class="post-toc-text">合并优化连续的事件</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#合成器发送输入事件给主线程"><span class="post-toc-number">3.6.2.</span> <span class="post-toc-text">合成器发送输入事件给主线程</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#参考资源-2"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">参考资源</span></a></li></ol></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                从0到1了解浏览器原理
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="https://i.loli.net/2020/03/26/X1FxQlLtRbVEANi.png" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>GeniusFunny</strong>
        <span>1月 16, 2020</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACYklEQVR42u3aUbKCMAwFUPa/6fcW4IA3KY3onH4xqJDTD9O57fH30+PAw8PDw8PDw8N7GO+Ix+uvXp/w5sUv3zy7XqoNDw8Pb4SXlHV9/7q46m9XasPDw8Ob5J394V5fn33/uuiV9vNmWvHw8PAeyYteU1w6J80DDw8P7zd4yafXbePRjQEPDw9vOYzI8dW//kdkLXh4eHgxL99kmr8e3d/Dw8PDC3jlI03x8jdpCdeF3nDoCg8PD28Drxol5Evt6xAh+U61Hjw8PLxJ3koRvbZRjXqTKAQPDw9vkpffWVki58/J45JC38PDw8PbxstfU97ULy64cyoeHh7ep3i9QvOFbx5YVKl4eHh4k7yVoCE/WJAweiQ8PDy8z/LyiCHfrOrFsr3mgYeHh/cp3vrCd30KVsJcPDw8vEle3gDyqeltjPUiEjw8PLwZXmGpGkcPOSCPNgp38PDw8EZ41Uii2gbyKcsZZwMPDw9vkpc/rvCyIj5pP4UNMDw8PLwNvGowkTNWDmn1mgceHh7eDC8vpVdiL4bI20+57+Hh4eHdyssPRVUXzfsOKCxlLXh4eHg38XphbnXDrBo0NA9d4eHh4Y3wElJvYd1bdpdrwMPDw9vMq44kUKgGHPkhg2gq8fDw8DbzjnjcELAGW2j5RJw+Bw8PD2+Elxd618J6PQppHh3Aw8PDu5WXb1wlE5REvTkjaQl4eHh4T+atb3r1ooco+MDDw8P7Wl5yLKAXeTTDCDw8PLwNvDyQ7YUL1Zg4v4+Hh4c3z8sjgN2YQuiQx7h4eHh4t/J+b+Dh4eHh4eHh4T1g/AOJkWejnK0YtwAAAABJRU5ErkJggg==">
    
</ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/浏览器内核/">浏览器内核</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/渲染原理/">渲染原理</a>
    </li></ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2020/01/16/explore-browser/" class="leancloud-views_num" data-flag-title="从0到1了解浏览器原理">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=从0到1了解浏览器原理&url=geniusfunny.github.io/2020/01/16/explore-browser/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=从0到1了解浏览器原理&url=geniusfunny.github.io/2020/01/16/explore-browser/index.html&via=GeniusFunny" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=geniusfunny.github.io/2020/01/16/explore-browser/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=geniusfunny.github.io/2020/01/16/explore-browser/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=GeniusFunny的个人博客&title=从0到1了解浏览器原理&summary=Learn Once, Write Anywhere.&pics=geniusfunny.github.iohttps://s1.ax1x.com/2020/03/24/8OkaTA.png&url=geniusfunny.github.io/2020/01/16/explore-browser/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>这是一篇讲解浏览器原理的文章，参考后续补上；内容都是自己的笔记</p>
<a id="more"></a>
<h3 id="浏览器的多进程架构"><a href="#浏览器的多进程架构" class="headerlink" title="浏览器的多进程架构"></a>浏览器的多进程架构</h3><p><img src="https://static.geekbang.org/infoq/5bee5bceb417a.png" alt=""></p>
<h4 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h4><p>Chrome顶层有1个<strong>Browser Process</strong>来协调其他的进程：</p>
<ul>
<li><strong>Browser Process</strong><ul>
<li>负责地址栏、书签栏，前进后退等部分功能</li>
<li>负责浏览器底层的操作，例如读取文件/网络请求</li>
</ul>
</li>
<li>Utility Process</li>
<li>GPU Process<ul>
<li>负责GPU相关</li>
</ul>
</li>
<li>Plugin Process<ul>
<li>负责控制一个网页用到的Plugin</li>
</ul>
</li>
<li><strong>Render Process</strong><ul>
<li>负责一个Tab内关于网页呈现的所有事情【内核】</li>
<li><strong>当打开的tab过多时，后续的tab会共用之前同站点的渲染进程</strong></li>
</ul>
</li>
</ul>
<h5 id="Site-Isolation"><a href="#Site-Isolation" class="headerlink" title="Site Isolation"></a>Site Isolation</h5><p>允许在同一个tab下的跨站iframe使用单独的渲染进程来处理<strong>【安全】</strong></p>
<p><img src="https://static.geekbang.org/infoq/5bee72864411e.png" alt=""></p>
<h4 id="多进程优缺点"><a href="#多进程优缺点" class="headerlink" title="多进程优缺点"></a>多进程优缺点</h4><p><strong>优点：</strong></p>
<ul>
<li>稳定性：某一渲染进程出现问题不会影响整个浏览器</li>
<li>安全性&amp;sandbox：每个渲染进程拥有独立的内存空间，数据并不会共享（例如都包含一个v8）</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>不同进程间的内存不共享，不同进程的内存通常需要包含相同的内容【浪费内存】</li>
</ul>
<h4 id="浏览器导航流程"><a href="#浏览器导航流程" class="headerlink" title="浏览器导航流程"></a>浏览器导航流程</h4><h5 id="从浏览器主页前往某一网站"><a href="#从浏览器主页前往某一网站" class="headerlink" title="从浏览器主页前往某一网站"></a>从浏览器主页前往某一网站</h5><ul>
<li>处理输入<ul>
<li>输入query，浏览器利用搜索引擎进行Search Query</li>
<li>输入URL，浏览器导航到指定Site</li>
</ul>
</li>
<li>开始导航：<ul>
<li>UI线程显示加载圈</li>
<li>network线程开始从服务器拉去数据（执行DNS查找、建立TLS等网络I/O）</li>
</ul>
</li>
<li>读取响应<ul>
<li>根据响应Content-Type和MIME来执行不同操作<ul>
<li>若为text/html，将数据交给渲染进程进行渲染</li>
<li>若为其他媒体类型（如application/pdf），将数据交给Storage线程下载</li>
<li>…</li>
</ul>
</li>
<li>为什么有了Content-Type，还需要MIME判断？因为Content-Type有可能丢失或错误，所以需要MIME检测</li>
<li><strong>【安全点】</strong>，渲染进程会根据数据是否来自可信任的站点决定是否渲染</li>
</ul>
</li>
<li>寻找渲染进程<ul>
<li>当network线程下载数据后会通知UI线程已就绪，UI线程会寻找一个渲染进程来渲染数据</li>
<li>【<strong>优化点</strong>】，开始导航时就可以找到一个渲染进程以待渲染数据</li>
</ul>
</li>
<li>完成导航<ul>
<li>渲染进程和数据就绪后，渲染进程与浏览器进程IPC获取数据然后渲染页面</li>
<li>当所有onload事件执行完后，渲染进程会发送信号通知浏览器进程渲染完成，浏览器UI线程取消【加载中】</li>
</ul>
</li>
</ul>
<h5 id="从某页面跳转到另一页面"><a href="#从某页面跳转到另一页面" class="headerlink" title="从某页面跳转到另一页面"></a>从某页面跳转到另一页面</h5><p>在开始上述流程时，前页面还会触发<code>beforeunload</code>事件</p>
<h5 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h5><ul>
<li>有些页面还拥有 Service Worker （服务工作线程），Service Worker 让开发者对本地缓存及判断何时从网络上获取信息有了更多的控制权，如果 Service Worker 被设置为从本地 cache 中加载数据，那么就没有必要从网上获取更多数据了。</li>
<li>值得注意的是 <strong>service worker 也是运行在渲染进程中的 JS 代码</strong>，因此对于拥有 Service Worker 的页面，上述流程有些许的不同。</li>
<li>当有 Service Worker 被注册时，其作用域会被保存，当有导航时，network thread 会在注册过的 Service Worker 的作用域中检查相关域名，如果存在对应的 Service worker，UI thread 会找到一个 renderer process 来处理相关代码，Service Worker 可能会从 cache 中加载数据，从而终止对网络的请求，也可能从网上请求新的数据。</li>
<li>如果 Service Worker 最终决定通过网上获取数据，Browser 进程 和 renderer 进程的交互其实会延后数据的请求时间 。Navigation Preload 是一种与 Service Worker 并行的加速加载资源的机制，服务端通过请求头可以识别这类请求，而做出相应的处理。</li>
</ul>
<h4 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h4><h3 id="浏览器内核的多线程架构"><a href="#浏览器内核的多线程架构" class="headerlink" title="浏览器内核的多线程架构"></a>浏览器内核的多线程架构</h3><p>浏览器内核是通过取得页面内容、整理信息（应用CSS）、计算和组合最终输出可视化的图像结果，通常也被称为<strong>渲染引擎</strong>。从上面我们可以知道，Chrome浏览器为每个tab页面单独启用进程，因此每个tab网页都有由其独立的渲染引擎实例。一个浏览器内核通常分为多个线程：GUI渲染线程、JavaScript引擎线程、定时器触发线程、事件触发线程、异步HTTP请求线程。</p>
<h4 id="GUI渲染线程"><a href="#GUI渲染线程" class="headerlink" title="GUI渲染线程"></a>GUI渲染线程</h4><p>​    <strong>GUI渲染线程负责渲染浏览器界面HTML元素,当界面需要重绘(Repaint)或由于某种操作引发回流(reflow)时,该线程就会执行</strong>。在Javascript引擎运行脚本期间,GUI渲染线程都是处于挂起状态的,也就是说被”冻结”了。</p>
<h4 id="JavaScript引擎线程"><a href="#JavaScript引擎线程" class="headerlink" title="JavaScript引擎线程"></a>JavaScript引擎线程</h4><p>​    JavaScript引擎也可以称为JS内核，主要负责处理Javascript脚本程序，例如V8引擎。Javascript引擎线程理所当然是负责解析Javascript脚本，运行代码。</p>
<h5 id="为什么JavaScript是单线程的？"><a href="#为什么JavaScript是单线程的？" class="headerlink" title="为什么JavaScript是单线程的？"></a>为什么JavaScript是单线程的？</h5><p>答：JavaScript为处理页面中用户的交互，以及操作DOM树、CSS样式树来给用户呈现一份动态而丰富的交互体验和服务器逻辑的交互处理。如果JavaScript是多线程的方式来操作这些UI DOM，则可能出现UI操作的冲突； 如果Javascript是多线程的话，在多线程的交互下，处于UI中的DOM节点就可能成为一个<strong>临界资源</strong>，假设存在两个线程同时操作一个DOM，一个负责修改一个负责删除，那么这个时候就需要浏览器来裁决如何生效哪个线程的执行结果。当然我们可以通过锁来解决上面的问题。但为了避免因为引入了锁而带来更大的复杂性，Javascript在最初就选择了单线程执行。</p>
<h5 id="GUI-渲染线程-与-JavaScript引擎线程互斥？"><a href="#GUI-渲染线程-与-JavaScript引擎线程互斥？" class="headerlink" title="GUI 渲染线程 与 JavaScript引擎线程互斥？"></a>GUI 渲染线程 与 JavaScript引擎线程互斥？</h5><p>答：由于JavaScript是可操纵DOM的，如果在修改这些元素属性同时渲染界面（即JavaScript线程和UI线程同时运行），那么渲染线程前后获得的元素数据就可能不一致了。因此为了防止渲染出现不可预期的结果，浏览器设置GUI渲染线程与JavaScript引擎为互斥的关系，当JavaScript引擎执行时GUI线程会被挂起，GUI更新会被保存在一个队列中等到引擎线程空闲时立即被执行。</p>
<h5 id="JS阻塞页面加载？"><a href="#JS阻塞页面加载？" class="headerlink" title="JS阻塞页面加载？"></a>JS阻塞页面加载？</h5><p>答：由于GUI渲染线程与JavaScript执行线程是互斥的关系，当浏览器在执行JavaScript程序的时候，GUI渲染线程会被保存在一个队列中，直到JS程序执行完成，才会接着执行。因此如果JS执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。</p>
<h4 id="定时器触发线程"><a href="#定时器触发线程" class="headerlink" title="定时器触发线程"></a>定时器触发线程</h4><p>​    浏览器定时计数器并不是由JavaScript引擎计数的, 因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确, 因此通过单独线程来计时并触发定时是更为合理的方案。</p>
<h4 id="事件触发线程"><a href="#事件触发线程" class="headerlink" title="事件触发线程"></a>事件触发线程</h4><p>​    当一个事件被触发时该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理。这些事件可以是当前执行的代码块如定时任务、也可来自浏览器内核的其他线程如鼠标点击、AJAX异步请求等，但由于JS的单线程关系所有这些事件都得排队等待JS引擎处理。</p>
<h4 id="异步HTTP请求线程"><a href="#异步HTTP请求线程" class="headerlink" title="异步HTTP请求线程"></a>异步HTTP请求线程</h4><p>​    在XMLHttpRequest在连接后是通过浏览器新开一个线程请求， 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件放到 JavaScript引擎的处理队列中等待处理。</p>
<h4 id="深入了解JS-Core"><a href="#深入了解JS-Core" class="headerlink" title="深入了解JS Core"></a>深入了解JS Core</h4><p>原文地址：<a href="https://tech.meituan.com/2018/08/23/deep-understanding-of-jscore.html" target="_blank" rel="noopener">https://tech.meituan.com/2018/08/23/deep-understanding-of-jscore.html</a></p>
<p>JS代码被经词法分析、语法分析后生成一棵AST，ByteCodeGenerato根据AST生成字节码，<strong>js编译结束后并不会生成可执行文件存储在内存或硬盘，字节码被虚拟机JS Core逐行运行。</strong></p>
<p>JSCore采用的是<strong>基于寄存器</strong>的指令集架构，有些JVM是<strong>基于栈</strong>的指令集架构；</p>
<p>基于<strong>寄存器</strong>的指令集架构执行效率高（操作数不用反复入栈出栈）、内存消耗大、不易于移植（<strong>虚拟寄存器需要去匹配到真实机器中CPU的寄存器</strong>）</p>
<p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018a/f905fe0b.png" alt="img"></p>
<p><strong>JS的GC：</strong></p>
<p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018a/bf359c70.png" alt="img"></p>
<p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018a/cc094b9b.png" alt="img"></p>
<h4 id="参考资源-1"><a href="#参考资源-1" class="headerlink" title="参考资源"></a>参考资源</h4><h3 id="浏览器渲染页面流程"><a href="#浏览器渲染页面流程" class="headerlink" title="浏览器渲染页面流程"></a>浏览器渲染页面流程</h3><p><img src="https://img.alicdn.com/tps/TB1eabOLpXXXXX3XFXXXXXXXXXX-1093-167.jpg_720x720.jpg#alt=" alt="img"></p>
<p>渲染进程多线程架构：</p>
<ul>
<li>Main Thread：主线程，执行JavaScript代码</li>
<li>Worker Threads：worker线程，例如web worker、service worker等</li>
<li>Raster Thread：光栅线程</li>
<li>Compositor Thread：合成器线程</li>
<li>Timeout Thread：定时器线程</li>
<li>HTTP Thread：HTTP线程，用于异步请求</li>
<li>….</li>
</ul>
<p>渲染页面流程：<strong>Parse—&gt; Layout —&gt; Paint —&gt; Composite</strong></p>
<h4 id="Parse"><a href="#Parse" class="headerlink" title="Parse"></a>Parse</h4><p><img src="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/webkitflow.png" alt=""></p>
<p><strong>Parse阶段将HTML转为DOM树、CSS转为Rule树</strong></p>
<p>Parse分为两阶段：</p>
<ol>
<li><strong>词法分析</strong>【负责将输入内容分解成一个个有效标记】</li>
<li><strong>语法分析</strong>【根据语言的语法规则分析文档结构，构建语法分析树】</li>
</ol>
<ul>
<li><strong>浏览器首先解析HTML文档</strong>：解析文档就是将文档转化成为有意义的结果，可以让代码理解和使用的结构，这里解析得到的的结构通常是带变了文档结构的节点树，即DOM树。（具体的过程（编译原理）：词法分析将输入内容分解成一个个有效的标记；解析器负责根据语言的语法规则分析文档的结构，从而构建解析树；WebKit使用了创建词法分析器的Flex以及用于创建解析器的Bison。然而解析HTML并不能用常规的自上而下或自下而上的解析器进行解析，原因在于：语言的宽容本质；浏览器历来对一些常见的无效HTML用法采取包容态度；<strong>解析过程</strong>需要不断反复，源内容在解析过程中通常不会改变，但是<strong>在HTML中脚本标记如果包含了document.write就会添加额外的标记</strong>。）</li>
<li><strong>解析HTML的算法</strong>：标记化、树构建。<ul>
<li>标记化是词法分析过程，将输入内容解析成多个标记（起始标记、结束标记、属性名称、属性值），然后传递给树构造器然后接受下一个字符以识别下一个标记，直到整个输入的结束；输出HTML标记</li>
<li>树构建阶段的输入是来自<strong>标记化阶段的标记序列</strong>，每个标记都会被树构建器处理然后添加到DOM树和开放元素的堆栈中（用于纠正嵌套错误和未闭合的标签）</li>
</ul>
</li>
<li><strong>CSS解析</strong>：CSS是上下文无关的语法，可以使用常规的各种解析器进行解释。<ul>
<li>解析器将CSS文件解析成StyleSheet对象，而且每个对象都包含了CSS规则。</li>
</ul>
</li>
<li><strong>处理脚本和样式表的顺序</strong>：<ul>
<li><strong>脚本</strong>：在执行脚本时会阻塞DOM和CSS解析（因为脚本可能修改DOM和CSS），所以需将脚本置于底部或加上下述属性<ul>
<li>defer：<strong>表示并行加载但最后执行脚本，只用于外部脚本</strong></li>
<li>async：<strong>表示解析HTML其他元素时同时异步加载执行脚本，但是不知道脚本之间执行的顺序（加载完就可执行）</strong></li>
</ul>
</li>
<li><strong>样式表</strong>：理论上来说，应用样式表不会更改DOM树，因此似乎没有必要等待样式表并停止文档解析。但是如果脚本在文档解析阶段会请求样式信息，如果当时还没有加载和解析样式表，脚本可能会获得一个错误的回复。</li>
</ul>
</li>
</ul>
<h4 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h4><p><strong>Layout阶段计算元素的尺寸、样式、位置等</strong></p>
<p><strong>在构建DOM树的同时还会构建Render树：</strong></p>
<ul>
<li>Render树中都是可见元素（不包括<code>dislay:none</code>但包括<code>visibility: hidden</code>）</li>
<li><strong>伪元素也被加入到Render树中，尽管其不在DOM树</strong></li>
<li>与此同时，还需要计算每一个呈现对象的可视化属性</li>
</ul>
<p><strong>样式计算：</strong></p>
<p><strong>位置大小计算：</strong></p>
<ul>
<li>递归过程，从根元素开始，递归遍历部分或所有的结构并计算大小、位置等信息</li>
<li>Dirty位系统，将发生更改的render object标记为dirty，异步触发增量布局</li>
<li>布局的种类<ul>
<li>全量布局：触发了整个render tree的重新布局，例如：<ul>
<li>全局样式更改</li>
<li>屏幕大小调整</li>
</ul>
</li>
<li><strong>增量布局：对标志为dirty的render object进行重新布局</strong></li>
<li>异步布局：<strong>增量布局是异步执行的</strong><ul>
<li><strong>类似于任务队列，reflow命令只是被加入队列，具体的执行由调度程序控制</strong></li>
<li>请求样式信息可同步触发增量布局</li>
</ul>
</li>
<li>同步布局：<strong>全局布局往往时同步执行</strong></li>
</ul>
</li>
</ul>
<h4 id="Paint"><a href="#Paint" class="headerlink" title="Paint"></a>Paint</h4><p>在绘制阶段，系统会遍历呈现树，并调用呈现元素的paint方法，将元素的内容显示到屏幕上 ，这里同样存在<strong>全局绘制</strong>和<strong>增量绘制</strong>。</p>
<p><strong>Paint阶段决定按什么顺序paint元素</strong></p>
<p>绘制顺序：背景颜色 -&gt; 背景图片 -&gt; 边框 -&gt; 子代 -&gt; 轮廓</p>
<h5 id="Webkit矩形缓存"><a href="#Webkit矩形缓存" class="headerlink" title="Webkit矩形缓存"></a>Webkit矩形缓存</h5><p><strong>在重新绘制之前，WebKit 会将原来的矩形另存为一张位图，然后只绘制新旧矩形之间的差异部分。</strong></p>
<h4 id="Composite"><a href="#Composite" class="headerlink" title="Composite"></a>Composite</h4><p><img src="https://img.alicdn.com/tps/TB1VFRDMXXXXXahXpXXXXXXXXXX-814-320.png_720x720.jpg#alt=" alt="img"></p>
<p><strong>Node：</strong>DOM树中的节点</p>
<p><strong>Layout Object：</strong></p>
<ul>
<li>DOM树中的可视元素，包括伪元素</li>
<li>对象包含尺寸、位置样式等信息</li>
</ul>
<p><strong>Paint Layer：</strong></p>
<ul>
<li>在同一坐标空间下的Layout Objects属于同一Paint Layer</li>
<li><em>Paint Layer最开始用于实现层叠上下文用于保证页面元素正确合成</em></li>
<li>Paint Layer类型：<ul>
<li><strong>NormalPaintLayer</strong>（根元素、具有定位、透明、滤镜filter、mask属性、transform属性、）</li>
<li><strong>OverflowClipPaintLayer</strong>（overflow 不为 visible）</li>
<li>NoPaintLayer（不需要paint的paint layer）</li>
<li><strong>满足上面条件的拥有独立的Paint Layer</strong>，若不满足则与第一个拥有Paint Layer的元素共享Layer</li>
</ul>
</li>
</ul>
<p><strong>Graphic Layers：</strong></p>
<ul>
<li><strong>某些特殊的Paint Layer会被认为是合成层</strong>，其拥有独立的GraphicsLayer；</li>
<li>无独立的GraphicsLayer的渲染层与第一个拥有GraphicsLayer的渲染层共享GraphicsLayer；</li>
<li><strong>每个GraphicsLayer拥有一个GraphicsContext，Context负责输出该层的位图</strong>（存储在共享内存中，通过纹理上传至GPU，再由GPU将多个位图合并绘制到屏幕上）</li>
<li><strong>渲染层提升为合成层</strong><ul>
<li>直接原因<ul>
<li>硬件加速的 iframe 元素、硬件加速的插件</li>
<li>video 元素、覆盖在video 元素上的视频控制栏</li>
<li><strong>3D 或者 硬件加速的 2D Canvas 元素</strong></li>
<li>3D transform、backface-visibility 为 hidden</li>
<li><strong>对opacity、transform、fliter、backdropfilter 应用了 animation 或者 transition</strong></li>
<li><strong>will-change 设置为 opacity、transform、top、left、bottom、right（其中 top、left 等需要设置明确的定位属性，如 relative 等）</strong></li>
</ul>
</li>
<li>后代元素原因</li>
<li>overlap 重叠原因</li>
<li>优点：<ul>
<li>合成层的位图由GPU合成，更快</li>
<li>当需要 repaint 时，只需要 repaint 本身，不会影响到其他的层</li>
<li>对于 transform 和 opacity 效果，不会触发 layout 和 paint</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Composite技术是将页面划分成多个layer分别栅格化，然后通过composite线程合并layer进行展示，当屏幕scroll时只需要composite可视区域即可。</p>
<h5 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h5><ul>
<li>当layout和paint顺序确定后，Main Thread将这些信息传递给Compositor Thread</li>
<li>Compositor将每个layer划分多个tile，将其交给Raster Thread进行栅格化</li>
<li>Raster Thread栅格化tile并存储在GPU内存中</li>
<li>Compositor Thread收集栅格化完成的tile信息来创建合成帧（compositor iframe）</li>
<li>合成帧通过IPC传递给浏览器进程</li>
<li>合成帧再被传递给GPU进行绘制到屏幕上</li>
</ul>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><p>由于合成不需要主线程的参与，因此合成器线程不需要等待样式计算或JS执行，所以给用户的体验更加平滑【广泛应用于动画】</p>
<h4 id="响应输入"><a href="#响应输入" class="headerlink" title="响应输入"></a>响应输入</h4><p><strong>流程</strong>：</p>
<ul>
<li><strong>Browser Process</strong>最早发现用户输入，但仅知道事件类型、坐标 ；<strong>将这些事件类型和发生的坐标传递给Render Process</strong></li>
<li>Render Process通过事件类型和坐标找到对应的事件并触发对应事件监听器的回调</li>
</ul>
<h4 id="合成器相关"><a href="#合成器相关" class="headerlink" title="合成器相关"></a>合成器相关</h4><p>合成器会将带有事件监听器的区域标为“Non-Fast Scrollable Region”。</p>
<ul>
<li>一旦此区域发生输入，合成器会确保这些事件会传递给Main Thread。（合成器线程与主线程通信，花费时间/空间成本）</li>
<li><strong>发生在此区域外的输入，合成器不等待主线程直接创建新的合成帧</strong></li>
<li><strong>事件冒泡机制可能导致合成器与主线程发生不必要的线程通信</strong></li>
</ul>
<h5 id="合并优化连续的事件"><a href="#合并优化连续的事件" class="headerlink" title="合并优化连续的事件"></a>合并优化连续的事件</h5><p>一般我们屏幕的刷新速率为 60fps，但是某些事件的触发量会不止这个值，出于优化的目的，Chrome 会合并连续的事件(如 wheel, mousewheel, mousemove, pointermove, touchmove )，并延迟到下一帧渲染时候执行。</p>
<p>而如 keydown, keyup, mouseup, mousedown, touchstart, 和 touchend 等非连续性事件则会立即被触发。</p>
<p><img src="https://developers.google.com/web/updates/images/inside-browser/part4/coalescedevents.png" alt="coalesced events"></p>
<h5 id="合成器发送输入事件给主线程"><a href="#合成器发送输入事件给主线程" class="headerlink" title="合成器发送输入事件给主线程"></a>合成器发送输入事件给主线程</h5><p>当合成器线程发送输入事件给主线程时，主线程首先会进行命中测试（hit test）来查找对应的事件目标，命中测试会基于渲染过程中生成的绘制记录（ paint records ）查找事件发生坐标下存在的元素。</p>
<h4 id="参考资源-2"><a href="#参考资源-2" class="headerlink" title="参考资源"></a>参考资源</h4>
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2020/01/24/react-lifecycle/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/12/27/Algorithms-4/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(https://s1.ax1x.com/2020/03/24/8OkwFI.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="https://i.loli.net/2020/03/26/X1FxQlLtRbVEANi.png" alt="GeniusFunny's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        geniusfunnyyh@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:geniusfunnyyh@gmail.com" target="_blank" title="Contact Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Contact Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/02/">二月 2020<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/01/">一月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/12/">十二月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/02/">二月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/12/">十二月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/10/">十月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">4</span></a>
            </li></ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/JavaScript/">JavaScript<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/JavaScript核心/">JavaScript核心<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/JavaScript设计模式/">JavaScript设计模式<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Node-js/">Node.js<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/React/">React<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/Redis/">Redis<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/其他/">其他<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/前端框架/">前端框架<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/实践/">实践<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/小技巧/">小技巧<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/性能优化/">性能优化<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/浏览器/">浏览器<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/笔记/">笔记<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/算法/">算法<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/翻译/">翻译<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算机基础/">计算机基础<span class="sidebar_archives-count">1</span></a>
            </li></ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">turned_in</i>
                
                标签
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">31</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    
    <span id="footer-image">
        <a href="https://www.upyun.com/" target="_blank" title="upyun_logo">
            <img src="/img/upyun_logo.svg" alt="upyun_logo"><!--
     --></a>
    </span>


</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/GeniuFunny" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/GeniusFunny" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>GeniusFunny的个人博客
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('etC3TLV8Pj1FSAVvtfsGcRNq-gzGzoHsz', 'esJd1ihFxVqwDejivs92D9To');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>










<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
